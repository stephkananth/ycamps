  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "badges"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "level" integer, "description" text, "skill_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_badges_on_skill_id" ON "badges" ("skill_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "branches"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "branches" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camp_badges"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "badge_id" integer, "camp_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_camp_badges_on_badge_id" ON "camp_badges" ("badge_id")[0m
  [1m[35m (0.6ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camp_badges_on_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camp_badges_on_badge_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_camp_badges_on_camp_id" ON "camp_badges" ("camp_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badge_tasks"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "camper_camp_badge_tasks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camper_camp_badge_id" integer, "task_id" integer, "completed" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badge_tasks_on_camper_camp_badge_id" ON "camper_camp_badge_tasks" ("camper_camp_badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camper_camp_badge_tasks_on_camper_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camper_camp_badge_tasks_on_camper_camp_badge_id' AND type='index'
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badge_tasks_on_task_id" ON "camper_camp_badge_tasks" ("task_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badges"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "camper_camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camp_badge_id" integer, "camper_id" integer, "completed" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badges_on_camp_badge_id" ON "camper_camp_badges" ("camp_badge_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camper_camp_badges_on_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camper_camp_badges_on_camp_badge_id' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badges_on_camper_id" ON "camper_camp_badges" ("camper_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "campers"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "campers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "parent_id" integer, "first_name" varchar, "last_name" varchar, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX "index_campers_on_parent_id" ON "campers" ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camps"[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "camps" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "program" varchar, "start_date" date, "end_date" date, "active" boolean, "location_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_camps_on_location_id" ON "camps" ("location_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselor_camp_badges"[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "counselor_camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camp_badge_id" integer, "counselor_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX "index_counselor_camp_badges_on_camp_badge_id" ON "counselor_camp_badges" ("camp_badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_counselor_camp_badges_on_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_counselor_camp_badges_on_camp_badge_id' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_counselor_camp_badges_on_counselor_id" ON "counselor_camp_badges" ("counselor_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselors"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "counselors" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_counselors_on_user_id" ON "counselors" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "branch_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_branch_id" ON "locations" ("branch_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "parents"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "parents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX "index_parents_on_user_id" ON "parents" ("user_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "skills"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "skills" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "category" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tasks"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "badge_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_tasks_on_badge_id" ON "tasks" ("badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password_digest" varchar, "first_name" varchar, "last_name" varchar, "role" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190325042954)[0m
  [1m[35m (18.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190318171127),
(20190318171146),
(20190318171120),
(20190318171158),
(20190318171031),
(20190318171116),
(20190318171054),
(20190318171110),
(20190318171006),
(20190318171020),
(20190318171050),
(20190318171025),
(20190318171101),
(20190318171152);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-01 23:48:00.386436"], ["updated_at", "2019-04-01 23:48:00.386436"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
SkillTest: test_: Skill should verify the alphabetical scope works. 
--------------------------------------------------------------------
  [1m[36mSkill Load (0.5ms)[0m  [1m[34mSELECT "skills".* FROM "skills" ORDER BY name[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$mu9LnDLBvgDnl9k2sys9sOwEGCvG51R4yzCn7.Cx6r/cllsHh1t26"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.324842"], ["updated_at", "2019-04-01 23:48:28.324842"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$QeL3daO.p8JkEJQRdKKLiumaurDmFGbxKW5EZafptknOZxmu2GPRS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.357814"], ["updated_at", "2019-04-01 23:48:28.357814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$ezwEXJtMbL8wXMqcRUIbKOf1h/jIbPyPqmkixhNbPlOdkOy2TumKK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.365116"], ["updated_at", "2019-04-01 23:48:28.365116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (9.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$crKT4rtvElhHP1scDpDN6eyf7SD7lMwPgRf4/OriRxGjV/dCYB.E."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.439147"], ["updated_at", "2019-04-01 23:48:28.439147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$kXytTevP9IkkklfMHNfjL.19RyBO2jgp8wTfZeRZNKSjXOsPpPlu."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.464598"], ["updated_at", "2019-04-01 23:48:28.464598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$yhEfMzBdwHggPVUsyZXUYe80Q0fGbfO9bRmU0PkZ5nYB8j46DQ312"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.470994"], ["updated_at", "2019-04-01 23:48:28.470994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (16.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$xVRnd8ZzuHPZLWznVh2HweMN1xKnmtrKR/x8n4nGlSAirIvAi7ZO2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.570511"], ["updated_at", "2019-04-01 23:48:28.570511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$PG4pB.8UXvhUH6V4/hczMu7rYKbvbaKmVNE.OG2evEKHyPIXa1cxC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.579564"], ["updated_at", "2019-04-01 23:48:28.579564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$zNvdYBkAQZ2kq/.nSWvfhedsBB460mKGtXj4smLeg6ENN3fnSFDX6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.596698"], ["updated_at", "2019-04-01 23:48:28.596698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be at least eight characters. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$/LdVjNBYesYcoctCFZ5P1O8.t2DNlcgh87orlpnbJnXel6V0zDOgy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.621488"], ["updated_at", "2019-04-01 23:48:28.621488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$PBtmWCNRxk4xXCH.zomkNOmb2BjhzqZsUfEvTgC2RTGVlEXHj.mPC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.630243"], ["updated_at", "2019-04-01 23:48:28.630243"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$VCBmueRqFPkRO.m/059Hvuy7Q1Bu2XY0HqpUtlGhtHCJxCIWd1g4W"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.648738"], ["updated_at", "2019-04-01 23:48:28.648738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$yLKIdQDFRpbIkM5ZE.CifOBQ2iUegiee87c0aj9ewzoZTpEDbO0wO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.750289"], ["updated_at", "2019-04-01 23:48:28.750289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$k2C/3EKkq3ziA50SW4biVu0bjagh87b6gqA3gpNEPtlDMxHmzE1Su"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.781378"], ["updated_at", "2019-04-01 23:48:28.781378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$7ItbbR5Xm9q5/Nrmr0Epeep8rsrMJo6JuYf7vnjS/VWZWhIHEWBXS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.819909"], ["updated_at", "2019-04-01 23:48:28.819909"]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$wPHK5vo6tpYfaw1ZJuQZdu9iSjDEZIjqWhuxERXA58HmQW4.jaGw2"], ["created_at", "2019-04-01 23:48:28.864852"], ["updated_at", "2019-04-01 23:48:28.864852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$digEyW/o/kvpOC3mzEcSsun96pwTf.qMmcPe8efaUX7LtEJITWkym"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:48:28.920494"], ["updated_at", "2019-04-01 23:48:28.920494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$fQTxJJzhOd8M3HQ00ybaEOqkhkqcoXLj1DSC8ojO9Qu9JKpGN73Fu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:48:28.944750"], ["updated_at", "2019-04-01 23:48:28.944750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$1R/MadRaEf8hpf9kPz7O4uygZ4mnMg8HAVvSv6Glr3ivaVFcLtOem"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:48:28.953173"], ["updated_at", "2019-04-01 23:48:28.953173"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (15.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (20.9ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:48:29.563821"], ["updated_at", "2019-04-01 23:48:29.563821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:48:29.569736"], ["updated_at", "2019-04-01 23:48:29.569736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:48:29.611751"], ["updated_at", "2019-04-01 23:48:29.611751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:48:29.654571"], ["updated_at", "2019-04-01 23:48:29.654571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:48:29.661297"], ["updated_at", "2019-04-01 23:48:29.661297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:48:29.685385"], ["updated_at", "2019-04-01 23:48:29.685385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:48:29.725583"], ["updated_at", "2019-04-01 23:48:29.725583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:48:29.959655"], ["updated_at", "2019-04-01 23:48:29.959655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:48:30.025893"], ["updated_at", "2019-04-01 23:48:30.025893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (4.5ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------
LocationTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:48:30.056355"], ["updated_at", "2019-04-01 23:48:30.056355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:48:30.062892"], ["updated_at", "2019-04-01 23:48:30.062892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:48:30.070660"], ["updated_at", "2019-04-01 23:48:30.070660"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:48:30.096467"], ["updated_at", "2019-04-01 23:48:30.096467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:48:30.102344"], ["updated_at", "2019-04-01 23:48:30.102344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:48:30.111027"], ["updated_at", "2019-04-01 23:48:30.111027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:48:30.136155"], ["updated_at", "2019-04-01 23:48:30.136155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:48:30.144332"], ["updated_at", "2019-04-01 23:48:30.144332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:48:30.150061"], ["updated_at", "2019-04-01 23:48:30.150061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:48:30.155392"], ["updated_at", "2019-04-01 23:48:30.155392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:48:30.169314"], ["updated_at", "2019-04-01 23:48:30.169314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:48:30.175100"], ["updated_at", "2019-04-01 23:48:30.175100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$gUe74zhgkCKunX/xq0k8nOo1Ur8CnDAqCE6R5c.l1VHDPLN.V6Df2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.463753"], ["updated_at", "2019-04-01 23:49:22.463753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$pAF/0DVvKK1OkxoPT9i2wu3nzoTyKAWgaIeeDhuiI1jBbbPWqlgkW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.469259"], ["updated_at", "2019-04-01 23:49:22.469259"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$YtKbWTYz5o8meEG8ny2vHOj8UkzaGiQGWknPfBMSV3C48rMEjQTdm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.473569"], ["updated_at", "2019-04-01 23:49:22.473569"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$jcdIJSoFa0EhltExhBuUWuirTJgFenqoSRigCErk5u5dwvysbftsC"], ["created_at", "2019-04-01 23:49:22.522406"], ["updated_at", "2019-04-01 23:49:22.522406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$M0.33P4XtuofoSoikdkPmuzAeTuoSP5hzvj4sng4jEYWzSin0DbZi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.552844"], ["updated_at", "2019-04-01 23:49:22.552844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$PxjtDJpa7CSA62ZAkxADOuyrNixNoEK2cjCACyl8DneuGOG7rYAjq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.559321"], ["updated_at", "2019-04-01 23:49:22.559321"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$FzQzYr9i1s/dRlyDvp31g.Oo61iliQW2BEL9VfK7i38IGUW67DCT6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.564055"], ["updated_at", "2019-04-01 23:49:22.564055"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be at least eight characters. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$eqI3tz7U0R81tZfPPAM1xe6h55Xul123uRYrvf88HZJkfrUpm.802"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.575244"], ["updated_at", "2019-04-01 23:49:22.575244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Wi1sr4Jon/Mb/.WY62YNteyGZLFTbTKo8mphpAqH6tnbB8lgW077O"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.580215"], ["updated_at", "2019-04-01 23:49:22.580215"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$uA6oxi7Y4/kP4YapHDpl4.v/e2SKUo3IsZ78Vctw1tZff.ly8wHHK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.584629"], ["updated_at", "2019-04-01 23:49:22.584629"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$9H4H.Jx.PwVAMeNX1WI.5OrPa8xeVPLAW6M3Gut6rZx6.Hbkx5uh."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.602052"], ["updated_at", "2019-04-01 23:49:22.602052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9PUIJeOpZliZ2p9EdYi8pu4VbvxhP.idUna8H16LAqUoWGbG.Rcwq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.606958"], ["updated_at", "2019-04-01 23:49:22.606958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$XFILLcZ4G0YYsPnuQXeNsO5.EugrSoCIVHj.8XPzVzWPr85BBXezq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.613483"], ["updated_at", "2019-04-01 23:49:22.613483"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$RdoZnf2ISuL7dgDxfD9d1uXJIlEnem6lAdHpDg.D1VK6jPAV2v/iO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.639001"], ["updated_at", "2019-04-01 23:49:22.639001"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$4cXJ2PQ3KyCueDdMG2N/8.AQ8cilvyhjW/KWMWN6e13Pzl9TAAlf2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.643601"], ["updated_at", "2019-04-01 23:49:22.643601"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$o3YGma0Re.G/NLO/PeYfD.ig2PRjKKqsf.vHaK66FhU1NQ6QNjPNa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.649587"], ["updated_at", "2019-04-01 23:49:22.649587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$ROU.BBeXzcrrCtlu2juYteovs9rLGfnYA.7vLgIeI6ogjNdb55VoW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:49:22.699407"], ["updated_at", "2019-04-01 23:49:22.699407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$W9/2q2l5bPGaM5HmYnQKS.JFZT30jDz1Jtv0a6yDF3QloQoiVJo26"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:49:22.704168"], ["updated_at", "2019-04-01 23:49:22.704168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$RilWVMLQSMvYIvNdJEpXUeg0xkRlwqDgKA5KhQ1qPrAP6gdm/XRhS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:49:22.709623"], ["updated_at", "2019-04-01 23:49:22.709623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:49:22.789408"], ["updated_at", "2019-04-01 23:49:22.789408"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:49:22.793330"], ["updated_at", "2019-04-01 23:49:22.793330"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:49:22.796533"], ["updated_at", "2019-04-01 23:49:22.796533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:49:22.814153"], ["updated_at", "2019-04-01 23:49:22.814153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:49:22.821939"], ["updated_at", "2019-04-01 23:49:22.821939"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:49:22.826184"], ["updated_at", "2019-04-01 23:49:22.826184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:49:22.831060"], ["updated_at", "2019-04-01 23:49:22.831060"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:49:22.943427"], ["updated_at", "2019-04-01 23:49:22.943427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------
LocationTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:49:22.984458"], ["updated_at", "2019-04-01 23:49:22.984458"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:49:22.987504"], ["updated_at", "2019-04-01 23:49:22.987504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:49:22.991696"], ["updated_at", "2019-04-01 23:49:22.991696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:49:23.008403"], ["updated_at", "2019-04-01 23:49:23.008403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:49:23.012251"], ["updated_at", "2019-04-01 23:49:23.012251"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:49:23.015212"], ["updated_at", "2019-04-01 23:49:23.015212"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:49:23.035939"], ["updated_at", "2019-04-01 23:49:23.035939"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:49:23.049011"], ["updated_at", "2019-04-01 23:49:23.049011"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:49:23.055952"], ["updated_at", "2019-04-01 23:49:23.055952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:49:23.060090"], ["updated_at", "2019-04-01 23:49:23.060090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:49:23.064544"], ["updated_at", "2019-04-01 23:49:23.064544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:49:23.071195"], ["updated_at", "2019-04-01 23:49:23.071195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:49:23.074738"], ["updated_at", "2019-04-01 23:49:23.074738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------
LocationTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:50:39.087902"], ["updated_at", "2019-04-01 23:50:39.087902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:50:39.094781"], ["updated_at", "2019-04-01 23:50:39.094781"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:50:39.097301"], ["updated_at", "2019-04-01 23:50:39.097301"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:50:39.100542"], ["updated_at", "2019-04-01 23:50:39.100542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:50:39.104393"], ["updated_at", "2019-04-01 23:50:39.104393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:50:39.107556"], ["updated_at", "2019-04-01 23:50:39.107556"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:50:39.127964"], ["updated_at", "2019-04-01 23:50:39.127964"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:50:39.142179"], ["updated_at", "2019-04-01 23:50:39.142179"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:50:39.145240"], ["updated_at", "2019-04-01 23:50:39.145240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:50:39.148194"], ["updated_at", "2019-04-01 23:50:39.148194"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:50:39.151074"], ["updated_at", "2019-04-01 23:50:39.151074"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:50:39.155422"], ["updated_at", "2019-04-01 23:50:39.155422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:50:39.160278"], ["updated_at", "2019-04-01 23:50:39.160278"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$RAN6251.elCcbdvnifAB3.5Cx9J6ZTyyZDsiUct2ecGlbkqT7XDLu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.209856"], ["updated_at", "2019-04-01 23:50:39.209856"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$tN7bCGUT5gaCpCgwU5Kkv.mEmf4yuuXhVfMnCHGhULNJ6plFpJ3iq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.214497"], ["updated_at", "2019-04-01 23:50:39.214497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$04eLbeGEP5abbXQnvQbPo.YKrisEqczmXNX.N0BR7dELfJEnuRII."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.219270"], ["updated_at", "2019-04-01 23:50:39.219270"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$rmjxown7juC96w4VV9g4aORP6z9Fw0HMIwUwcvR2rbGa0XaBWdeoy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.249447"], ["updated_at", "2019-04-01 23:50:39.249447"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$d0zoiSHwHB7qtY.XPDDObOrV5f8AjFMJVbv6vaWPEEZQqFZCiZm6S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.254741"], ["updated_at", "2019-04-01 23:50:39.254741"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$MtA2LM2XMChA9VbRJbE9Euxw2e7B5UVJLUIct3OfxmST7qcwiHese"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.259078"], ["updated_at", "2019-04-01 23:50:39.259078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$h21j7Gnu/M4CYt2OZsQKBuz.LSO.Cz0R9NJ8UIzDLo83cFRDHbmdS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.279465"], ["updated_at", "2019-04-01 23:50:39.279465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$pk9315Cmnr1Ua9GiuZuyGORCIr7ub5ejhNe9CGk8Wn4tCp49YRL9e"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.284655"], ["updated_at", "2019-04-01 23:50:39.284655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$TzfYEq8HDSciFOJZAZm6B.0Iu/MaH.hL/nYsD6FsJvb.mAFiOV5Ym"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.289206"], ["updated_at", "2019-04-01 23:50:39.289206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$AnhsvJKnbaEConDGD6luye5IrC1ml7dk/AxwbYlBN500Gd93sWEJe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.341472"], ["updated_at", "2019-04-01 23:50:39.341472"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$iOXPQnqyboFbdmWLcMnI2etaGawTh4yDm9L6BnncYIXvbGJiVOiBm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.346402"], ["updated_at", "2019-04-01 23:50:39.346402"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$YxG0CBiOotnS0k5XzeVFbeV3JsZh3QwwcB2rMlVP86F9gFudcsdai"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.350839"], ["updated_at", "2019-04-01 23:50:39.350839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$nuuAirPlItouae65MOsw9ecb6FcuGD2YqYLgb8ISzuAwyYoRyiG0W"], ["created_at", "2019-04-01 23:50:39.365056"], ["updated_at", "2019-04-01 23:50:39.365056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$6EGGQ1jPmPV7jmqOSLA9NO7wo/CeNzcXLC3qxAip.b.xtSA7s5Qaq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.381953"], ["updated_at", "2019-04-01 23:50:39.381953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Whj3pYPfjxpSY/YbIg.CsOOwxC2/fAMYSKh6iv4Ix2jHx2vlB/zYm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.387990"], ["updated_at", "2019-04-01 23:50:39.387990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$rvxzcc445kiYULHgw4GlbOs8t3qnbJVqzMz.H/P.cf2NAy3gBjLDS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.393069"], ["updated_at", "2019-04-01 23:50:39.393069"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be at least eight characters. 
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$4QiiCfn4gDberC6fHlUDLugoZyP8befvhK3ZLs0wjV/ca2Kx7xNkS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:50:39.428129"], ["updated_at", "2019-04-01 23:50:39.428129"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$WSkGo1rqZg0sa8/DKi/7PuaMz./zfdz3vkCfZSzWd.JgjOLkG/x1e"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:50:39.432925"], ["updated_at", "2019-04-01 23:50:39.432925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$xTu2zf.2V5Pq0KAglpaBg.UbEtNuaiS4MMnswhUdeJwhAWpy73E/i"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:50:39.437869"], ["updated_at", "2019-04-01 23:50:39.437869"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:50:39.530583"], ["updated_at", "2019-04-01 23:50:39.530583"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:50:39.540287"], ["updated_at", "2019-04-01 23:50:39.540287"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:50:39.543102"], ["updated_at", "2019-04-01 23:50:39.543102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:50:39.546445"], ["updated_at", "2019-04-01 23:50:39.546445"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:50:39.553854"], ["updated_at", "2019-04-01 23:50:39.553854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:50:39.559978"], ["updated_at", "2019-04-01 23:50:39.559978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:50:39.562791"], ["updated_at", "2019-04-01 23:50:39.562791"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:50:39.648324"], ["updated_at", "2019-04-01 23:50:39.648324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.1ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:14.751661"], ["updated_at", "2019-04-01 23:51:14.751661"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:14.796414"], ["updated_at", "2019-04-01 23:51:14.796414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:14.801167"], ["updated_at", "2019-04-01 23:51:14.801167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:14.804111"], ["updated_at", "2019-04-01 23:51:14.804111"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:51:14.807288"], ["updated_at", "2019-04-01 23:51:14.807288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:51:14.814094"], ["updated_at", "2019-04-01 23:51:14.814094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:51:14.818842"], ["updated_at", "2019-04-01 23:51:14.818842"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:14.841312"], ["updated_at", "2019-04-01 23:51:14.841312"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:14.886896"], ["updated_at", "2019-04-01 23:51:14.886896"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:14.890486"], ["updated_at", "2019-04-01 23:51:14.890486"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:14.893256"], ["updated_at", "2019-04-01 23:51:14.893256"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:14.907672"], ["updated_at", "2019-04-01 23:51:14.907672"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:14.910495"], ["updated_at", "2019-04-01 23:51:14.910495"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:14.913161"], ["updated_at", "2019-04-01 23:51:14.913161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:14.924172"], ["updated_at", "2019-04-01 23:51:14.924172"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$2qpRRSJbvtKyetpGTFNrjum4Wb3dT77hDQFQD8H4hPl0hoCzAkNWy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:14.960517"], ["updated_at", "2019-04-01 23:51:14.960517"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$NR0y7cx3IFavK5BMlOI/Fu9XqnPQ1dfo1k7QxI0S0pN2CIa8oQWJO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:14.967034"], ["updated_at", "2019-04-01 23:51:14.967034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$/iBLebhJT05jI.NixBf0g.LGXsTW67PB3un5njvmkDVOpL.GFc6um"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:14.976069"], ["updated_at", "2019-04-01 23:51:14.976069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$Jd9VTGVYbm9HqlLn3XAfpeKZRvEYavMFvAd13nra.keFNtcI1JYg."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:14.987327"], ["updated_at", "2019-04-01 23:51:14.987327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$fbvQseYxYPYaDSwDJixvMOczo.t2cnafABgDVcvRz1/yPJLzd2nXK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:14.996357"], ["updated_at", "2019-04-01 23:51:14.996357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$7gd9uSS8RI7IXk9N9Qp0x.hphZnqKziREnlENenGMVkTcwxEg4SHK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:15.002168"], ["updated_at", "2019-04-01 23:51:15.002168"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be at least eight characters. 
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$f0U0I55kd4bmsHcY3K05H.XMMWpzzYV1d7ToElHB03DJDJltR6/.y"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:15.023654"], ["updated_at", "2019-04-01 23:51:15.023654"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$nNQFIW3qi8Pt3vnVQH7sROj37WC15G./SrKotvuHBD4BJK559EqGC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:15.028570"], ["updated_at", "2019-04-01 23:51:15.028570"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$IpOQpyUryoknYICauiFjAO/sJg3uj6hFHzgij03ndJuNmCXhqwDTy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:15.035240"], ["updated_at", "2019-04-01 23:51:15.035240"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$7F3bKsxgUqWwyvVYS9YoweINT3L7cm9SCoVW4D/aDyDiMqXTBawFy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:15.052324"], ["updated_at", "2019-04-01 23:51:15.052324"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$V.MAjHG55YWIgnpGJYMD6eZHhW8hMZtFvJRbabrgpTkGXVL4RVgDG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:15.057390"], ["updated_at", "2019-04-01 23:51:15.057390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Dly98.1Fc6v.6m9EdFiAbOZq.5a9cZdoABGM/w2lCgL/WPAG/hg0y"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:15.062391"], ["updated_at", "2019-04-01 23:51:15.062391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$spebl2d9iLWdGhjSMjXHDuf6BNVsMP2eQAKSpnn5Ny9qqo4H6W9Sq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:15.129580"], ["updated_at", "2019-04-01 23:51:15.129580"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$mNmctA6c.RW.rr6jwQ/o6OmLY4PKFqXjI05/ZOEndMirkDKY9h0xa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:15.134490"], ["updated_at", "2019-04-01 23:51:15.134490"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$TofDqX25jSQb/GjPbZxHX.ZFGaAMmDqJrEMTQpRWJeXbuS/yxuU0S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:15.141447"], ["updated_at", "2019-04-01 23:51:15.141447"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$pYmztQBcRxx/sPxJDKX9fuNhBxO0vNH/ldewt6HBs4cJowRbvTfsi"], ["created_at", "2019-04-01 23:51:15.163499"], ["updated_at", "2019-04-01 23:51:15.163499"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$Vpo6qoZWqg35lJt/RPx2ve5QAIop3EZA777tt.D/fwiN0DM4K7xsa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:15.193902"], ["updated_at", "2019-04-01 23:51:15.193902"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$.PYP5MmjIbS5kGz1FGMTw.HCWvmrj3DYvzYWhrMtQHNVRicNob1Oa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:15.198774"], ["updated_at", "2019-04-01 23:51:15.198774"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Qas8iyMSjzFDfsotPrL9s.pdS/w71/zXHEwfCdKzlX8I4Au68bRz6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:15.203043"], ["updated_at", "2019-04-01 23:51:15.203043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:39.524986"], ["updated_at", "2019-04-01 23:51:39.524986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:40.132486"], ["updated_at", "2019-04-01 23:51:40.132486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:40.138498"], ["updated_at", "2019-04-01 23:51:40.138498"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:40.141518"], ["updated_at", "2019-04-01 23:51:40.141518"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-01 23:51:40.147797"], ["updated_at", "2019-04-01 23:51:40.147797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-01 23:51:40.152932"], ["updated_at", "2019-04-01 23:51:40.152932"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-01 23:51:40.156328"], ["updated_at", "2019-04-01 23:51:40.156328"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$B0dguICThQJ6C9.z48ev8eSIztlOyov5wFBr/1Hv/JLa.rFK6U2nK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:40.237127"], ["updated_at", "2019-04-01 23:51:40.237127"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$.k9vJOpsAyVzav6JcD84v.bhFAUeHeRkld9B3itJMGJCQk7/BAyS."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:40.245857"], ["updated_at", "2019-04-01 23:51:40.245857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Y74y2tSvALT1j/Lbnuu/nOJd/9MInSC9h0AOObhK3zdd5S04ypzq2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:40.252503"], ["updated_at", "2019-04-01 23:51:40.252503"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$NIzNc88EJ/RbbpVBH1EnU.CygF/pTHQYCGoTj128xiOmVNwWojJdm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:40.282755"], ["updated_at", "2019-04-01 23:51:40.282755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$LnDMO5IDLgz/yYax.hoOouHZz80y/Xuo91.2ma.aOQvshCGKkCpSi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:40.288930"], ["updated_at", "2019-04-01 23:51:40.288930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$dEoK7m.COaMdz439874/7exxuZkC4E9qK3P5AFgVBNsuPNannWNwm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:40.295154"], ["updated_at", "2019-04-01 23:51:40.295154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$Neb6a/XCRM1El8Y2U66vZOq6ECK47EEBJULmA0Z/2UibUZfF7trL6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:40.350442"], ["updated_at", "2019-04-01 23:51:40.350442"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$0iZVUlnUQgF.8V9njDTyD.nzwz9NlLjP1gAO3iHbSXegX3/eb.CIy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:40.355346"], ["updated_at", "2019-04-01 23:51:40.355346"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$BzM/JSr8bQRbZDfYaqXDlOC4IWnRJykg6FuTaxqqh7qPBcYumew4i"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:40.361656"], ["updated_at", "2019-04-01 23:51:40.361656"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$gRHXA8qAx2w2uYVldx1HHOg3Mf4Pfd2IdpNA.cGgcU/X.9mx769Ya"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:40.393193"], ["updated_at", "2019-04-01 23:51:40.393193"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$nK.cqREli8YzTkeAaOH8IuHEcY09Jrt4j5z8jLKES0p5DQntRPUem"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:40.397581"], ["updated_at", "2019-04-01 23:51:40.397581"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$iADMU..FzetCN.smmpLP8.Smk/Au628fHvyw79Wn7vIfi50o416Qi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:40.404196"], ["updated_at", "2019-04-01 23:51:40.404196"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$S9qLKXN0tJDVJjHD7IorfOGHF3gfNS7iBRoEkJpF3U9lG1kgdAuN2"], ["created_at", "2019-04-01 23:51:40.432263"], ["updated_at", "2019-04-01 23:51:40.432263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$vFiQMQq3OyQ8KkYipOhtvuP9eKvANkvThsLfHqBmk.lr.Yl.5gLxa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-01 23:51:40.468123"], ["updated_at", "2019-04-01 23:51:40.468123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$sItDU6MKDgqBvTkbS01y2.jgUvt9lNrkgVF7wZ5Yw0jDabfp.au5i"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-01 23:51:40.475482"], ["updated_at", "2019-04-01 23:51:40.475482"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$jdlZB6HrO9DePseLLmRHiua8q1.L9W67lLfubRGL5IXRe6CRtprWG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-01 23:51:40.481005"], ["updated_at", "2019-04-01 23:51:40.481005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:40.577211"], ["updated_at", "2019-04-01 23:51:40.577211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:40.581141"], ["updated_at", "2019-04-01 23:51:40.581141"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:40.589377"], ["updated_at", "2019-04-01 23:51:40.589377"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:40.608441"], ["updated_at", "2019-04-01 23:51:40.608441"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-01 23:51:40.615884"], ["updated_at", "2019-04-01 23:51:40.615884"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-01 23:51:40.619137"], ["updated_at", "2019-04-01 23:51:40.619137"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-01 23:51:40.621891"], ["updated_at", "2019-04-01 23:51:40.621891"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.5ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-01 23:51:40.752122"], ["updated_at", "2019-04-01 23:51:40.752122"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "badges"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "level" integer, "description" text, "skill_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_badges_on_skill_id" ON "badges" ("skill_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "branches"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "branches" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camp_badges"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "badge_id" integer, "camp_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_camp_badges_on_badge_id" ON "camp_badges" ("badge_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camp_badges_on_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camp_badges_on_badge_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_camp_badges_on_camp_id" ON "camp_badges" ("camp_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badge_tasks"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "camper_camp_badge_tasks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camper_camp_badge_id" integer, "task_id" integer, "completed" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badge_tasks_on_camper_camp_badge_id" ON "camper_camp_badge_tasks" ("camper_camp_badge_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camper_camp_badge_tasks_on_camper_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camper_camp_badge_tasks_on_camper_camp_badge_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badge_tasks_on_task_id" ON "camper_camp_badge_tasks" ("task_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badges"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "camper_camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camp_badge_id" integer, "camper_id" integer, "completed" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badges_on_camp_badge_id" ON "camper_camp_badges" ("camp_badge_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_camper_camp_badges_on_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_camper_camp_badges_on_camp_badge_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_camper_camp_badges_on_camper_id" ON "camper_camp_badges" ("camper_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "campers"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "campers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "parent_id" integer, "first_name" varchar, "last_name" varchar, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_campers_on_parent_id" ON "campers" ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camps"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "camps" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "program" varchar, "start_date" date, "end_date" date, "active" boolean, "location_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_camps_on_location_id" ON "camps" ("location_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselor_camp_badges"[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "counselor_camp_badges" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "camp_badge_id" integer, "counselor_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX "index_counselor_camp_badges_on_camp_badge_id" ON "counselor_camp_badges" ("camp_badge_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_counselor_camp_badges_on_camp_badge_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_counselor_camp_badges_on_camp_badge_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_counselor_camp_badges_on_counselor_id" ON "counselor_camp_badges" ("counselor_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselors"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "counselors" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX "index_counselors_on_user_id" ON "counselors" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations"[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "branch_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_locations_on_branch_id" ON "locations" ("branch_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "parents"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "parents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "active" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_parents_on_user_id" ON "parents" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "skills"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "skills" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "category" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tasks"[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "badge_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_tasks_on_badge_id" ON "tasks" ("badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password_digest" varchar, "first_name" varchar, "last_name" varchar, "role" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190325042954)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190318171127),
(20190318171146),
(20190318171120),
(20190318171158),
(20190318171031),
(20190318171116),
(20190318171054),
(20190318171110),
(20190318171006),
(20190318171020),
(20190318171050),
(20190318171025),
(20190318171101),
(20190318171152);

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-02 00:12:14.336611"], ["updated_at", "2019-04-02 00:12:14.336611"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.1ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-02 00:12:16.059807"], ["updated_at", "2019-04-02 00:12:16.059807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-02 00:12:16.104183"], ["updated_at", "2019-04-02 00:12:16.104183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-02 00:12:16.108930"], ["updated_at", "2019-04-02 00:12:16.108930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-02 00:12:16.112962"], ["updated_at", "2019-04-02 00:12:16.112962"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-02 00:12:16.132066"], ["updated_at", "2019-04-02 00:12:16.132066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-02 00:12:16.140413"], ["updated_at", "2019-04-02 00:12:16.140413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-02 00:12:16.144546"], ["updated_at", "2019-04-02 00:12:16.144546"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-02 00:12:16.151900"], ["updated_at", "2019-04-02 00:12:16.151900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$b/1/1NyjRbV1lIIp9UP.T.6JSflsVl8cvo3UW1HnyHpur/lco3rpS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-02 00:12:16.301636"], ["updated_at", "2019-04-02 00:12:16.301636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$J/0ubld.A1iwn20rfPqUfe2AZYseD02/af5S.XzY0wzJr0VTh2Vo6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-02 00:12:16.309162"], ["updated_at", "2019-04-02 00:12:16.309162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$w8yACUu2rdxEqIP8RMRU8uKeiwdWO39hm4Qt3.MFCyJMG1dJ17s1K"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-02 00:12:16.316700"], ["updated_at", "2019-04-02 00:12:16.316700"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$8mb.p58XFfYH4vP0CqAzaOHd3lcNLAd32NDus.MUZUi.I9zq.ncnm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-02 00:12:16.337497"], ["updated_at", "2019-04-02 00:12:16.337497"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$BTvbpYUhCVLnykkhFDAc5ullxe5u682731Wm40Gak5BSVNVCFyBXu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-02 00:12:16.342048"], ["updated_at", "2019-04-02 00:12:16.342048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$1R3Z64sVtxWYAANUhnnpYuK6n5BYA.x/x8WjvmbgMgUl5M7GoyG3u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-02 00:12:16.349849"], ["updated_at", "2019-04-02 00:12:16.349849"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$cgNTIb8x2tcx4vRy1hwL5ueDQii0vVKoXNb3OBdEZFJbWupxbc3Le"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-02 00:12:16.400854"], ["updated_at", "2019-04-02 00:12:16.400854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$7pcNMbZv8x9zsdmMmIWpgeQn2zfUnxqmWj.REDMl.oaCg3xdUUAvC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-02 00:12:16.407947"], ["updated_at", "2019-04-02 00:12:16.407947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Ax/I4Ju1rIrgH4hnRorSQeSPehFgcRShv.1FQ6lZ0RbnG1kk/jxEa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-02 00:12:16.414754"], ["updated_at", "2019-04-02 00:12:16.414754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$A8tEZjLU91G4j43C7q5LB.E3oTs7MXvxPdBhiZR/yMA7VihL0k7ZS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-02 00:12:16.465557"], ["updated_at", "2019-04-02 00:12:16.465557"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$lhiABkDcg7ivW0q/3AjerOKDZn57VYYjfNe/ZhryrR7ywohmDd/hW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-02 00:12:16.470502"], ["updated_at", "2019-04-02 00:12:16.470502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$GRQo69MYOMR612oRY11iNe3IO5x4dR.QEvwc27NkqDoyRWepnr9B6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-02 00:12:16.476246"], ["updated_at", "2019-04-02 00:12:16.476246"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "a"], ["password_digest", "$2a$04$scovJTPjUpaw2Ei4Mx1Eru.p7xShd7rrWmv.GxJ5anYS3LBWS4bt2"], ["created_at", "2019-04-02 00:12:16.499959"], ["updated_at", "2019-04-02 00:12:16.499959"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$qMbv2mKF9K6BhK0KoDrDt.ocdrI2S5zKSBjm3eIZpSv706eE/4.76"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-02 00:12:16.545200"], ["updated_at", "2019-04-02 00:12:16.545200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$QvFZ3xS9QSDUCZc.f9nAyetFwQ6TNhZsKRkz3f07qoV9rqhaB0LH2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-02 00:12:16.553150"], ["updated_at", "2019-04-02 00:12:16.553150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$biwnNpkjAWnUMddDxFdPguPcIYsOHV1dnmHsshWyrb7VhH8Y8h8zS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-02 00:12:16.559835"], ["updated_at", "2019-04-02 00:12:16.559835"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-02 00:12:16.624923"], ["updated_at", "2019-04-02 00:12:16.624923"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Olympus"], ["created_at", "2019-04-02 00:12:16.632396"], ["updated_at", "2019-04-02 00:12:16.632396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER(?) LIMIT ?[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "North Boroughs"], ["created_at", "2019-04-02 00:12:16.637958"], ["updated_at", "2019-04-02 00:12:16.637958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 1], ["created_at", "2019-04-02 00:12:16.643851"], ["updated_at", "2019-04-02 00:12:16.643851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Olympus"], ["branch_id", 2], ["created_at", "2019-04-02 00:12:16.650511"], ["updated_at", "2019-04-02 00:12:16.650511"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Avonworth Community Park"], ["branch_id", 3], ["created_at", "2019-04-02 00:12:16.655207"], ["updated_at", "2019-04-02 00:12:16.655207"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "a"], ["created_at", "2019-04-02 00:12:16.699593"], ["updated_at", "2019-04-02 00:12:16.699593"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER(?) LIMIT ?[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (223.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (533.5ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "badges" CASCADE[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE TABLE "badges" ("id" bigserial primary key, "name" character varying, "level" integer, "description" text, "skill_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_badges_on_skill_id" ON "badges"  ("skill_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "branches" CASCADE[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "branches" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "camp_badges" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "camp_badges" ("id" bigserial primary key, "badge_id" bigint, "camp_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_camp_badges_on_badge_id" ON "camp_badges"  ("badge_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_camp_badges_on_camp_id" ON "camp_badges"  ("camp_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badge_tasks" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "camper_camp_badge_tasks" ("id" bigserial primary key, "camper_camp_badge_id" bigint, "task_id" bigint, "completed" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badge_tasks_on_camper_camp_badge_id" ON "camper_camp_badge_tasks"  ("camper_camp_badge_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badge_tasks_on_task_id" ON "camper_camp_badge_tasks"  ("task_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badges" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "camper_camp_badges" ("id" bigserial primary key, "camp_badge_id" bigint, "camper_id" bigint, "completed" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badges_on_camp_badge_id" ON "camper_camp_badges"  ("camp_badge_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badges_on_camper_id" ON "camper_camp_badges"  ("camper_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "campers" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "campers" ("id" bigserial primary key, "parent_id" bigint, "first_name" character varying, "last_name" character varying, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_campers_on_parent_id" ON "campers"  ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camps" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "camps" ("id" bigserial primary key, "name" character varying, "program" character varying, "start_date" date, "end_date" date, "active" boolean, "location_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_camps_on_location_id" ON "camps"  ("location_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselor_camp_badges" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "counselor_camp_badges" ("id" bigserial primary key, "camp_badge_id" bigint, "counselor_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_counselor_camp_badges_on_camp_badge_id" ON "counselor_camp_badges"  ("camp_badge_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_counselor_camp_badges_on_counselor_id" ON "counselor_camp_badges"  ("counselor_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselors" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "counselors" ("id" bigserial primary key, "user_id" bigint, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_counselors_on_user_id" ON "counselors"  ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "locations" ("id" bigserial primary key, "name" character varying, "branch_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_locations_on_branch_id" ON "locations"  ("branch_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "parents" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "parents" ("id" bigserial primary key, "user_id" bigint, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_parents_on_user_id" ON "parents"  ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "skills" CASCADE[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "skills" ("id" bigserial primary key, "name" character varying, "category" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "tasks" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" bigserial primary key, "name" character varying, "description" text, "badge_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_badge_id" ON "tasks"  ("badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "first_name" character varying, "last_name" character varying, "role" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mALTER TABLE "badges" ADD CONSTRAINT "fk_rails_b47583f721"
FOREIGN KEY ("skill_id")
  REFERENCES "skills" ("id")
[0m
  [1m[35m (4.1ms)[0m  [1m[35mALTER TABLE "camp_badges" ADD CONSTRAINT "fk_rails_1561d3748c"
FOREIGN KEY ("badge_id")
  REFERENCES "badges" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "camp_badges" ADD CONSTRAINT "fk_rails_6b58b637bd"
FOREIGN KEY ("camp_id")
  REFERENCES "camps" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "camper_camp_badge_tasks" ADD CONSTRAINT "fk_rails_e94489eb0b"
FOREIGN KEY ("camper_camp_badge_id")
  REFERENCES "camper_camp_badges" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "camper_camp_badge_tasks" ADD CONSTRAINT "fk_rails_746a025bbb"
FOREIGN KEY ("task_id")
  REFERENCES "tasks" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "camper_camp_badges" ADD CONSTRAINT "fk_rails_add6a2f59e"
FOREIGN KEY ("camp_badge_id")
  REFERENCES "camp_badges" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "camper_camp_badges" ADD CONSTRAINT "fk_rails_70bdc09457"
FOREIGN KEY ("camper_id")
  REFERENCES "campers" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "campers" ADD CONSTRAINT "fk_rails_7b54a3d909"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "camps" ADD CONSTRAINT "fk_rails_49325a0599"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "counselor_camp_badges" ADD CONSTRAINT "fk_rails_5eeeb5a748"
FOREIGN KEY ("camp_badge_id")
  REFERENCES "camp_badges" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "counselor_camp_badges" ADD CONSTRAINT "fk_rails_2866b79dd0"
FOREIGN KEY ("counselor_id")
  REFERENCES "counselors" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "counselors" ADD CONSTRAINT "fk_rails_2b40193edf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "locations" ADD CONSTRAINT "fk_rails_08771c5210"
FOREIGN KEY ("branch_id")
  REFERENCES "branches" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "parents" ADD CONSTRAINT "fk_rails_27c1d070f3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_f95e53d445"
FOREIGN KEY ("badge_id")
  REFERENCES "badges" ("id")
[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190325042954)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190318171127),
(20190318171146),
(20190318171158),
(20190318171031),
(20190318171054),
(20190318171110),
(20190318171006),
(20190318171109),
(20190318171020),
(20190318171007),
(20190318171050),
(20190318171025),
(20190318171101),
(20190318171152);

[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-08 21:49:35.923632"], ["updated_at", "2019-04-08 21:49:35.923632"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (7.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (217.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "myapp_test"[0m
  [1m[35m (1323.5ms)[0m  [1m[35mCREATE DATABASE "myapp_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "badges" CASCADE[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE TABLE "badges" ("id" bigserial primary key, "name" character varying, "level" integer, "description" text, "skill_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_badges_on_skill_id" ON "badges"  ("skill_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "branches" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "branches" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "camp_badges" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "camp_badges" ("id" bigserial primary key, "badge_id" bigint, "camp_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_camp_badges_on_badge_id" ON "camp_badges"  ("badge_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_camp_badges_on_camp_id" ON "camp_badges"  ("camp_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badge_tasks" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "camper_camp_badge_tasks" ("id" bigserial primary key, "camper_camp_badge_id" bigint, "task_id" bigint, "completed" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badge_tasks_on_camper_camp_badge_id" ON "camper_camp_badge_tasks"  ("camper_camp_badge_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badge_tasks_on_task_id" ON "camper_camp_badge_tasks"  ("task_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camper_camp_badges" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "camper_camp_badges" ("id" bigserial primary key, "camp_badge_id" bigint, "camper_id" bigint, "completed" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badges_on_camp_badge_id" ON "camper_camp_badges"  ("camp_badge_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_camper_camp_badges_on_camper_id" ON "camper_camp_badges"  ("camper_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "campers" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "campers" ("id" bigserial primary key, "parent_id" bigint, "first_name" character varying, "last_name" character varying, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_campers_on_parent_id" ON "campers"  ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "camps" CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "camps" ("id" bigserial primary key, "name" character varying, "program" character varying, "start_date" date, "end_date" date, "active" boolean, "location_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_camps_on_location_id" ON "camps"  ("location_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselor_camp_badges" CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "counselor_camp_badges" ("id" bigserial primary key, "camp_badge_id" bigint, "counselor_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_counselor_camp_badges_on_camp_badge_id" ON "counselor_camp_badges"  ("camp_badge_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_counselor_camp_badges_on_counselor_id" ON "counselor_camp_badges"  ("counselor_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "counselors" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "counselors" ("id" bigserial primary key, "user_id" bigint, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_counselors_on_user_id" ON "counselors"  ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "locations" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "locations" ("id" bigserial primary key, "name" character varying, "branch_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_locations_on_branch_id" ON "locations"  ("branch_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "parents" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "parents" ("id" bigserial primary key, "user_id" bigint, "active" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_parents_on_user_id" ON "parents"  ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "skills" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "skills" ("id" bigserial primary key, "name" character varying, "category" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "tasks" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" bigserial primary key, "name" character varying, "description" text, "badge_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_badge_id" ON "tasks"  ("badge_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "first_name" character varying, "last_name" character varying, "role" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (7.9ms)[0m  [1m[35mALTER TABLE "badges" ADD CONSTRAINT "fk_rails_b47583f721"
FOREIGN KEY ("skill_id")
  REFERENCES "skills" ("id")
[0m
  [1m[35m (5.0ms)[0m  [1m[35mALTER TABLE "camp_badges" ADD CONSTRAINT "fk_rails_1561d3748c"
FOREIGN KEY ("badge_id")
  REFERENCES "badges" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "camp_badges" ADD CONSTRAINT "fk_rails_6b58b637bd"
FOREIGN KEY ("camp_id")
  REFERENCES "camps" ("id")
[0m
  [1m[35m (8.7ms)[0m  [1m[35mALTER TABLE "camper_camp_badge_tasks" ADD CONSTRAINT "fk_rails_e94489eb0b"
FOREIGN KEY ("camper_camp_badge_id")
  REFERENCES "camper_camp_badges" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "camper_camp_badge_tasks" ADD CONSTRAINT "fk_rails_746a025bbb"
FOREIGN KEY ("task_id")
  REFERENCES "tasks" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "camper_camp_badges" ADD CONSTRAINT "fk_rails_add6a2f59e"
FOREIGN KEY ("camp_badge_id")
  REFERENCES "camp_badges" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "camper_camp_badges" ADD CONSTRAINT "fk_rails_70bdc09457"
FOREIGN KEY ("camper_id")
  REFERENCES "campers" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "campers" ADD CONSTRAINT "fk_rails_7b54a3d909"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "camps" ADD CONSTRAINT "fk_rails_49325a0599"
FOREIGN KEY ("location_id")
  REFERENCES "locations" ("id")
[0m
  [1m[35m (5.3ms)[0m  [1m[35mALTER TABLE "counselor_camp_badges" ADD CONSTRAINT "fk_rails_5eeeb5a748"
FOREIGN KEY ("camp_badge_id")
  REFERENCES "camp_badges" ("id")
[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "counselor_camp_badges" ADD CONSTRAINT "fk_rails_2866b79dd0"
FOREIGN KEY ("counselor_id")
  REFERENCES "counselors" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "counselors" ADD CONSTRAINT "fk_rails_2b40193edf"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "locations" ADD CONSTRAINT "fk_rails_08771c5210"
FOREIGN KEY ("branch_id")
  REFERENCES "branches" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "parents" ADD CONSTRAINT "fk_rails_27c1d070f3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_f95e53d445"
FOREIGN KEY ("badge_id")
  REFERENCES "badges" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190410032015)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190318171127),
(20190318171146),
(20190318171158),
(20190318171031),
(20190318171054),
(20190318171110),
(20190325042954),
(20190318171006),
(20190318171109),
(20190318171020),
(20190318171007),
(20190318171050),
(20190318171025),
(20190318171101),
(20190318171152);

[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-04-13 08:11:31.240233"], ["updated_at", "2019-04-13 08:11:31.240233"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$TN2zFGK3Cx4wICd9w/Kq.uswZi9laEta2FEz.Xq/Q8xiJ/Ym0cf6u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-13 08:11:32.857830"], ["updated_at", "2019-04-13 08:11:32.857830"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$AvpNJ5XiUO7Nik4dO8lveenv6jCkw21hv8lpiwou9OQ0DGEWVC2Y."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-13 08:11:32.868410"], ["updated_at", "2019-04-13 08:11:32.868410"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Km7VtYrSJWNxM1hMosJjE.S7Yr4bJbAgVT37bQhxeQZ52VvJmEqaq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-13 08:11:32.875216"], ["updated_at", "2019-04-13 08:11:32.875216"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (2.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$Etk28qz634pLyj2E3UQ5HepXeRRtoYbz1msUoz9PICGaarmJGWW9m"], ["created_at", "2019-04-13 08:11:32.995390"], ["updated_at", "2019-04-13 08:11:32.995390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$8YwcyZcgofH/ObCdIuTsTO.KDcYbEK4vxPI3ElfPuaTfeZ5RslWXW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-13 08:11:33.027600"], ["updated_at", "2019-04-13 08:11:33.027600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$JUpEL3uuu3rU2yRW/8benOTeIr2X3OhuX/mvuOGN1wPJNUxoCdRBi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-13 08:11:33.033625"], ["updated_at", "2019-04-13 08:11:33.033625"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$YEwsYZBx3lWFLxo9kWTw5OkkpgvwGtQBLwGKI77Yh.o6/tSx6n3wm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-13 08:11:33.041222"], ["updated_at", "2019-04-13 08:11:33.041222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$mclOk5ji1LFEEC69Uc1qX.2gnPKwzQlGWYw5CEUckvyGHUHKRew8a"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-13 08:11:33.146080"], ["updated_at", "2019-04-13 08:11:33.146080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$rf6XfNn7vnn.3yZwOfbxhO69eQHbXAay6aK0A.YZaWIuswpq3V7Au"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-13 08:11:33.151213"], ["updated_at", "2019-04-13 08:11:33.151213"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$C/q/RPbe.5OPAt7loc8Mz.BaKF3rEZ00yzx85k.EuhOuEgwm7zWE2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-13 08:11:33.159332"], ["updated_at", "2019-04-13 08:11:33.159332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$jIZ42YFsI1aUYvjWn8W/ZetnCaqrCiHpzRuFXEE/BQT6z0ppVdkku"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-13 08:11:33.172599"], ["updated_at", "2019-04-13 08:11:33.172599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$1v/nYymkoqY7tNuOqkhVFuiVVVj4ZWIjUOh4UyyaOlilwWsbj/uOu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-13 08:11:33.177997"], ["updated_at", "2019-04-13 08:11:33.177997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$9goKtGh0b3gcwTZSJNgoNuT5wGwKkCErk9m6odRe5Qa0pOhRxBo22"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-13 08:11:33.183228"], ["updated_at", "2019-04-13 08:11:33.183228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$TpBV6k1t6.a9DzyDwpVo..GjIwOdqQY2WoTxm1rA5qyRCBwESMJ.a"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-13 08:11:33.200619"], ["updated_at", "2019-04-13 08:11:33.200619"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9p8OqrMsnjWXCbyfHfkW8.m4mBWrAobf/IzVTWnuJVe1sesVgV2Ia"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-13 08:11:33.210728"], ["updated_at", "2019-04-13 08:11:33.210728"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$.kW4fXF3MWcj0Uu4KJd4PuX9/.1V9/Xo1c12f6qOPKxXZ..jV9Fcm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-13 08:11:33.219011"], ["updated_at", "2019-04-13 08:11:33.219011"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 15]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-13 08:11:33.252603"], ["updated_at", "2019-04-13 08:11:33.252603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-13 08:11:33.258305"], ["updated_at", "2019-04-13 08:11:33.258305"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-13 08:11:33.264176"], ["updated_at", "2019-04-13 08:11:33.264176"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-13 08:11:33.289708"], ["updated_at", "2019-04-13 08:11:33.289708"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-13 08:11:33.298339"], ["updated_at", "2019-04-13 08:11:33.298339"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-13 08:11:33.304439"], ["updated_at", "2019-04-13 08:11:33.304439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-13 08:11:33.309202"], ["updated_at", "2019-04-13 08:11:33.309202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.3ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-13 08:11:33.482304"], ["updated_at", "2019-04-13 08:11:33.482304"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-13 08:11:33.535561"], ["updated_at", "2019-04-13 08:11:33.535561"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-13 08:11:33.577539"], ["updated_at", "2019-04-13 08:11:33.577539"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-13 08:11:33.584789"], ["updated_at", "2019-04-13 08:11:33.584789"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-13 08:11:33.589091"], ["updated_at", "2019-04-13 08:11:33.589091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 8], ["created_at", "2019-04-13 08:11:33.593525"], ["updated_at", "2019-04-13 08:11:33.593525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 9], ["created_at", "2019-04-13 08:11:33.597693"], ["updated_at", "2019-04-13 08:11:33.597693"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 10], ["created_at", "2019-04-13 08:11:33.603953"], ["updated_at", "2019-04-13 08:11:33.603953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (6.9ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 01:56:47.405087"], ["updated_at", "2019-04-14 01:56:47.405087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 01:56:47.966787"], ["updated_at", "2019-04-14 01:56:47.966787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 01:56:47.971127"], ["updated_at", "2019-04-14 01:56:47.971127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 01:56:47.975099"], ["updated_at", "2019-04-14 01:56:47.975099"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.4ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (15.8ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 01:56:48.011395"], ["updated_at", "2019-04-14 01:56:48.011395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 01:56:48.015472"], ["updated_at", "2019-04-14 01:56:48.015472"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 01:56:48.023626"], ["updated_at", "2019-04-14 01:56:48.023626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 15]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 16]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (7.6ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 01:56:48.160627"], ["updated_at", "2019-04-14 01:56:48.160627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 01:56:48.206318"], ["updated_at", "2019-04-14 01:56:48.206318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 01:56:48.216323"], ["updated_at", "2019-04-14 01:56:48.216323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 01:56:48.220063"], ["updated_at", "2019-04-14 01:56:48.220063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 01:56:48.223366"], ["updated_at", "2019-04-14 01:56:48.223366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 18], ["created_at", "2019-04-14 01:56:48.228528"], ["updated_at", "2019-04-14 01:56:48.228528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 19], ["created_at", "2019-04-14 01:56:48.232893"], ["updated_at", "2019-04-14 01:56:48.232893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 20], ["created_at", "2019-04-14 01:56:48.236423"], ["updated_at", "2019-04-14 01:56:48.236423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (3.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 18]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 19]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 20]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$T5tw3pREGTM9oOjJ2AaqseaW1OjP2.5GqKuQpkatkkdGIDEpTMUS."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 01:56:48.328926"], ["updated_at", "2019-04-14 01:56:48.328926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$AEQrKz2n/FyiJJ16gV8WUu9Ah0OqrBwHk0u24X3dsexXzuVUwQE.i"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 01:56:48.334094"], ["updated_at", "2019-04-14 01:56:48.334094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$.7aJo0SAoRba57MHyv1bx.3W3FdMDNJBwrqQRt.M8/B7k/.Uu5/oK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 01:56:48.340146"], ["updated_at", "2019-04-14 01:56:48.340146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 17]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 19]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$sejXxSX8YhqQd0UOBDPgwuEWq5K68ZoTACoJYUnGI7XvLVLCCP4h."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 01:56:48.394078"], ["updated_at", "2019-04-14 01:56:48.394078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Vmo86MsDbzk4POq4MPgDKeiseBRzXe6bxQoqF2ThO4uZtgJnBWDx."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 01:56:48.400127"], ["updated_at", "2019-04-14 01:56:48.400127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$aSJxo4QnscdAWgya.QuU7eIGtHBYZN3zyqnqXHpy9tOyOGPZvEBP2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 01:56:48.406348"], ["updated_at", "2019-04-14 01:56:48.406348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 20]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$iJq7h.nwcz86ujOreyQZ6u6liqSOSBI3K6DvXVzbikRKQVdK/Hos2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 01:56:48.435363"], ["updated_at", "2019-04-14 01:56:48.435363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$sofaJlmG5nDgWJ/O4KNzsuUGiFAGT/y7Bdb66t2/DDPSOtlvWJfCW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 01:56:48.441000"], ["updated_at", "2019-04-14 01:56:48.441000"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Wj5W40iXf45yqwFgTUrRv.j/t/7jfGUng6Bt5vaWpWafVkGsWyDJK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 01:56:48.446720"], ["updated_at", "2019-04-14 01:56:48.446720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 23]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 24]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$lB/GLpCjl0aK/pGPC9jgYuR.TQxk3gHjr8pj5BykG.Q0f3T.Z5xXq"], ["created_at", "2019-04-14 01:56:48.475419"], ["updated_at", "2019-04-14 01:56:48.475419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$FnxW8.uZevz8Xn8jvrTVkeFGq7i9yahbrRU4mHc3LXv9rez3kpXYu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 01:56:48.487390"], ["updated_at", "2019-04-14 01:56:48.487390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$dhLpU/TfjQLayEzYUZB19ee4MIt8fYSTCcM9eNzZMKE3row3QbqzW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 01:56:48.493730"], ["updated_at", "2019-04-14 01:56:48.493730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$jgqsPQLacmrcxDlkUWJQu..qUx9bJ4NkE6LpyUUfkUcrqjSgeZNQe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 01:56:48.498781"], ["updated_at", "2019-04-14 01:56:48.498781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 27]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 28]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 29]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$AarjIgb6tT8qm.mOBBQI6eRsJ9SVRcOA/pJYs7Dko02q5vSxBwfw."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 01:56:48.539220"], ["updated_at", "2019-04-14 01:56:48.539220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$F1wWsbLwuknrK6CicswU1.G8VBVWEyQYyjTTrm42pcq29o6wtEi/."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 01:56:48.544450"], ["updated_at", "2019-04-14 01:56:48.544450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$QVU3YiYs5uUlnUMdlva.Eup9cQQ0ukj2Njqm1YPckPRpKYDOClHrK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 01:56:48.549804"], ["updated_at", "2019-04-14 01:56:48.549804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 30], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 30]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 31]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 32]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$0qQSuXOruc3zUNS/X54UTeDh.2JuRXaoIK2wS3X4pFtuDzNqVoBxi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 02:25:01.668237"], ["updated_at", "2019-04-14 02:25:01.668237"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$hdHZvGwEhR2lxuU8z1mzbeSwWIQCR2klGHHC3u69IRC.jTlQ86kvm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 02:25:01.674222"], ["updated_at", "2019-04-14 02:25:01.674222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$FNjU22t3cK.fW9Gm2iN1rO6yikvucYTU5lxO36BROdjNVWksYA4T2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 02:25:01.679070"], ["updated_at", "2019-04-14 02:25:01.679070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 33], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 33]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 34]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 35]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$/gvewYy5OkBBx4Ev6sZ7Guv66ZXIfXf8D2FzMj02Qsh3zbe8tYGNi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 02:25:02.247145"], ["updated_at", "2019-04-14 02:25:02.247145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$WzQO3R74qiirq/WtnWMU1O8TM.6ZSblL3wuNLJJWyNhyhZzo7zJ2C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 02:25:02.252048"], ["updated_at", "2019-04-14 02:25:02.252048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$q0ydCjMpDRb0vAzlGaff9OUiRKswolXb9nzojw6ba2mXwAPTKxK1C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 02:25:02.256784"], ["updated_at", "2019-04-14 02:25:02.256784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 36]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 37]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 38]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$4RxkgiGf19aAAlAq61FOte6bMuYZlfoxhSaDdxKuKxJeKFc4S/BEe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 02:25:02.268653"], ["updated_at", "2019-04-14 02:25:02.268653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$fjKDxjfkXNwSs2yS98Xg9e0C1FzxBZylWlNWkqs5Lyzp45JnA7FM6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 02:25:02.274806"], ["updated_at", "2019-04-14 02:25:02.274806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$xjPnY0w4fI2HHpenpMoYiuLjF4kJQAjuX24hmqeWTUiJjHj4vY/Pu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 02:25:02.280598"], ["updated_at", "2019-04-14 02:25:02.280598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 39]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 40]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 41]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$QFgk0ybH.mRbUAyTti0.QeZ9fco7bGdKy8VC4iJI7/zvY50dj65um"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 02:25:02.303844"], ["updated_at", "2019-04-14 02:25:02.303844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9dd/igTKHYEUJyTKXf0anuWcEWat5MK36zBe08ZLaYTrZh.sFe31C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 02:25:02.311374"], ["updated_at", "2019-04-14 02:25:02.311374"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$vHUlmrBOPKc09hExH8mXW.tC5PAv4gCNi1pWghOjbHc95NFd/xnnu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 02:25:02.316495"], ["updated_at", "2019-04-14 02:25:02.316495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 42]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 43]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 44]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$q0nQrbT4MgrwS/1P9AXz7uRM89iQr4mcb9/E.5yAmXLnyY4rRUSK."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 02:25:02.333091"], ["updated_at", "2019-04-14 02:25:02.333091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ojQ192AAJjDkQ1sjQSmny.vm2IzX4y8uTcIDfSnFDygCeRBfbsM3S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 02:25:02.337723"], ["updated_at", "2019-04-14 02:25:02.337723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$hrKLLw9lkl1QW9RKwNyvHurmtmS8HgQW/JzrwNsrP6GzFk28aeQnW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 02:25:02.342831"], ["updated_at", "2019-04-14 02:25:02.342831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 45]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 46]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 47]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$3Ao/o9eYncfqvmNbCLqPrexAMoKYCDuXdnqMIgt0BvSIxKLk80C/q"], ["created_at", "2019-04-14 02:25:02.373615"], ["updated_at", "2019-04-14 02:25:02.373615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (7.8ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 02:25:02.569206"], ["updated_at", "2019-04-14 02:25:02.569206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 02:25:02.638382"], ["updated_at", "2019-04-14 02:25:02.638382"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 02:25:02.642294"], ["updated_at", "2019-04-14 02:25:02.642294"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 02:25:02.645528"], ["updated_at", "2019-04-14 02:25:02.645528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (6.6ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 22]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 23]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 02:25:02.667300"], ["updated_at", "2019-04-14 02:25:02.667300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 02:25:02.674884"], ["updated_at", "2019-04-14 02:25:02.674884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 02:25:02.678605"], ["updated_at", "2019-04-14 02:25:02.678605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 02:25:02.682602"], ["updated_at", "2019-04-14 02:25:02.682602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 25]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 26]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 27]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 02:25:02.770593"], ["updated_at", "2019-04-14 02:25:02.770593"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 02:25:02.788066"], ["updated_at", "2019-04-14 02:25:02.788066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 02:25:02.792546"], ["updated_at", "2019-04-14 02:25:02.792546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 02:25:02.796332"], ["updated_at", "2019-04-14 02:25:02.796332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 28], ["created_at", "2019-04-14 02:25:02.799904"], ["updated_at", "2019-04-14 02:25:02.799904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 29], ["created_at", "2019-04-14 02:25:02.803416"], ["updated_at", "2019-04-14 02:25:02.803416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 30], ["created_at", "2019-04-14 02:25:02.807040"], ["updated_at", "2019-04-14 02:25:02.807040"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (1.9ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 28]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 29]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 30]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (7.5ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:10:08.352494"], ["updated_at", "2019-04-14 18:10:08.352494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:10:08.868189"], ["updated_at", "2019-04-14 18:10:08.868189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:10:08.871683"], ["updated_at", "2019-04-14 18:10:08.871683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:10:08.874933"], ["updated_at", "2019-04-14 18:10:08.874933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (9.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 32]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 33]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 34]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:10:08.916195"], ["updated_at", "2019-04-14 18:10:08.916195"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:10:08.920755"], ["updated_at", "2019-04-14 18:10:08.920755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:10:08.923969"], ["updated_at", "2019-04-14 18:10:08.923969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.3ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 35]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 36]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 37]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$baNMkVCMDwsLY5yZpgA8X.o./MfamFfJvVitjLMxhPfAh9UgARUaS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:08.973734"], ["updated_at", "2019-04-14 18:10:08.973734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$wNkD5MopTJQOZ9Ts08G6zOHrNN.K8UBGtZh3ligVgZ8AB/Kf8FrN6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:08.980903"], ["updated_at", "2019-04-14 18:10:08.980903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$cZxJh2DGzYGryZSXb9jGX.eBVPXXacYJnCcfml3P3trQLGthtwV.6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:08.986777"], ["updated_at", "2019-04-14 18:10:08.986777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$AULDqi7oFSeU7uHADIBtNOECz15ysewdaxlvT.PFg7XmwZMYA3PC."], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:08.992522"], ["updated_at", "2019-04-14 18:10:08.992522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Chj7B/tcl7AsBdAr7sgMd.j9XXnpDlTXWYNAPlNVgCU4AiEOJ589m"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:08.999580"], ["updated_at", "2019-04-14 18:10:08.999580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$zddfVeBG.6zZTAcW1QxKneJpRD.aKSkrdWecVRgWKgvYJNsSA0m8a"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.009187"], ["updated_at", "2019-04-14 18:10:09.009187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$7wEg2V.JR7v/kFQ8r6YtKuN8L8yUzjtopACMldF9BgpiWvHzjNGD6"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.013983"], ["updated_at", "2019-04-14 18:10:09.013983"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (9.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 49]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 50]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 51]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 52]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 53]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 54]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$8aI1iA5PbFlRydwYYNM8rOw2nWOV0oAIHCWT/PPOiZHEW83tBMnoC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:09.059968"], ["updated_at", "2019-04-14 18:10:09.059968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$IBvalDNNbAiBwjY5Qv5izucBNr3acLAddy5kH0ilx/pj5WmCHJyDm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:09.064862"], ["updated_at", "2019-04-14 18:10:09.064862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$MexdFNt1M9fgcJbVRykK9.BYn/.np9kQS77240F0hNdSKcCJCBfW6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.070579"], ["updated_at", "2019-04-14 18:10:09.070579"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$FnpFR5xL3TbNjVPaTids6uhn1QP2RRujf7MoZLx2vydoDxIRorw8O"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.076081"], ["updated_at", "2019-04-14 18:10:09.076081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$LLr6JoGeoY31qbWk4P14nODmthzxApDeRcO6EHAjm/OxWb4Kkt7dW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.083828"], ["updated_at", "2019-04-14 18:10:09.083828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$hWZgUSOfFaTKqQ9OKmpJy.0Qel7xbVcI5ESo7eufCBMIEZ7LiioZy"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.089137"], ["updated_at", "2019-04-14 18:10:09.089137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$I/TlfaajKEYqw2rWQ2YLJ.ULxLtEnF4gNmyr.NfWZ02Srdc29TngK"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.095530"], ["updated_at", "2019-04-14 18:10:09.095530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 56]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 57]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 58]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 59]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 60]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 61]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$qac7AaPmOSUJksGDTV8JUO8.KGRPqY9YYZHordGV0CvdKCikTQvOu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:09.116638"], ["updated_at", "2019-04-14 18:10:09.116638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$fymlsR2l9BxC4tnNROsZV.6kCbekGuG61Kp/rjMJEq6uG7bCz0AXi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:09.121108"], ["updated_at", "2019-04-14 18:10:09.121108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$FvNVRtQx8Fmm5iI67YNDv.bKPb/a4uLE4Z55FzX5c6C8EK7A.ZeB2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.126100"], ["updated_at", "2019-04-14 18:10:09.126100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$OI7KhMvA2Box8alC7gKQg.paX37CBc8t7bXLy3t1sWE9zhXewW4SO"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.130786"], ["updated_at", "2019-04-14 18:10:09.130786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$ZKHis1zrUaBIVAicIGCvsu0Y9iQg9UuZWqHxe2QCSF8WQPA8Jkv5m"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.135833"], ["updated_at", "2019-04-14 18:10:09.135833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$MIQ.qstjHsO2VHoiJszi2uogh.a8ya/5ehkCinSdSCBriA27z5r7O"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.142438"], ["updated_at", "2019-04-14 18:10:09.142438"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$w4oeNsnhIOIT8j9J94tzGOLrJEdeMGdpFGA1T0mljq9XaxEfMS60K"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.149908"], ["updated_at", "2019-04-14 18:10:09.149908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 63]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 64]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 65]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 66]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 67]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 68]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$0yhiRaJlInyNKzQNWqF79uV1jKiZySEnvRhAln0tTJwhLFN5pXYlC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:09.174484"], ["updated_at", "2019-04-14 18:10:09.174484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$AlU1/EujnyrFXqeq6HemiOh9uETNGYP512nrDtXbO.DIs14gUUGaS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:09.179868"], ["updated_at", "2019-04-14 18:10:09.179868"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$mGBsCd0E2UzSYnDIEUmaseDhKPI.i32GZJREVRqcU1JOUoTxRdjZi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.187034"], ["updated_at", "2019-04-14 18:10:09.187034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$AmW8PrNoNyxGwROLShTPRuE3m6hdo0EWd1UMGLBH8npwZDhGbi7ce"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.191786"], ["updated_at", "2019-04-14 18:10:09.191786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$JVumYMdMN5AQPqmnIErmLugqpv9s2M71J7KB6FKhQM2wCjfOWtrMO"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.196620"], ["updated_at", "2019-04-14 18:10:09.196620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$DI5gKyb2srwoT1uEV0uUduOdJPmUNEVSe/0if6AGNYbokzs5wdWvy"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.201778"], ["updated_at", "2019-04-14 18:10:09.201778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$I0CpdZE0cS98fgjT4z5/ue84omiB85jx6H9dWBzEW3dpPFApE6RFG"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.208219"], ["updated_at", "2019-04-14 18:10:09.208219"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 70]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 71]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 72]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 73]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 74]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 75]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$WUh8m3skNT1cy25JqSc5ruVRdoNOgd5x6E.zFP6LW/jxlL9OqL84y"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:09.223837"], ["updated_at", "2019-04-14 18:10:09.223837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$L2ebrnEcei//OBHS7CG64eWWwR1tWEwRt4.d6nNRDwUjzwytZ6DuW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:09.229980"], ["updated_at", "2019-04-14 18:10:09.229980"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$qjYQChwkaWQRkLCAZ0dPDus5T8V9Ahuadsco2My0HbKntp.IudnUm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.235584"], ["updated_at", "2019-04-14 18:10:09.235584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$/tAJ14vu.aW3WC0GT4.oxup73NwLQKdMfM758TYtQ2go2XZM/B79."], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.240153"], ["updated_at", "2019-04-14 18:10:09.240153"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$gsNcxcMR0jBACtJ4mvyAN.lHIwET.fRVp0w.LWs99g.DTvRH2goEm"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.245406"], ["updated_at", "2019-04-14 18:10:09.245406"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$2J0BTbueknXg1T22mWXjtOQc2.wHuOV5Tlp88t/qUddsG5jzTMYD."], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.251624"], ["updated_at", "2019-04-14 18:10:09.251624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$R63Ja34qF9iVGufY9zBtguuT.Mg.IZv2GURQOimqb1iUO0G5Oa5hK"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.257863"], ["updated_at", "2019-04-14 18:10:09.257863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 77], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 77]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 78]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 79]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 80]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 81]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 82]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$w53EbM5kGP/nYOCph2Z4UOoTaA4MnAx0E5uL6bqoWNgUc2kinCo9m"], ["created_at", "2019-04-14 18:10:09.332039"], ["updated_at", "2019-04-14 18:10:09.332039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:10:09.414224"], ["updated_at", "2019-04-14 18:10:09.414224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:10:09.417614"], ["updated_at", "2019-04-14 18:10:09.417614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:10:09.422385"], ["updated_at", "2019-04-14 18:10:09.422385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 38], ["created_at", "2019-04-14 18:10:09.426051"], ["updated_at", "2019-04-14 18:10:09.426051"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 39], ["created_at", "2019-04-14 18:10:09.429973"], ["updated_at", "2019-04-14 18:10:09.429973"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 40], ["created_at", "2019-04-14 18:10:09.434967"], ["updated_at", "2019-04-14 18:10:09.434967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (6.5ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 15]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 38]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 39]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 40]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:10:09.457079"], ["updated_at", "2019-04-14 18:10:09.457079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (7.1ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:10:09.601654"], ["updated_at", "2019-04-14 18:10:09.601654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$sfhtsNMExPI1nnTltZxEHesSKm6c12yeAVpzFWeoj6TAgFWNV8IjO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:10:09.628752"], ["updated_at", "2019-04-14 18:10:09.628752"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$E9VR0PGzAPdrZ.wbWni/3.jcba8cCjcPEiD5Pk.UiOHQ8t9AUESCS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:10:09.638922"], ["updated_at", "2019-04-14 18:10:09.638922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$iZAmu2HV5ph0bcoCpig5puznFe..q.VG0iZrSJFM161YRglfZDPP6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.644358"], ["updated_at", "2019-04-14 18:10:09.644358"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$0PEGbg0drHt0NLwjGo236Oc/KBr.xpkXNLnBU6P9oQZ/IjtURPI12"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.651716"], ["updated_at", "2019-04-14 18:10:09.651716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$IUFukbHRaiOtu2XzaPWFx.Y174a6fL2vrlHF1xYdtPM6qmJbEwD.m"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.656620"], ["updated_at", "2019-04-14 18:10:09.656620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WFcSJnE4ZshC12Wzs892aOLBSsYAyg2Od8qVExjAbnAAYUZyLEzdK"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.661472"], ["updated_at", "2019-04-14 18:10:09.661472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$m665P1Lk060U2TcnnTL8ruH2n98rSXfP.9U4/OxubtCAbnJNje0Ai"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:10:09.667064"], ["updated_at", "2019-04-14 18:10:09.667064"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 88], ["active", "t"], ["created_at", "2019-04-14 18:10:09.670394"], ["updated_at", "2019-04-14 18:10:09.670394"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 89], ["active", "t"], ["created_at", "2019-04-14 18:10:09.675234"], ["updated_at", "2019-04-14 18:10:09.675234"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 90], ["active", "t"], ["created_at", "2019-04-14 18:10:09.677864"], ["updated_at", "2019-04-14 18:10:09.677864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 91], ["active", "f"], ["created_at", "2019-04-14 18:10:09.680488"], ["updated_at", "2019-04-14 18:10:09.680488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (2.8ms)[0m  [1m[34mSELECT "parents".* FROM "parents" WHERE "parents"."active" = $1 ORDER BY user.last_name, user.first_name[0m  [["active", "t"]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:11:23.016985"], ["updated_at", "2019-04-14 18:11:23.016985"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:11:23.047626"], ["updated_at", "2019-04-14 18:11:23.047626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:11:23.051299"], ["updated_at", "2019-04-14 18:11:23.051299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:11:23.055126"], ["updated_at", "2019-04-14 18:11:23.055126"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 41], ["created_at", "2019-04-14 18:11:23.060065"], ["updated_at", "2019-04-14 18:11:23.060065"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 42], ["created_at", "2019-04-14 18:11:23.066750"], ["updated_at", "2019-04-14 18:11:23.066750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 43], ["created_at", "2019-04-14 18:11:23.070888"], ["updated_at", "2019-04-14 18:11:23.070888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 18]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 19]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 20]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 41]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 42]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 43]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:11:23.122533"], ["updated_at", "2019-04-14 18:11:23.122533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:11:23.207229"], ["updated_at", "2019-04-14 18:11:23.207229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:11:23.210986"], ["updated_at", "2019-04-14 18:11:23.210986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:11:23.215174"], ["updated_at", "2019-04-14 18:11:23.215174"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.3ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 44]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 45]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 46]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:11:23.233046"], ["updated_at", "2019-04-14 18:11:23.233046"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:11:23.236837"], ["updated_at", "2019-04-14 18:11:23.236837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:11:23.240056"], ["updated_at", "2019-04-14 18:11:23.240056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 47]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 48]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 49]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:11:23.259743"], ["updated_at", "2019-04-14 18:11:23.259743"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$YmJaNO9f0HW8.NF5vMQS9epi5qDLPJwh2ujs0cUMSjjiC9s8LuAMq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.341250"], ["updated_at", "2019-04-14 18:11:23.341250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$DrEhPFO2nSWGpbrUvWZW6ep5uAOiX0dMFx8qqL8bLx8b4/.p6VT4K"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.347012"], ["updated_at", "2019-04-14 18:11:23.347012"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$vMWRGC.v/qA/RcFytxuuze7kWhyHGPGa1CvdWirxnPMVz73koLQC."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.353910"], ["updated_at", "2019-04-14 18:11:23.353910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$UfHatHNKM7Yjejh6YTzFEe/sIqBoBJ4WJQ9cWrLTjUYwiyf/s9XGS"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.358631"], ["updated_at", "2019-04-14 18:11:23.358631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$WNemEYMbqCyqSRM6/jS6ve9lxNzMi30JBMzpxytMhhXOKY1l9PgBC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.363555"], ["updated_at", "2019-04-14 18:11:23.363555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$mfkrevxQhTt4mPPDAowf4.BPDFWF1JEz4Auz.Ni3.ejxvJCFkZze."], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.368338"], ["updated_at", "2019-04-14 18:11:23.368338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$udYa3YrJi6P5lP62IiPDjebCOgaMXPR85j.Ln9ocl3TEvi6k7Ga8i"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.373134"], ["updated_at", "2019-04-14 18:11:23.373134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (9.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 92]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 93]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 94]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 95]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 96]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 97]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$Gb24weCzBqmByE6iDHfjke4ZBvu5/e7aAv4tTEjhtja7H880w2W/q"], ["created_at", "2019-04-14 18:11:23.407653"], ["updated_at", "2019-04-14 18:11:23.407653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$QQGOZXpa5YOmz3n7sf0ZVutG4/EmE1tIdY7v62Tc1AFJcSPtMeOJi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.430199"], ["updated_at", "2019-04-14 18:11:23.430199"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$z1q18M1A3A8ePHK5wtI7AulisT7HmWSKdvq3p.LUnSpKnJuHIJRbS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.437608"], ["updated_at", "2019-04-14 18:11:23.437608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$P94HKwqXuR2Hbgqeu/FynuIljuefzzpnQ8j6A1IF1cm/BgW.Xwt3y"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.442575"], ["updated_at", "2019-04-14 18:11:23.442575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$u6/vTKrL3xOgKF1sHNs.delAk.mrckbVUbQaztK1kVQYfZ/MMAldq"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.447807"], ["updated_at", "2019-04-14 18:11:23.447807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Wl842GDq./8Z/S8t6Y6Jquah2LPlu4rXAgK16Ak7I71zivBJTDHga"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.452859"], ["updated_at", "2019-04-14 18:11:23.452859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$n9Qlsz81lhOJecqpKo.3teGDtS0Uu4OcINV7bwUElCspvyUlVL8Di"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.459801"], ["updated_at", "2019-04-14 18:11:23.459801"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$Y1EhYi048z9Z3zULkNaMKOCwsBBUYfiF.TsEfDDoOG3BYm8lnG8Cy"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.465424"], ["updated_at", "2019-04-14 18:11:23.465424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 100], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 100]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 101]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 102]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 103]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 105]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$WgrNFrJBC18geOcy3Bje1.ouFAH5fk07afSu/DIFOK9K3kwiWqsTm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.483009"], ["updated_at", "2019-04-14 18:11:23.483009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$HW6FTLpHAn5haXGOzI0UU.BltYS7h0GGXzyFz9GYExw1mwKhcsv9."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.488045"], ["updated_at", "2019-04-14 18:11:23.488045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$djXW61C0GPPQ6Vh1aluPK.HKeEZmBorXJcevjTz8kbIjJNTRnIIKu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.492773"], ["updated_at", "2019-04-14 18:11:23.492773"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$lUaBzDIBPe.zitp7PWXIV.j5tXKvKZtmwv16wwERoNc1mHBK7i.6u"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.499369"], ["updated_at", "2019-04-14 18:11:23.499369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$/P8MvFzYkmDxHuV2h/d73e2H0wVKmi/b85lToKNbyYwZdfo4vUsIu"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.504682"], ["updated_at", "2019-04-14 18:11:23.504682"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$zWX9kITXdiZEvKuAhjR0pOjmgWZunb2uL5QBziNjkb7Yo4mpErkGe"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.509488"], ["updated_at", "2019-04-14 18:11:23.509488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$CzSpwBYC2UKXdZ4.NvTNP.G89WZy90938WXtqRXCf4EiP4usbKTA6"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.514267"], ["updated_at", "2019-04-14 18:11:23.514267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 107]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 108]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 109]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 110]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 111]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 112]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$x61UtBysyr7zdORCgVvRpuKpH1f57atzJMR5TQ8ZjTO3hf4yldzBa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.541614"], ["updated_at", "2019-04-14 18:11:23.541614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$5gpSFdBATJdh9iL/czZq4ueoZEmEU6kLdHGPQh4anqS5rGM89Wkjy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.547857"], ["updated_at", "2019-04-14 18:11:23.547857"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$wdC7TSQl123h2NGWvt0oCuBiuivUD1FiULkO8SB6cYgoIy0gKpjSW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.556356"], ["updated_at", "2019-04-14 18:11:23.556356"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$WJqUojz8IuG2irFBpUX2vunDCAV.NdypDUvWUeV5Myo9zzdTTrfHi"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.564557"], ["updated_at", "2019-04-14 18:11:23.564557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$9tQhJ7enbdLxaoa75tJ4SugRdVY10OvvKV7mSxh1tsRA.9mQWiFBW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.569799"], ["updated_at", "2019-04-14 18:11:23.569799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$bq5S/ELN6HOhM0dgLg.KHOvXsuthY14xClLeX8PG.0Eo4N4A0FWIi"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.574846"], ["updated_at", "2019-04-14 18:11:23.574846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$r0GL0iYtmww2E6lq9Qej8urr8QQrkORlqy4F3PjH8DX6M2pWsweBe"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.581495"], ["updated_at", "2019-04-14 18:11:23.581495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 114]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 115]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 116]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 117]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 118]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 119]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$r31jyfh9.PMdEojxnA7oqenrp03irpLm5tT5q3SihE4FctS9Nl.tO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.601879"], ["updated_at", "2019-04-14 18:11:23.601879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$40ZAnKkfL7hPl5SQw/s8G.1xNbEOtP67iRRGkjBzDaSrB2/1QEyNO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.606369"], ["updated_at", "2019-04-14 18:11:23.606369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$49pRzlzrfg1OJZFKQFLOb..qQVWqTsOIhaJ7n9hIDwxzx3jeoJ0ka"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.611119"], ["updated_at", "2019-04-14 18:11:23.611119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$jquBsggVZ7aJ0jzMUirstuAWPwzYXeA3451kWRbsj4x6dZas7tW8W"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.616197"], ["updated_at", "2019-04-14 18:11:23.616197"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$hfkiOWlXD1Y25xIoqzGwHe2vfPptbvDJ.PKLn9rRM4/9li43ZuvIC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.622070"], ["updated_at", "2019-04-14 18:11:23.622070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$63xhOzwowIaRSBRMM01/huwzPQF/2xZxg6ewhSX.1dqxXv93MGZ/a"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.627110"], ["updated_at", "2019-04-14 18:11:23.627110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$g0OjZ.7pIn567JPFjPcFfuNzU0opgGhDFCaNX7W1WVqxQjTzPqOLu"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.632432"], ["updated_at", "2019-04-14 18:11:23.632432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 121]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 122]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 123]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 124]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 125]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 126]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$9CXgIIuAccnuBn4FAgywAu3RhkdCX9GLlz44UFoUBQA4ZdoQZPsHW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:11:23.723905"], ["updated_at", "2019-04-14 18:11:23.723905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$K4Ub/t69E68ENwnjjC51Qup9.IJSAChNJYjCksNcD2u0O4o.Qk63y"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:11:23.731161"], ["updated_at", "2019-04-14 18:11:23.731161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$p2pK6cQQyVwB14YvxJJIluxr9PsaRSXB4Vvc6dCRM4C4Feu5fnYDu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.736789"], ["updated_at", "2019-04-14 18:11:23.736789"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$V34gnNxPcymzAECB4tcnWO.adplilPPPEGhkYJUYes3GB2jDSlBwW"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.742065"], ["updated_at", "2019-04-14 18:11:23.742065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$DstvpWjWvOvwGN2zS6sSqud118QiMimPDY5c3CXj0VwEznT25vBT2"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.747073"], ["updated_at", "2019-04-14 18:11:23.747073"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$mfeMaAADHEQjHfIsEBLxbOOt.tbmwwxYOKNbvZb42FvDZ7lOpbg8."], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.754025"], ["updated_at", "2019-04-14 18:11:23.754025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$rXunkEq.yJmcCPTJGITMJu6m2HdBGbMvscESG.PuUr9cgW4EeZAba"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:11:23.758691"], ["updated_at", "2019-04-14 18:11:23.758691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 131], ["active", "t"], ["created_at", "2019-04-14 18:11:23.761662"], ["updated_at", "2019-04-14 18:11:23.761662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 132], ["active", "t"], ["created_at", "2019-04-14 18:11:23.764588"], ["updated_at", "2019-04-14 18:11:23.764588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 133], ["active", "t"], ["created_at", "2019-04-14 18:11:23.767324"], ["updated_at", "2019-04-14 18:11:23.767324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 134], ["active", "f"], ["created_at", "2019-04-14 18:11:23.770245"], ["updated_at", "2019-04-14 18:11:23.770245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (2.0ms)[0m  [1m[34mSELECT "parents".* FROM "parents" WHERE "parents"."active" = $1 ORDER BY user.last_name, user.first_name[0m  [["active", "t"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (7.6ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:00.757485"], ["updated_at", "2019-04-14 18:13:00.757485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:00.761785"], ["updated_at", "2019-04-14 18:13:00.761785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:00.765060"], ["updated_at", "2019-04-14 18:13:00.765060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 51], ["created_at", "2019-04-14 18:13:00.784886"], ["updated_at", "2019-04-14 18:13:00.784886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 52], ["created_at", "2019-04-14 18:13:00.789582"], ["updated_at", "2019-04-14 18:13:00.789582"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 53], ["created_at", "2019-04-14 18:13:00.792875"], ["updated_at", "2019-04-14 18:13:00.792875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 22]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 23]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 51]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 52]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 53]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:00.833476"], ["updated_at", "2019-04-14 18:13:00.833476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$k11aCCzEaGKGCvROILA6Tubr61P9SMv5jQ389n76dnsobLzkufIkK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:00.967104"], ["updated_at", "2019-04-14 18:13:00.967104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$RDn0gGmgPoIyuDPbNmg86eb5HwNVMiUisDMM9DtuW.ZEKcA10PfzC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:00.972590"], ["updated_at", "2019-04-14 18:13:00.972590"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$LaC8RvsjSiXwvIYeTIx58.pteaWM28RTc4HHuOUy.7m74DNdehZ7C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:00.978427"], ["updated_at", "2019-04-14 18:13:00.978427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$fAgEQrB40T8Hf6mIpc8IguZuK0Vp5vpdAblos.dzcE2TQg3iq3m0O"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:00.983701"], ["updated_at", "2019-04-14 18:13:00.983701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$3BPDUyLjITqSFV21dcLIWOm8XK1CyQ1bLZo/FWlGP2No.HB6Q8jgC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:00.988761"], ["updated_at", "2019-04-14 18:13:00.988761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$pwZmb7FYYxqglA0xkFfede04aBlqXPKxmIygpgjCdVFEaaPfJTc6G"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:00.993366"], ["updated_at", "2019-04-14 18:13:00.993366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$BwqtZTEBjDDwuU1.g/gQjOdXPjEgmHvopUMy9ZUNo4M4Y9kGdtM2u"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:00.997995"], ["updated_at", "2019-04-14 18:13:00.997995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 135]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 136]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 137]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 138]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 139]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 140]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$yDhIcM1wCSL727jRpfq/3uXFJdfMC/8V5PXCcaJIhvl1rxnAnMOTa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:01.062033"], ["updated_at", "2019-04-14 18:13:01.062033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Kq0dHyxrWCZsNZ73Mx5k.u/GUvwjF4W1wTr3i5WV/XPjtRakTrbfu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:01.067459"], ["updated_at", "2019-04-14 18:13:01.067459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$XW87vtvvxXs15onRHGFHUe4tH3dIu9xdWOQ49g9//rvZW4GN3YxZS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.072255"], ["updated_at", "2019-04-14 18:13:01.072255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$L/IRN.3zIAmdn644yojdQO7IX1tDSnpxVkABbLZsygJBBGktKztC2"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.077378"], ["updated_at", "2019-04-14 18:13:01.077378"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$bB.RizNkw3eDEVimTW7w/O48ESDjp83dn3MGSMpIVS4bJ5OPdRZ/a"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.082495"], ["updated_at", "2019-04-14 18:13:01.082495"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$cso1K7SdL.rw6Yn3JE363uvJ1rol7EaMhxDBpqo7cCYDbx2FPqRNS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.089510"], ["updated_at", "2019-04-14 18:13:01.089510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$.6OIyR.LSUv7zzPblPRuo.hpp5lZccj/YMPSuzCZTCbzUB67BWZxe"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.094269"], ["updated_at", "2019-04-14 18:13:01.094269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 142], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 142]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 144]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 145]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 146]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 147]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$G9oYCcd5s7nENMQ0j2NM9ucEpXqp0bcdfbS3NhLwGe7EsCObK8w1W"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:01.121191"], ["updated_at", "2019-04-14 18:13:01.121191"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$BoyXS9H3mRx6eqLO3FMRyuXJY7D8z8HiIMwpNSHqq82AqTHon2XjG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:01.126776"], ["updated_at", "2019-04-14 18:13:01.126776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$PUL8pwHeD3w0D23EtdJC3eDBtf2P7rXnH4FtpcNJQZH6ykGCwhWoy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.132179"], ["updated_at", "2019-04-14 18:13:01.132179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$VDIPKHZHvDTS/qzwUAwv9uETlLNI0Or1sYLZkGpFDTntrQE6ifBOu"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.137940"], ["updated_at", "2019-04-14 18:13:01.137940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$f99H075m0uD/r8/fU8t5Veq0kI.hGFCdjJ./P4LDrQZ8eR7NutFAS"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.142904"], ["updated_at", "2019-04-14 18:13:01.142904"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$4H/9MqKuz45ysuzemHtW4OFBWlcCxPMSJ.MN5YDI2qK.rs6fbuchy"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.149673"], ["updated_at", "2019-04-14 18:13:01.149673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$dr29/LUt3vCGVNdu7g15FuqSDZZ7eVitwSBGpbWCgEcvRRyz16GKm"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.154701"], ["updated_at", "2019-04-14 18:13:01.154701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 149]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 150]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 151]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 152]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 153]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 154]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$ryNwkG.C9.s2G1Ogm4IQsOj2zHxmXN0Zusdt0JaWK.PAx8Xl2GmaK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:01.171000"], ["updated_at", "2019-04-14 18:13:01.171000"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$MRAKZQ7HEoyxJPGsz9j3dO11m93MRPkapsNroovSAf0mEVC8CXqVW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:01.175643"], ["updated_at", "2019-04-14 18:13:01.175643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$rb4wMJEq0Uw07xTNlc5ckOleJfXxiD13jH7Rhf27i7X6eoMrFhXvO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.180069"], ["updated_at", "2019-04-14 18:13:01.180069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$/beegtC5YhMgQpqFM/rp5Oe6osOy31WiL1NT8M6.aE2FFBT3rudb6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.184806"], ["updated_at", "2019-04-14 18:13:01.184806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$IWzSAQiwhZX1ISuKnVEOJuNKN0EH5cQ5yXPydBxiBEWatUIQ00vKO"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.189699"], ["updated_at", "2019-04-14 18:13:01.189699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$Zn1vpM103hlOEmzq/Lfw2.mZTVQsgltkziWX1cWvLw5wOPkMotWNO"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.195778"], ["updated_at", "2019-04-14 18:13:01.195778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$JrAzXsYsaGPNWbIhvOhyOufO/OfW6BdtlyLWtz5zhJXYSovl/yd8q"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.200991"], ["updated_at", "2019-04-14 18:13:01.200991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 156]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 157]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 158]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 159]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 160]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 161]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$.COdPY370QyuRQuvgUaFRuL/jrYdn75H8w8hZpeBi.SVooPttjgSS"], ["created_at", "2019-04-14 18:13:01.228605"], ["updated_at", "2019-04-14 18:13:01.228605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$qSkg4V1mJ9fJKA7ykADEsO5ZA7PbfoMryyJNcugAjArwH5/kIVcdC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:01.261284"], ["updated_at", "2019-04-14 18:13:01.261284"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$1JzH0y3xCRfZZrPtDzdJeOJGSNw24dNxyvTmNoYxKKb1wl7gYnIdy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:01.267874"], ["updated_at", "2019-04-14 18:13:01.267874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$B6DvvWd/nkkXx4/pI1DoYuaBSaNBe1SGd7QOGf1WTd2loWQ3/6O5O"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.272645"], ["updated_at", "2019-04-14 18:13:01.272645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$6RdEBcoJ28svweJp19UyJuL.EI.OcZtbKymjctXjThjrUHi6a/jsi"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.277906"], ["updated_at", "2019-04-14 18:13:01.277906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$fGD9Hw9DTxNAGuvMSPuF0uCxkY8/RBi0i7hSS/oSqRGd66aSBnpyy"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.285053"], ["updated_at", "2019-04-14 18:13:01.285053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$o/lry8JFJP0ULYifEpb16ezvz0Sb6bI9m.MjLEXBk9VEbrgFcFm5C"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.290547"], ["updated_at", "2019-04-14 18:13:01.290547"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$PBGORn0aAU6PUhOk4HHSRefADNUYLX8PbTq/BzyAYWDuevvZxIjHq"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.295265"], ["updated_at", "2019-04-14 18:13:01.295265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 164]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 165]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 166]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 167]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 168]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 169]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:01.318824"], ["updated_at", "2019-04-14 18:13:01.318824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:01.336761"], ["updated_at", "2019-04-14 18:13:01.336761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:01.340061"], ["updated_at", "2019-04-14 18:13:01.340061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:01.343540"], ["updated_at", "2019-04-14 18:13:01.343540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 55]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 56]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 57]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:01.353641"], ["updated_at", "2019-04-14 18:13:01.353641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:01.356921"], ["updated_at", "2019-04-14 18:13:01.356921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:01.360139"], ["updated_at", "2019-04-14 18:13:01.360139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 58]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 59]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 60]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.1ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:01.405056"], ["updated_at", "2019-04-14 18:13:01.405056"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$JPVJ0rKq5pe3SxqXqdpuO.6pN6NXHaVv1U9xXW0yPWLx7nrQPTP2m"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:01.494464"], ["updated_at", "2019-04-14 18:13:01.494464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$/9jgvp6Ey/2VjS0v5Q0Byecc.c37WfuHGW4/Ckk.9znUEEoxY6uTa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:01.499563"], ["updated_at", "2019-04-14 18:13:01.499563"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$Lz54AeKDv0Yr27Dab/NwFeiwvss9Nntr5BiCOO45oWKr3iDrQUMzu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.506407"], ["updated_at", "2019-04-14 18:13:01.506407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$hhYjD272cusTkFy/6C5j/eiYRrHcMFCxcb4Ob8qsnJC2VPtMviyaC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.511080"], ["updated_at", "2019-04-14 18:13:01.511080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$iQgxLa6k9llwZ.2U.IpGf.my29s5gW27cBJSpxfTpaIWeiIkh1EnK"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.516438"], ["updated_at", "2019-04-14 18:13:01.516438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$4witQDA6MqSIT.Y9abufn.YHAxDCdpb0.TmoJvRRpmnOQ.Dbg75C."], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.522769"], ["updated_at", "2019-04-14 18:13:01.522769"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$icKIhYKBWTzM8mctqMF71uxPhnTzHnjdNL9kZBpiTegLfH.9gi5HK"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:01.528754"], ["updated_at", "2019-04-14 18:13:01.528754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 174], ["active", "t"], ["created_at", "2019-04-14 18:13:01.531832"], ["updated_at", "2019-04-14 18:13:01.531832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 175], ["active", "t"], ["created_at", "2019-04-14 18:13:01.534776"], ["updated_at", "2019-04-14 18:13:01.534776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 176], ["active", "t"], ["created_at", "2019-04-14 18:13:01.537353"], ["updated_at", "2019-04-14 18:13:01.537353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 177], ["active", "f"], ["created_at", "2019-04-14 18:13:01.539855"], ["updated_at", "2019-04-14 18:13:01.539855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 174], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
  [1m[35mSQL (2.1ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 171]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 172]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 173]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 174]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 175]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 176]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:57.999487"], ["updated_at", "2019-04-14 18:13:57.999487"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:58.006332"], ["updated_at", "2019-04-14 18:13:58.006332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:58.009695"], ["updated_at", "2019-04-14 18:13:58.009695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 61], ["created_at", "2019-04-14 18:13:58.021476"], ["updated_at", "2019-04-14 18:13:58.021476"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 62], ["created_at", "2019-04-14 18:13:58.026033"], ["updated_at", "2019-04-14 18:13:58.026033"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 63], ["created_at", "2019-04-14 18:13:58.029832"], ["updated_at", "2019-04-14 18:13:58.029832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 25]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 26]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 27]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 61]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 62]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 63]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:58.532268"], ["updated_at", "2019-04-14 18:13:58.532268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$xi39aRsc5OlXSjeajEdL..j/z8VIcX5HagKd8TAs2mO0CiEQlGI4e"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:58.605103"], ["updated_at", "2019-04-14 18:13:58.605103"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ftHDXRevOPay0yeUGvGVXuPsq.juDPZFipjHUKjrWL8QPAmm9NYFe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:58.615401"], ["updated_at", "2019-04-14 18:13:58.615401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$p1NIhVJv.icLHnGduvmfoeyDT5jWO2qQ3RiW2kcKDlkjFiVvCnCGi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.621185"], ["updated_at", "2019-04-14 18:13:58.621185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$EIM/hNllFt23ex/6WYkMmO6QkVF6MLVqAVm2DEhaszIFnFq0u1YB2"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.627210"], ["updated_at", "2019-04-14 18:13:58.627210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$6nknP.LfxkFZQxwtwxvLduqi22.AZcjo4o/iA35p.IcJlCbX04sxu"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.638465"], ["updated_at", "2019-04-14 18:13:58.638465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$.TUMnMikmRI7kJWbU.9JmeA1ebChLhMJDbCULaQIxKkpYdOOZSTtm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.645710"], ["updated_at", "2019-04-14 18:13:58.645710"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$EVDnIBH7vobE/s0VQqAukO8KB9Aj4ZgqmJ7oebZGYOMzvW7jzgPce"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.650447"], ["updated_at", "2019-04-14 18:13:58.650447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 178]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 179]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 180]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 181]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 182]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 183]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$JuclltsYPn3bR1CXRFTVX.nkPadoYnk5aqmUEYP1b2ccu61w56QTS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:58.698289"], ["updated_at", "2019-04-14 18:13:58.698289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$0d2UHd/rWAni5Wr0C8mcVeZAP28LchG9gDAJK/KMHyfrTxQwGvx.G"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:58.703087"], ["updated_at", "2019-04-14 18:13:58.703087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$wk8IQk0UxS9CY4ZBOCFaYeXNXqOAOSz3cR4PagYIzrS3txlN8H1WW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.707829"], ["updated_at", "2019-04-14 18:13:58.707829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$Zl/4z/n0QBjY0DP7.a1FUe2EyZDC5ZGIC87gHMgJWyR9lhKwsuCzK"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.712963"], ["updated_at", "2019-04-14 18:13:58.712963"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$BCsoy9IPB4whJN0qLZ3WiOQbXO7DEp9TV5tr9MHyRLtF0MRIOKS22"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.719433"], ["updated_at", "2019-04-14 18:13:58.719433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WzWhzc5DFTcSRTzAKGWC5OEebHA7tl2H15hNmJ.zsqM7GysVa1JVy"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.724676"], ["updated_at", "2019-04-14 18:13:58.724676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$vNXhTjpBUEn/ygO1JoPIEuiMAIe7UX5/gtAVLwTGmgzlwABcFHeeC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.729623"], ["updated_at", "2019-04-14 18:13:58.729623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 185]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 186]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 187]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 188]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 189]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 190]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$83MAYCKvq4iT0sqrMRNGOui6p/fEj02iLK2q2favOmg4YtgT7oOp2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:58.739408"], ["updated_at", "2019-04-14 18:13:58.739408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$POwwyYq2MGU1m5UVYXoOZeE9j47j1lsQ9rHso/G1bVx/1xpYQ04xq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:58.744422"], ["updated_at", "2019-04-14 18:13:58.744422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$efO4Ms9XhkbX6mZLzxkAR.V14xhi9Pm9OkuAf6ot7Y21IFcvcX2cO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.749662"], ["updated_at", "2019-04-14 18:13:58.749662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$Xw0iw8Pc4rxNVssWu07PSeQhCBrdQ7.Uz770Uu0QK9qNECMetXo7W"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.754814"], ["updated_at", "2019-04-14 18:13:58.754814"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$XH9yZxIcvfBD8QiReFbl1OzYubslk87LPkQphfARikvDooHxWCLMW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.761499"], ["updated_at", "2019-04-14 18:13:58.761499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$J8ENoXVZQTk5P72dZbMFv.h60iNJd51s4kMfXrckut8biSIeMhhhS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.766270"], ["updated_at", "2019-04-14 18:13:58.766270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$VKMwN1dMk00sewsYgrLf4eaMCVQkM3fS.1XWvVgqgM9BV1Q/W14pm"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.771244"], ["updated_at", "2019-04-14 18:13:58.771244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 192]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 193]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 194]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 195]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 196]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 197]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$xEtEFKGMhguV4ewFmu/C8.CoMrUKboxH6ywv9VGKR/Il2JqeJqlOO"], ["created_at", "2019-04-14 18:13:58.843783"], ["updated_at", "2019-04-14 18:13:58.843783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$MEv5FYuFZ8z0egei/3ooIevfuGGPGdT97x6Pho5In74sUBkklRbs2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:58.856542"], ["updated_at", "2019-04-14 18:13:58.856542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$W3OC8ayIQ2ccrtvs0jYsEeZ1lmCebbPEqXBTpPx92AKNAM2IRVYC2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:58.861824"], ["updated_at", "2019-04-14 18:13:58.861824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$JXZP5vsefQfTLuR8GpLFTel6LzIFr3LWwKG4rGhf3IJxpdLM5qnie"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.868045"], ["updated_at", "2019-04-14 18:13:58.868045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$PMfMEAOPXOLX.pNyO2A8te4y3XH9HWxAJdBsvIsoM0ugQU6W78PDm"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.873756"], ["updated_at", "2019-04-14 18:13:58.873756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$RQspqvVcwCdvfu1hsjlNK.thYHWzoslE/YNweOMApIX4R0NKG5Giq"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.878519"], ["updated_at", "2019-04-14 18:13:58.878519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$EYxV6NUFVb77TGupeFjbGuEK.dd4N275lxyO733ZStS6Jdjzb49ZG"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.883114"], ["updated_at", "2019-04-14 18:13:58.883114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$JjGaPZTKuUzT74iH/T7Hr.kc95fjY4y9ANa2wXhQdD0tkfNTbM.Li"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.887601"], ["updated_at", "2019-04-14 18:13:58.887601"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 200], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 200]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 201]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 202]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 203]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 204]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 205]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$JuircQ4gUaEDDNE/7OwoM.dCy/eGb0veUZtzHT3j6kETs9zUn8oey"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:58.899298"], ["updated_at", "2019-04-14 18:13:58.899298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$nGVTB.EugOx0jnhXN2wxKOhI4UArgySBuKNFcBsr1qknJhk0t03TK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:58.904152"], ["updated_at", "2019-04-14 18:13:58.904152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$4XnXa8IE5grXnbHV0xzC5uhWv.65PaD8vgXhwmaYrYiilCuYmUFTq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.910883"], ["updated_at", "2019-04-14 18:13:58.910883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$U6XknDmPl9BdnwxgrKKBgek87q60/lzy7kjXVF2DOL7cFi9tR7MVK"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.915616"], ["updated_at", "2019-04-14 18:13:58.915616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$M6Cxiz9scnqFZtREfrVEdeXntot6Oo9GeRQUMsn42nQ9DcUYdEehq"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.920321"], ["updated_at", "2019-04-14 18:13:58.920321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$Bs.058h5f9RKfZfBD2DkDe9FGa0st6zeAaSxpRuLB68.JU6PRlc0."], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.925222"], ["updated_at", "2019-04-14 18:13:58.925222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$Q0634/YeoTEIQiUIVnVUGuh533/H5CLjDYSAqMwURgkw16mmK6gW2"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:58.929676"], ["updated_at", "2019-04-14 18:13:58.929676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 207]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 208]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 209]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 210]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 211]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 212]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:59.015061"], ["updated_at", "2019-04-14 18:13:59.015061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:59.150810"], ["updated_at", "2019-04-14 18:13:59.150810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:59.154255"], ["updated_at", "2019-04-14 18:13:59.154255"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:59.158312"], ["updated_at", "2019-04-14 18:13:59.158312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 64]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 65]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 66]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:13:59.166996"], ["updated_at", "2019-04-14 18:13:59.166996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:13:59.170300"], ["updated_at", "2019-04-14 18:13:59.170300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:13:59.175304"], ["updated_at", "2019-04-14 18:13:59.175304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 67]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 68]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 69]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:13:59.190485"], ["updated_at", "2019-04-14 18:13:59.190485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$vgp6fSgYZnC2HuKLdxkdo.bmx6HlnWNJHem3qNTU8Me37yGQ3mp5W"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:59.252399"], ["updated_at", "2019-04-14 18:13:59.252399"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Ouzpghm1hs.LMJYXgMlsQei5O9QwY3jJ0WSBh/1.mcRcUschefhvm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:59.260141"], ["updated_at", "2019-04-14 18:13:59.260141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$PT4fZgK04dWF4tKx1NiCUefzHMgb5oirk11nxzwkD3PPi2sZ0DZqa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.264758"], ["updated_at", "2019-04-14 18:13:59.264758"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$.0nZoJ42l3ssXDhjL6MHc.8EixRds..eTCKKlZzFWuNyS7kHp1Yp6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.269305"], ["updated_at", "2019-04-14 18:13:59.269305"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$7H0PHbVNPODkZrUjU2S0MekE9VJtw4X7hRUmH7iHlAujEomBGPwzO"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.274345"], ["updated_at", "2019-04-14 18:13:59.274345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$hcaoiKSr8Zb/eb0PL9chPepKBkeBbMjKwtH.yyb.vSz24EAQHVBEe"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.279132"], ["updated_at", "2019-04-14 18:13:59.279132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$tHs45VbbIQd2rMQ1V2zRHupj0LYzsy8H6x8pA.Ih0LfpJPTRN1n02"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.285364"], ["updated_at", "2019-04-14 18:13:59.285364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 217], ["active", "t"], ["created_at", "2019-04-14 18:13:59.288712"], ["updated_at", "2019-04-14 18:13:59.288712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 218], ["active", "t"], ["created_at", "2019-04-14 18:13:59.292292"], ["updated_at", "2019-04-14 18:13:59.292292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 219], ["active", "t"], ["created_at", "2019-04-14 18:13:59.294988"], ["updated_at", "2019-04-14 18:13:59.294988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 220], ["active", "f"], ["created_at", "2019-04-14 18:13:59.297542"], ["updated_at", "2019-04-14 18:13:59.297542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.5ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 218], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 217], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 219], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 15]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 16]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 214]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 215]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 216]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 217]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 218]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 219]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$6A6Sdjw6kTaAJOMnJP2xMu1twHu7xZQPO2me3MQPSFOC5P4E.Y5qG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:13:59.350299"], ["updated_at", "2019-04-14 18:13:59.350299"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$WOJQGulyVJPI.v2rI9DY9ufEi3Bb7sm5JAczJf3OmPGNOOT4ZwdyO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:13:59.355823"], ["updated_at", "2019-04-14 18:13:59.355823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$E8csc5vcfTGxAXsfeo5p2ejieC3IF0McsbMM7.rCA5miiTq3gVPmq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.361277"], ["updated_at", "2019-04-14 18:13:59.361277"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$.kor6mvSWJtN8oBqHgl2SeciU0S9Bkj.fiDzHadVaCHHELtFN7qQC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.368177"], ["updated_at", "2019-04-14 18:13:59.368177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$J7UZ.U7Q98Nloy2JhYP3yezTGLDBcf9dSkKeB.AfDKt0ozSbGNVpq"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.374006"], ["updated_at", "2019-04-14 18:13:59.374006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$a/Qunc9Hdf96mNDCCpFrRejxVIGemiUlBjyS6OxRxC09Wy.Wr4IVO"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.379234"], ["updated_at", "2019-04-14 18:13:59.379234"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$2uaU7oSsM6Z.Dz3vxf44gObEQ/Of74.JvB9yhmRho0fQSyFFfW6ge"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:13:59.384048"], ["updated_at", "2019-04-14 18:13:59.384048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 224], ["active", "t"], ["created_at", "2019-04-14 18:13:59.389278"], ["updated_at", "2019-04-14 18:13:59.389278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 225], ["active", "t"], ["created_at", "2019-04-14 18:13:59.392129"], ["updated_at", "2019-04-14 18:13:59.392129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 226], ["active", "t"], ["created_at", "2019-04-14 18:13:59.394653"], ["updated_at", "2019-04-14 18:13:59.394653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 227], ["active", "f"], ["created_at", "2019-04-14 18:13:59.397209"], ["updated_at", "2019-04-14 18:13:59.397209"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 224], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 226], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 17]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 18]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 19]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 20]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 221]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 222]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 223]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 224]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 225]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 226]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:14:15.833628"], ["updated_at", "2019-04-14 18:14:15.833628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:14:15.839006"], ["updated_at", "2019-04-14 18:14:15.839006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:14:15.842607"], ["updated_at", "2019-04-14 18:14:15.842607"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.3ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (6.7ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 71]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 72]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 73]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.1ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:14:15.865441"], ["updated_at", "2019-04-14 18:14:15.865441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:14:15.876836"], ["updated_at", "2019-04-14 18:14:15.876836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:14:15.880132"], ["updated_at", "2019-04-14 18:14:15.880132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:14:15.883801"], ["updated_at", "2019-04-14 18:14:15.883801"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 75]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 76]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 77]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$nFU.JRCkmsG087dqZyVXDO.dibuOFJFnIDIiDsF8JWtxkgwRL278S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:15.937737"], ["updated_at", "2019-04-14 18:14:15.937737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$FT1/ThrMid9vQTqORWdyK.F/3HPfn0Ebcln28YfAvnvhBjRfISD/2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:15.942658"], ["updated_at", "2019-04-14 18:14:15.942658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$TRx.vmjQaZ9jpfBlxqTcweIHvemS/SQvo/d/Kn1jk5uwPmN5.X6My"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:15.947405"], ["updated_at", "2019-04-14 18:14:15.947405"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$QiNLMoxr6bov0Lu4ND2IGuNtz0SjQsdWIgjGK5XZ9zeKf7c2kzwJm"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:15.953035"], ["updated_at", "2019-04-14 18:14:15.953035"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$z4oadTB5Sj11IlTUI66lbOYtxMZITdNUZYnf4YLKDytQv.Ng6o1f."], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:15.960033"], ["updated_at", "2019-04-14 18:14:15.960033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$0rI9S3mi8z4STZHVFYZOUem0NzIe/eSROoEPs2Bxx6Lzg07Md2Nfm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:15.964824"], ["updated_at", "2019-04-14 18:14:15.964824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$.eLcLMMuNjTs2vcW4aRNQ.ShDbtZuJMK.szJEo6a5GEh36DYBBn3S"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:15.969855"], ["updated_at", "2019-04-14 18:14:15.969855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 228], ["LIMIT", 1]]
  [1m[35mSQL (7.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 228]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 229]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 230]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 231]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 232]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 233]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$a0NHQGny/e6pSYQkkkIvouGBrw15BT3L4SQaWZoZUVUA6yEyTh/RG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.019493"], ["updated_at", "2019-04-14 18:14:16.019493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$GF1a6GzRq5DMQg7IJdl04u0ZQdCwejLDzFYnPh56CZDR/dox2lK76"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.024886"], ["updated_at", "2019-04-14 18:14:16.024886"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$aNkUy2Mr.Is.i54YrCqjPOrd//1qxra7vtzJ7K4EBWYzP9Kl87gdK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.030879"], ["updated_at", "2019-04-14 18:14:16.030879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$1VxDCIApOULPnLbN78irO.iEi/ZVEhM5qpbX.aeVyAniRGqncMAMq"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.036258"], ["updated_at", "2019-04-14 18:14:16.036258"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$a1SponNVrzlVDcuixtJr8eSzMZEsLIV0.H.4nJXUY7nSfE0189YD2"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.040954"], ["updated_at", "2019-04-14 18:14:16.040954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$trA8.yZ6a8PN5eFG16JhcuMkDDh62NXC.aRPF/NkC8w0xxHBTKqNu"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.045957"], ["updated_at", "2019-04-14 18:14:16.045957"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$1xB/hby5pg9wf4q/vTrqcumT/3hzhZuuuAv6p0MbVXlJ8u/u2lTbe"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.050642"], ["updated_at", "2019-04-14 18:14:16.050642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 235]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 236]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 237]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 238]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 239]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 240]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$u/kkbWkoW3v2e4b6MLas0OCXBtMURbpqKxSYiv1FJoOxHE39oMXXW"], ["created_at", "2019-04-14 18:14:16.091848"], ["updated_at", "2019-04-14 18:14:16.091848"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$cLdcqWwHdcpfjQM/aTr0buSV8CZe3xctTrxhI22NemZ3c0ZcxKP0S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.112979"], ["updated_at", "2019-04-14 18:14:16.112979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$RMcSZ8fK0FLMvZULmQQKJeKFNxF0s2Mhkb81StCKPyZK.sxOJMU2."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.120363"], ["updated_at", "2019-04-14 18:14:16.120363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$ytyuaamHfgKe8Cix2rjh0O67fpOaoKdaFasVe8TrtHQ9Q6CmdHtVy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.124908"], ["updated_at", "2019-04-14 18:14:16.124908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$sZsrmClIw.eLBkUxmr0hlu/XAsJCPaZv1alD8JhesiF944GSUdhRu"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.130103"], ["updated_at", "2019-04-14 18:14:16.130103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$ZhzbFhWV1w/fRj0btIjhCORIwT8cglM4X7UJHpA7PDlYK7lOaADHO"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.136509"], ["updated_at", "2019-04-14 18:14:16.136509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$u/USiUZGLqwXECT7WWLMteMo98Nb8jACGFf1k76jpUPLbzkAFSj2a"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.142216"], ["updated_at", "2019-04-14 18:14:16.142216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$4qMxWKSqhSUANezsV64lWOzBRorgIF8LKZRstW7DkSIST9h1fdy4C"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.147220"], ["updated_at", "2019-04-14 18:14:16.147220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 243]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 244]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 245]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 246]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 247]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 248]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$qltgR1ksnpz5youLrOmaKuB8yvmXndpq4bMLtSMiZWgFnDqQTPJuu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.163352"], ["updated_at", "2019-04-14 18:14:16.163352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$DBmt.8HnX/FJqcSro0JYCOqYNVKGyrqpiUwL2jLW0BpOcfZLh2uqi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.168143"], ["updated_at", "2019-04-14 18:14:16.168143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$sNuNW0hEIzOdF1ZgxJTGB.mW0V2Bzs50OJIJ74pFhVTOvL5BpwPxm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.172835"], ["updated_at", "2019-04-14 18:14:16.172835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$7CA98JMj/C.v5aCJ/jk6SODY1MQfr7ThClP1qGRrpxARbvGzwohj6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.177515"], ["updated_at", "2019-04-14 18:14:16.177515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$727qvd73REKWNbi5bNMsjuRGp.XRKjXA5tMXlN1Av4prm8SrS1kae"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.182526"], ["updated_at", "2019-04-14 18:14:16.182526"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$6aMdH.65u.8B9Khrn16ZwuyvgwDaOWEr2pT7XahdVAYu7WrlkePCO"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.189084"], ["updated_at", "2019-04-14 18:14:16.189084"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$QeiaRA7gJ3KYpYMAW4m9cOTa90IHGNacr/WpepKFQ24ApI3HGuTYW"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.194083"], ["updated_at", "2019-04-14 18:14:16.194083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 250]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 251]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 252]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 253]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 254]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 255]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$ldhX9rp1h7rxrTePRn8UpOBpRCYhINgqIF0DN1eK7Khgk7bJvxkeC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.214241"], ["updated_at", "2019-04-14 18:14:16.214241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$KvsRsmk4of7xKl9GKseiEOhLC06aADEx2/uwx5gpgKXV7yyU/rIRO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.218988"], ["updated_at", "2019-04-14 18:14:16.218988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$zaVFMdbvIuq9uOyh.IXoPe4lh8yoVXmvkMAsIJ0bG5xRxH2onFwc6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.223815"], ["updated_at", "2019-04-14 18:14:16.223815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$BTylXJ4RxKXqhCgDwZI9c.ODfEGYocn.r1E1NpxpriKx8ibXv0rbC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.228929"], ["updated_at", "2019-04-14 18:14:16.228929"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$4Ovdr8dppjkp6aBBBPzTX.vt.KwsyxsLJQWZ8bdKYF39B4LchM.4S"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.235747"], ["updated_at", "2019-04-14 18:14:16.235747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$orbNh5bqu05X6xaVWKA/Gug3XyoeZcWYuNzh7KL8vsuxMMpikpdje"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.240922"], ["updated_at", "2019-04-14 18:14:16.240922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$Bb0SHToALRPbB9WvOoYSKu89Fe73xgPXckC3zbVrMVFrvOwPuU/F."], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.245576"], ["updated_at", "2019-04-14 18:14:16.245576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 257]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 258]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 259]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 260]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 261]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 262]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.2ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:14:16.306584"], ["updated_at", "2019-04-14 18:14:16.306584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.1ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:14:16.350515"], ["updated_at", "2019-04-14 18:14:16.350515"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:14:16.361216"], ["updated_at", "2019-04-14 18:14:16.361216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:14:16.364913"], ["updated_at", "2019-04-14 18:14:16.364913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:14:16.368790"], ["updated_at", "2019-04-14 18:14:16.368790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 78], ["created_at", "2019-04-14 18:14:16.372431"], ["updated_at", "2019-04-14 18:14:16.372431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 79], ["created_at", "2019-04-14 18:14:16.377393"], ["updated_at", "2019-04-14 18:14:16.377393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 80], ["created_at", "2019-04-14 18:14:16.381313"], ["updated_at", "2019-04-14 18:14:16.381313"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (6.0ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 30]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 31]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 32]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 78]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 79]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 80]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$wPFvojCpc6jTeOTfXtcT3evHNBGiJW1WLBNw4PCkch3EaWb.o2Vw2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.514838"], ["updated_at", "2019-04-14 18:14:16.514838"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$Cgv9ui0vkNpHKRx/uc2F9.lGOLWLDLPVDXmlJKaIQDzqyj5VoC2A."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.521002"], ["updated_at", "2019-04-14 18:14:16.521002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$lec6xdKufoccSEpVkTJqGOuqXlNqFzu.ZaJMeGVroDONRRdBD3FMK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.525963"], ["updated_at", "2019-04-14 18:14:16.525963"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$gdDltWxRmSFzAVkUFXgzme2IPicaYsfGPlTN53FfyNedmsmGEvyM."], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.532259"], ["updated_at", "2019-04-14 18:14:16.532259"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$zqJYJTOGaU2fSsloaRju3uxkiwl9OyQe64sclpxO7/oF1r5QndTxi"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.538204"], ["updated_at", "2019-04-14 18:14:16.538204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$IGRINWk6Wz6fEAwnl8mhvuy6uXJy59cdpLYLsPQAA2HrKI4Mz1jTO"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.542922"], ["updated_at", "2019-04-14 18:14:16.542922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$K.48wmCzJkGNDUCt6hGPee9pXuMAFPwc52n8w/cwoF0WUIMzt6Ykm"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.547586"], ["updated_at", "2019-04-14 18:14:16.547586"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 267], ["active", "t"], ["created_at", "2019-04-14 18:14:16.550511"], ["updated_at", "2019-04-14 18:14:16.550511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 268], ["active", "t"], ["created_at", "2019-04-14 18:14:16.553196"], ["updated_at", "2019-04-14 18:14:16.553196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 269], ["active", "t"], ["created_at", "2019-04-14 18:14:16.555581"], ["updated_at", "2019-04-14 18:14:16.555581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 270], ["active", "f"], ["created_at", "2019-04-14 18:14:16.558023"], ["updated_at", "2019-04-14 18:14:16.558023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.4ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 269], ["LIMIT", 1]]
  [1m[35mSQL (3.9ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 21]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 22]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 23]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 24]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 264]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 265]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 266]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 267]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 268]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 269]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$lFfVbtrMGMLzByN1ENWw/eT.FlmJPclkSgQ6uA4fQSD7GYs8md8/u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:14:16.615576"], ["updated_at", "2019-04-14 18:14:16.615576"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$r5e6/WXPiYOiC.gED3ivSeDisCSYzU8FeyLjmyfBKGtpDLUdQvqMi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:14:16.621435"], ["updated_at", "2019-04-14 18:14:16.621435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$xF2IsxpkDfSrobdwAQJfO.7IY/IHlUKQ4ezU8QapYlX1z5N.lKGfa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.626179"], ["updated_at", "2019-04-14 18:14:16.626179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$4ahqrr96mh/jD9dcbPj/U.F4Fa74Z.i3xudqp/5sse1mmEqOrzPbq"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.631329"], ["updated_at", "2019-04-14 18:14:16.631329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$o9Vk7ZfDOXpvc8F/S27YVuG6yfHVNJb42l48WXK5bSYMO0yYj3KVS"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.638032"], ["updated_at", "2019-04-14 18:14:16.638032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$iQaxL947egW7lWih.PUf0O9uoJBxdSR3aJGEwHGGF.aTyEy/caHlW"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.644831"], ["updated_at", "2019-04-14 18:14:16.644831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$GiWD/LOhCR62dZAUGMAF0erRj/nJOdrXxiuU3Mi0W6KcKQnl6kzlO"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:14:16.649965"], ["updated_at", "2019-04-14 18:14:16.649965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 274], ["active", "t"], ["created_at", "2019-04-14 18:14:16.655158"], ["updated_at", "2019-04-14 18:14:16.655158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 275], ["active", "t"], ["created_at", "2019-04-14 18:14:16.657780"], ["updated_at", "2019-04-14 18:14:16.657780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 276], ["active", "t"], ["created_at", "2019-04-14 18:14:16.660276"], ["updated_at", "2019-04-14 18:14:16.660276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 277], ["active", "f"], ["created_at", "2019-04-14 18:14:16.662650"], ["updated_at", "2019-04-14 18:14:16.662650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "f"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 277], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 25]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 26]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 27]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 28]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 271]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 272]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 273]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 274]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 275]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 276]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.5ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:15:47.215267"], ["updated_at", "2019-04-14 18:15:47.215267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$2YVJCNgHz9Jfzfzw5YaE2.d0Xx6aX/YSLS3jDDEvQ0BZjrimnOMAu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.255828"], ["updated_at", "2019-04-14 18:15:47.255828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$GMNeNe3DlElIlPxFgLTOVOo1fAxU5OoDt9XGpm4P7kpUGwAeyf6ZS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.263450"], ["updated_at", "2019-04-14 18:15:47.263450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$aG7ZnPGCzuRVsH0irVdNqu.q1P/0RSQ5MPjFyC0PepmSZzX.ivBty"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.268432"], ["updated_at", "2019-04-14 18:15:47.268432"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$W9bjYyF3kcXQu/f3weN.leRz1T3OBq9SVyOVwwGAEz3VuGYXL.W2y"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.273509"], ["updated_at", "2019-04-14 18:15:47.273509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$xu4B.zmyHXuNBM055oWAUOyMnqDwyXPOmBOkqEtxCI/VVamdzhYtm"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.279193"], ["updated_at", "2019-04-14 18:15:47.279193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$9kkZ6fcj2yN9eRFoTabR4uFp4ziYHkMozeZumYz6ZS5aDb6T7/yPC"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.287653"], ["updated_at", "2019-04-14 18:15:47.287653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$tlukTmsTW3q1VJ9JhAli4eaq.PAz5gvxpKcaU9g7Zn6Cnm2t4aDHy"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.292619"], ["updated_at", "2019-04-14 18:15:47.292619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (4.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 278]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 279]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 280]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 281]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 282]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 283]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$YYf7H.ZCqeyjE7YjTVlkbencBui5SlfKA5DPZkyFdUDnuCHopdWrO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.338282"], ["updated_at", "2019-04-14 18:15:47.338282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9ATGy4mKdQDxZBFmnSB.E.ZAA1s/91ZroOBzAhiX0HOJfhieN66Gi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.344120"], ["updated_at", "2019-04-14 18:15:47.344120"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$E884TDzHymIrrasogIztVeT1DStNk9iZH1VcXUsRZBGacBlt0HSDG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.350032"], ["updated_at", "2019-04-14 18:15:47.350032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$egFCHUJOA9hFP1FoxJKOMu5NkO4ufIgtmeplV1ohdA2vbjYhstvoa"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.356684"], ["updated_at", "2019-04-14 18:15:47.356684"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$WM71iP0.sqxG2nJ7M5znvO9LUGFRogu7AOQSSVBrjx.5x6QbfRMzq"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.362533"], ["updated_at", "2019-04-14 18:15:47.362533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$oQ6AtrwLpwbE0AP2BadJoeRDGHVZYnB.p4tbD4LFVPH0MaK9AfhEu"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.367122"], ["updated_at", "2019-04-14 18:15:47.367122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$D2eOKUH0TQs5PmBAALd7TuKk8IAUaTrCGUG0svJSIl.xkpOAE4zfW"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.371626"], ["updated_at", "2019-04-14 18:15:47.371626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 285]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 286]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 287]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 288]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 289]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 290]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$QB2CHuRlPcxVDQFvmrzJie.GQZKByHjZuB4Ik9TaVmQsruvyGNvIC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.400240"], ["updated_at", "2019-04-14 18:15:47.400240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$BH9FyJqk.uk8oKk/Floq8eWt/J/0Lq.1m5o.WtmWBw9XwZCJojYk."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.406548"], ["updated_at", "2019-04-14 18:15:47.406548"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$EmDqHd/C8U6Shr2EkUKTQeqpxKdw00OMTyK8iTZLdKQiXdqgMao/u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.412696"], ["updated_at", "2019-04-14 18:15:47.412696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$48xDXuqI0fVdwGoba5q4W..Pf76yv0w8xPfi.75n9rlnOVDZ5xVbG"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.420002"], ["updated_at", "2019-04-14 18:15:47.420002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$3pRhyJbsjI.OhLlYbunttO08daUUpDihHM26fN4SxRvJ74TuiSNOm"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.425013"], ["updated_at", "2019-04-14 18:15:47.425013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$zfcK7YyyzC8LFYKXnNAiKuYmnjJ6x0OVgkESc.hnTjwvdMUlzBRlC"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.429730"], ["updated_at", "2019-04-14 18:15:47.429730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$RxYQlBiz7Kqu.gayzIaRw.PGcgVFaKGSO1n6/VVLDA9pGcFUrN5Ai"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.434310"], ["updated_at", "2019-04-14 18:15:47.434310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 292]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 293]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 294]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 295]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 296]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 297]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$U.ejhFvb2EYd2CXv2WYglO4IyF9vy6awRspbOSu/q2xKUAhuh/F9G"], ["created_at", "2019-04-14 18:15:47.507090"], ["updated_at", "2019-04-14 18:15:47.507090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$5A.BS8L.pUQqjQWokgWIiuKfNbVXEUP4lTjcAniv2L2BY1BUDVQVi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.519936"], ["updated_at", "2019-04-14 18:15:47.519936"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$bJqpURw9B8eeDCD.vid/YOl02BsPE8L1zgbgKd7aPuOjnDSzMh8w6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.526551"], ["updated_at", "2019-04-14 18:15:47.526551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$.t06mCIsEehBDP97AZZK1e2F/zQ5dacBnqi/1MEY92jTeZQhQemQi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.531583"], ["updated_at", "2019-04-14 18:15:47.531583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$WMIyJFmwz98/a76jo.83gOfV3vjRfFQ8arZj6.PZwFPCBOdWBLgo6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.536835"], ["updated_at", "2019-04-14 18:15:47.536835"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$c1CyJ9bEI8iDe5ZZkBKqrOFKJUU6UVGob7ZUTqYqtG/WDBYq.qqty"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.543803"], ["updated_at", "2019-04-14 18:15:47.543803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WXozpBfexQfudCNIQXSfI.WM0SutGmelMCHMx1DhKSfvk6euV49SK"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.548645"], ["updated_at", "2019-04-14 18:15:47.548645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$6RI0RZ5j/R7rWKNZ7YKOUu95.KVH1QkhjBAVug6DoFs8oyBq3jjMC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.553137"], ["updated_at", "2019-04-14 18:15:47.553137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 300]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 301]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 302]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 303]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 304]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 305]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$x803e2KWRm/TwjsL6zKi3.Yhgu2bqp4cTAmn2klD.S1SN0BJtynPa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.572956"], ["updated_at", "2019-04-14 18:15:47.572956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$BVbm5ocmnrTC4lz5SBBRq.bNec2IaBYH5M2AUlE.lBtuNY7d/ywKa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.577981"], ["updated_at", "2019-04-14 18:15:47.577981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$z1/6j77ykfBC7OcNxPmuvuQyIRGKlS9PRexcD0U73uuw45wABYVq2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.582958"], ["updated_at", "2019-04-14 18:15:47.582958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$DE7sNGrQWSXJuev8KKCuvulw4Wk1vg0wbg9XZ4QFM2tHpJPpzmxcu"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.588652"], ["updated_at", "2019-04-14 18:15:47.588652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$ba4bEBJehb/bmRfgL99/RO.qtsZo6F1p9dioVu8PeKlLAun6FfJWi"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.594081"], ["updated_at", "2019-04-14 18:15:47.594081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$oc7OAykd67hw7uDdgkk5LeEB41rUsIEakjPZ4Kz.bi/J3KGXk3jVu"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.598889"], ["updated_at", "2019-04-14 18:15:47.598889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$EaFPdzLwXuV7MhQSA7bdP.Rxuk0hJjgR81y39I99T27oHFZHePZSy"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.603556"], ["updated_at", "2019-04-14 18:15:47.603556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 307], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 307]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 308]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 309]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 310]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 311]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 312]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (2.5ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:15:47.646021"], ["updated_at", "2019-04-14 18:15:47.646021"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:15:47.666868"], ["updated_at", "2019-04-14 18:15:47.666868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:15:47.670100"], ["updated_at", "2019-04-14 18:15:47.670100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:15:47.674955"], ["updated_at", "2019-04-14 18:15:47.674955"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.3ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (5.8ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 82]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 83]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 84]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:15:47.691753"], ["updated_at", "2019-04-14 18:15:47.691753"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:15:47.697175"], ["updated_at", "2019-04-14 18:15:47.697175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:15:47.700508"], ["updated_at", "2019-04-14 18:15:47.700508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 85]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 86]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 87]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:15:47.734791"], ["updated_at", "2019-04-14 18:15:47.734791"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:15:47.739903"], ["updated_at", "2019-04-14 18:15:47.739903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:15:47.743830"], ["updated_at", "2019-04-14 18:15:47.743830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 88], ["created_at", "2019-04-14 18:15:47.747641"], ["updated_at", "2019-04-14 18:15:47.747641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 89], ["created_at", "2019-04-14 18:15:47.751850"], ["updated_at", "2019-04-14 18:15:47.751850"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 90], ["created_at", "2019-04-14 18:15:47.755590"], ["updated_at", "2019-04-14 18:15:47.755590"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 33]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 34]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 35]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 88]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 89]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 90]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:15:47.773666"], ["updated_at", "2019-04-14 18:15:47.773666"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$pTKCCOOn8fBuJ7w8IDzfEOHhN5qdnnVPMi16NfcalrlRxVi3ugwB2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:47.928235"], ["updated_at", "2019-04-14 18:15:47.928235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$mYyHUye3KLshbKBVNYnvneVfqhP8QYOosd.6EgO5SXEnEmppJq3Nu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:47.934576"], ["updated_at", "2019-04-14 18:15:47.934576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$wPCyqFxVKa68W81pQgvcSum.GIBSaLb5F9w8pjn9Oox5aANtPlvhC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.939344"], ["updated_at", "2019-04-14 18:15:47.939344"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$62PT.FPN1ClSMLmaHNRuruR1IjHmfBgjx4rjZlh5a2Sj7A54HkikC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.944662"], ["updated_at", "2019-04-14 18:15:47.944662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$YRY0eg76EFqDV1XB/7hpNe9pmAmkU/e8w4QJyay..1Rbvt/38B.96"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.949988"], ["updated_at", "2019-04-14 18:15:47.949988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$AJ7FZZp.AoQzKfidusdNKuZRXQAJb/cmrrBIIA14UaY7CElDVqcB6"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.956877"], ["updated_at", "2019-04-14 18:15:47.956877"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$WJc5BUo0PyR1LEOeRIKS/.TWlrVc2yhjz5ytYFkTtQFGU2lxLqPNW"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:47.963206"], ["updated_at", "2019-04-14 18:15:47.963206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 317], ["active", "t"], ["created_at", "2019-04-14 18:15:47.966327"], ["updated_at", "2019-04-14 18:15:47.966327"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 318], ["active", "t"], ["created_at", "2019-04-14 18:15:47.969121"], ["updated_at", "2019-04-14 18:15:47.969121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 319], ["active", "t"], ["created_at", "2019-04-14 18:15:47.971696"], ["updated_at", "2019-04-14 18:15:47.971696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 320], ["active", "f"], ["created_at", "2019-04-14 18:15:47.974435"], ["updated_at", "2019-04-14 18:15:47.974435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.5ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
  [1m[35mSQL (3.8ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 29]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 30]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 31]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 32]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 314]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 315]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 316]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 317]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 318]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 319]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$Hw9/o025E4Ziyl2qO8NjI.QCZUBM.bQNoZGUnHTmxDdkuyNHOwaeW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:48.015392"], ["updated_at", "2019-04-14 18:15:48.015392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$hMkYijOOuCk6WJIjVINNLem0zncpVFeUxNsYEwhTWZBjS5TZDA3/u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:48.021311"], ["updated_at", "2019-04-14 18:15:48.021311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$YMPagl2HWJVCf9gO92E2e.9s4oUzg2VIBBeCRpTiYIiugaDV25/eO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.027072"], ["updated_at", "2019-04-14 18:15:48.027072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$RtVPfz4NwsuTIZJKd6mxo.x.wbTZcVM5QoDLM7MOjE0Yn7ePZ/uOG"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.032007"], ["updated_at", "2019-04-14 18:15:48.032007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$PliXy5kB37G/9.5ebBD3MeaBe3PsHvV9Y26892yHujuOFIrSNOvmC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.037459"], ["updated_at", "2019-04-14 18:15:48.037459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$ecGaYDsMz1.04L7oU6DNIeo1l9sCey7Tt/QhPL3JwlkbTzPaZMlYO"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.044914"], ["updated_at", "2019-04-14 18:15:48.044914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$jE1dLVgnThq/MzUg3hqQDug00qpYYETTQQ4PgaDQnjPGBcA/UuLMC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.050155"], ["updated_at", "2019-04-14 18:15:48.050155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 324], ["active", "t"], ["created_at", "2019-04-14 18:15:48.053051"], ["updated_at", "2019-04-14 18:15:48.053051"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 325], ["active", "t"], ["created_at", "2019-04-14 18:15:48.055966"], ["updated_at", "2019-04-14 18:15:48.055966"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 326], ["active", "t"], ["created_at", "2019-04-14 18:15:48.059035"], ["updated_at", "2019-04-14 18:15:48.059035"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 327], ["active", "f"], ["created_at", "2019-04-14 18:15:48.061796"], ["updated_at", "2019-04-14 18:15:48.061796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "f"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 327], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 33]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 34]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 35]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 36]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 321]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 322]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 323]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 324]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 325]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 326]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that alphabetical scope works. 
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$/D34dyLTRYnmEv7bSyN6M.Vodj4RWsD3vMLYH/HEft..y1QVSSYaS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:15:48.090724"], ["updated_at", "2019-04-14 18:15:48.090724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$VZglrcv43NgFlw88KlXVR.l.6rf5HhznsOkeTwpbckqkX1yACfuiq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:15:48.095432"], ["updated_at", "2019-04-14 18:15:48.095432"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$X8OUjApVeOlMMcdu9BCJGuHymtt5w/mlUyHHCD7/E4/qL3Rmy75g6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.100828"], ["updated_at", "2019-04-14 18:15:48.100828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$Jf2di0zcQSAUgSwmwb0bi.T3BCQ3c8s3SM1Unr2LYaJXeWZ3JJK3u"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.107196"], ["updated_at", "2019-04-14 18:15:48.107196"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$kzKr5hUqKa/qX0QGGVXJWOugyLC3Ykthe1npeze5JSjufBnz/gsMC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.113030"], ["updated_at", "2019-04-14 18:15:48.113030"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$jvvODvTSGr9fWTWS1lBzte6Jba2EqEGDa7Di1ipSLpNQ0n3VeiQ7e"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.117962"], ["updated_at", "2019-04-14 18:15:48.117962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$aGwnkQoDcdAtGoqOc97WvemjFE6iDvIK6d/DdZtnlnZg127VexG/G"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:15:48.122704"], ["updated_at", "2019-04-14 18:15:48.122704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 331], ["active", "t"], ["created_at", "2019-04-14 18:15:48.125417"], ["updated_at", "2019-04-14 18:15:48.125417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 332], ["active", "t"], ["created_at", "2019-04-14 18:15:48.128025"], ["updated_at", "2019-04-14 18:15:48.128025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 333], ["active", "t"], ["created_at", "2019-04-14 18:15:48.130496"], ["updated_at", "2019-04-14 18:15:48.130496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 334], ["active", "f"], ["created_at", "2019-04-14 18:15:48.132918"], ["updated_at", "2019-04-14 18:15:48.132918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 37]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 38]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 39]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 40]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 328]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 329]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 330]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 331]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 332]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 333]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:18:51.013167"], ["updated_at", "2019-04-14 18:18:51.013167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:18:51.018681"], ["updated_at", "2019-04-14 18:18:51.018681"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:18:51.026733"], ["updated_at", "2019-04-14 18:18:51.026733"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 91], ["created_at", "2019-04-14 18:18:51.031168"], ["updated_at", "2019-04-14 18:18:51.031168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 92], ["created_at", "2019-04-14 18:18:51.035754"], ["updated_at", "2019-04-14 18:18:51.035754"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 93], ["created_at", "2019-04-14 18:18:51.042863"], ["updated_at", "2019-04-14 18:18:51.042863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 37]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 38]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 39]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 91]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 92]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 93]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.4ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:18:51.071501"], ["updated_at", "2019-04-14 18:18:51.071501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.3ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:18:51.138925"], ["updated_at", "2019-04-14 18:18:51.138925"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$VDSs5tHm6mt2PRviEZ7NMeZxN5HLUx5isDmclo2Th.O5zqwouPk4a"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.354363"], ["updated_at", "2019-04-14 18:18:51.354363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$6T3Y404oFahuSy7HVGYAy.Bh0ZWRyBggRQhbTUsihax0ZTD319UOS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.360170"], ["updated_at", "2019-04-14 18:18:51.360170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$dVuWQ/ji5/OLFhhcnNoAN..ci/B/mekxBp3cmXfTO9zNUeddWxs0."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.365044"], ["updated_at", "2019-04-14 18:18:51.365044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$mtWHmNir3C0M70bSgJW3beZ7kchOaP8IKFdxugA4hNPLubKpsSCdq"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.372658"], ["updated_at", "2019-04-14 18:18:51.372658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$fXvlJqnvFATm1MzQ30HKF.NQEJPtWEYFmdVG/3tnUDOyPBdtaCvJG"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.378155"], ["updated_at", "2019-04-14 18:18:51.378155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$FX6t330gu524SihtQrFLaOV3dCPr9SSRgU1taBv.MT/LDW7qKoRIe"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.384636"], ["updated_at", "2019-04-14 18:18:51.384636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$jcaqjVcg2aHvbslAI9l.W.ajsXosKjUiYXoU0sJEizKcsvO1TZlbC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.392860"], ["updated_at", "2019-04-14 18:18:51.392860"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 338], ["active", "t"], ["created_at", "2019-04-14 18:18:51.400834"], ["updated_at", "2019-04-14 18:18:51.400834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 339], ["active", "t"], ["created_at", "2019-04-14 18:18:51.406621"], ["updated_at", "2019-04-14 18:18:51.406621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 340], ["active", "t"], ["created_at", "2019-04-14 18:18:51.410609"], ["updated_at", "2019-04-14 18:18:51.410609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 341], ["active", "f"], ["created_at", "2019-04-14 18:18:51.413161"], ["updated_at", "2019-04-14 18:18:51.413161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.5ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 41]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 42]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 43]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 44]]
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 335]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 336]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 337]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 338]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 339]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 340]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that proper name method works. 
-----------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$25eh1WvpzazpS/2SwSyT..e8mOm2pNeay9laOwIlzZnfwlhWtzRXa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.480380"], ["updated_at", "2019-04-14 18:18:51.480380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$SWncKnSvB99kp/mg6foQ3OU1F.ZWrzHidI9mC8y6Ie0n2shSihlgm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.487158"], ["updated_at", "2019-04-14 18:18:51.487158"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$rlvJIvkLcbb4gFWNmoT0.u2JTykpeEFWyxN2N4cpfhqhYGAAvJCOe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.494272"], ["updated_at", "2019-04-14 18:18:51.494272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$qCpl9KLJonqXdIeDZQE6AOI9J9Sv7.dEIRxdlf.PcPKpLox4L8H6W"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.499467"], ["updated_at", "2019-04-14 18:18:51.499467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$VNXviFq70fFkv4vICBxF6.1qzVQsE4FRp5MeHCjVRCJ79n9KmcFU6"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.507187"], ["updated_at", "2019-04-14 18:18:51.507187"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$P4nUY0WGXT1SF8Z9xZvfm.fFRL.s7yfKOrq1OIl0q3vDFfqgL2BYm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.515505"], ["updated_at", "2019-04-14 18:18:51.515505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$TH5/DOCB69kG6Vtd95zy6uXyVhUUyUSwsrP2gGqng3SpqpIBheATa"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.520581"], ["updated_at", "2019-04-14 18:18:51.520581"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 345], ["active", "t"], ["created_at", "2019-04-14 18:18:51.525555"], ["updated_at", "2019-04-14 18:18:51.525555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 346], ["active", "t"], ["created_at", "2019-04-14 18:18:51.528608"], ["updated_at", "2019-04-14 18:18:51.528608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 347], ["active", "t"], ["created_at", "2019-04-14 18:18:51.531100"], ["updated_at", "2019-04-14 18:18:51.531100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 348], ["active", "f"], ["created_at", "2019-04-14 18:18:51.533524"], ["updated_at", "2019-04-14 18:18:51.533524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.4ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 346], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 345], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 45]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 46]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 47]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 48]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 342]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 343]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 344]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 345]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 346]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 347]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
ParentTest: test_: within context should show that name method works. 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$5gM/HaUyXU/I3tpASDbLVuBSqAJwwc38ZcObrRMEMZ/jf07v12A06"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.576658"], ["updated_at", "2019-04-14 18:18:51.576658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$toQFcajm8nKwHnmTYGEig.hxsZqe6orcH0eUQLox/0/WF0rI5lOPy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.583072"], ["updated_at", "2019-04-14 18:18:51.583072"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$dcm5QiVwSKJespKDPxumD.uq94vgk4sZc7ORjAC121gzQHS6y1/Ae"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.592757"], ["updated_at", "2019-04-14 18:18:51.592757"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$jCZ0OTlwbpkYoqx.RbBID.O67KWp.BisQs0r4xFdxFcQAMveC.Rku"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.599032"], ["updated_at", "2019-04-14 18:18:51.599032"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$t/Psm.vf4M8we8vE9lZkYeoshETv09NakANYXo0ZFTTBWU6xDoVUC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.604731"], ["updated_at", "2019-04-14 18:18:51.604731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$2iLf3FaZ0KhZxZxTk61NDO89Oyjf9Iwiq0vjbKDXkAvScuzXpCnHS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.610611"], ["updated_at", "2019-04-14 18:18:51.610611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$NpmdVIt2MP12pIzVochoVu6aSspJupso3kyoITqbMzBzkZaKVw42W"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.617137"], ["updated_at", "2019-04-14 18:18:51.617137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 352], ["active", "t"], ["created_at", "2019-04-14 18:18:51.622159"], ["updated_at", "2019-04-14 18:18:51.622159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 353], ["active", "t"], ["created_at", "2019-04-14 18:18:51.625682"], ["updated_at", "2019-04-14 18:18:51.625682"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 354], ["active", "t"], ["created_at", "2019-04-14 18:18:51.630600"], ["updated_at", "2019-04-14 18:18:51.630600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 355], ["active", "f"], ["created_at", "2019-04-14 18:18:51.633828"], ["updated_at", "2019-04-14 18:18:51.633828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 353], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 354], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 49]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 50]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 51]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 52]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 349]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 350]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 351]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 352]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 353]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 354]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that alphabetical scope works. 
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$pbea5F87EBXNnedYANEnsu7XJE6JECv70jbTSy62wGWb.8LOYa0M."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.660543"], ["updated_at", "2019-04-14 18:18:51.660543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$lQIMzCipABAk5YTGkpXDtubzSVK2hhN2HdLbPIs9CSmQdRMst5e4i"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.673355"], ["updated_at", "2019-04-14 18:18:51.673355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$ANGJv0Mw4VgXKH42p2aaVu24bRulnlKJLOPNUmxvn6yy7SDaDsjKq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.679520"], ["updated_at", "2019-04-14 18:18:51.679520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$ZXuuqfJ1m1Tkmj/kMD/.F.nzkyZECt1eQg8tSRiBflpo8oO9ZNHVe"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.685358"], ["updated_at", "2019-04-14 18:18:51.685358"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$sHoPLhmqsMIITFwjT6rjs.GJEoC/GQq92VTWbX53PXNZB9yhSkfQW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.690978"], ["updated_at", "2019-04-14 18:18:51.690978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WInQRSbbLA68dmFQjw3RJelkQcbKnvitCV2qbhkgdp7fx7XX9/lTK"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.695997"], ["updated_at", "2019-04-14 18:18:51.695997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$VAFlao7hfq7pbNRtABmc8.6V/TNtBwWNTNU4So7ojKv9Z20tH8urO"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.700919"], ["updated_at", "2019-04-14 18:18:51.700919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 359], ["active", "t"], ["created_at", "2019-04-14 18:18:51.703790"], ["updated_at", "2019-04-14 18:18:51.703790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 360], ["active", "t"], ["created_at", "2019-04-14 18:18:51.706559"], ["updated_at", "2019-04-14 18:18:51.706559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 361], ["active", "t"], ["created_at", "2019-04-14 18:18:51.709014"], ["updated_at", "2019-04-14 18:18:51.709014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 362], ["active", "f"], ["created_at", "2019-04-14 18:18:51.711485"], ["updated_at", "2019-04-14 18:18:51.711485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 53]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 54]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 55]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 56]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 356]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 357]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 358]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 359]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 360]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 361]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$O./01QBlo6MNFLXJKOaqLOfYjUCtUhpmnVq4xX0rLrPda3W2yc1ie"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.734250"], ["updated_at", "2019-04-14 18:18:51.734250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$xwX5aIkgpkXPgZJPtNYGE.SMc3JrLK.fa7qH07d2QgwsFQLcivExW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.738812"], ["updated_at", "2019-04-14 18:18:51.738812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$12ruHj2WBdvRP3bD5JYD8OchIpvJTAi91hxpwSrQjUPH9fVzXur.6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.743637"], ["updated_at", "2019-04-14 18:18:51.743637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$2ITnVONdylzOEw97pWUnvuozPbGYGprIGntQjhvZVZGgU7avycfJi"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.748555"], ["updated_at", "2019-04-14 18:18:51.748555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$9qsF5kIKFrSzCPSjc7MHMeayAh0uLTZiaAyMeaHsgjaUmlMJe2H.K"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.754044"], ["updated_at", "2019-04-14 18:18:51.754044"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$VsjSolWd/v4slLtBdOSGdualpTe1XP0FdMFelOY0iIRxASreu6o9K"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.761110"], ["updated_at", "2019-04-14 18:18:51.761110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$QGwDW8Hrm4mSH7tfrbaA2.KFBYoq2Q4I.QagI6sOHmWctw2dpbhym"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.765816"], ["updated_at", "2019-04-14 18:18:51.765816"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 366], ["active", "t"], ["created_at", "2019-04-14 18:18:51.769814"], ["updated_at", "2019-04-14 18:18:51.769814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 367], ["active", "t"], ["created_at", "2019-04-14 18:18:51.772363"], ["updated_at", "2019-04-14 18:18:51.772363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 368], ["active", "t"], ["created_at", "2019-04-14 18:18:51.774981"], ["updated_at", "2019-04-14 18:18:51.774981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 369], ["active", "f"], ["created_at", "2019-04-14 18:18:51.777503"], ["updated_at", "2019-04-14 18:18:51.777503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.4ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "f"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 369], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 57]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 58]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 59]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 60]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 363]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 364]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 365]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 366]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 367]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 368]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$YIZZ/Y/IFjA8WQ4ULTkVzuM4dzJUnuLg9IS/3qQQBptGWkq2oShPS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.841498"], ["updated_at", "2019-04-14 18:18:51.841498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ru9QN3EyFnYQG2OxpybyneF5S8l1SeJDJE62ymkk38RXj6byeJ2by"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.848423"], ["updated_at", "2019-04-14 18:18:51.848423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$NjpmK83Z6dVvoaQxDm/7Ke8Jr4kEVKum9KfjacEzV.bZr/b8yOIwO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.853222"], ["updated_at", "2019-04-14 18:18:51.853222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$w.I2OR5lk9HOuywUt7fBd.TQLr.c6Nr7vqjX9CvRqqc.EGIeVwXki"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.858938"], ["updated_at", "2019-04-14 18:18:51.858938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$tWtaG5VAnReYc5NOWpngyOtlcCEBR7gS9L4j7ZcgsppkLkvQVHDDW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.863954"], ["updated_at", "2019-04-14 18:18:51.863954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$kk5KjY1VsQPf.G.snKyXauhhXJEc8si/1TMD6QIJ3BHrGA1gdKH9u"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.869808"], ["updated_at", "2019-04-14 18:18:51.869808"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$828lDcWZCwj4IGKxBAJFEO5UPYt5RXu/k7im51L2jbhiJvVl2CNLy"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.875257"], ["updated_at", "2019-04-14 18:18:51.875257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 370]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 371]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 372]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 373]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 374]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 375]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$nVSjJLAzKEYQc6ap5mONW.PxNtZWfEOv3jmJriPdVw9q8jXTOfaEq"], ["created_at", "2019-04-14 18:18:51.921877"], ["updated_at", "2019-04-14 18:18:51.921877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$snY845hEuPykpOKXYh2Zv.MadhI76Nnx0eJKUNJgm3APvprV53Pkm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.934872"], ["updated_at", "2019-04-14 18:18:51.934872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$3Jequtn1M.679CP5p13kouv.3L88bmwqOp8pSaM29BN3EV0JxLjWi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.939578"], ["updated_at", "2019-04-14 18:18:51.939578"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$2xUvavw7loXKyvaDVQVKTOP6bz59HrPe2TH3psBnDUxWgZ00DHGmG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.944777"], ["updated_at", "2019-04-14 18:18:51.944777"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$q2SREpJ4dwRsXpyFKlbqxOg3X.zZkBzMBLvUjKOrtBqeWUD5kMD1u"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.949609"], ["updated_at", "2019-04-14 18:18:51.949609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Ta16B2nkPh.JsPlGC7p5O.JX/tUp6uVPH6Keye2lPSvWEuPAoeAkG"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.957314"], ["updated_at", "2019-04-14 18:18:51.957314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$cxF8u.1cYmMrD5csO0OC1uj8a7iQ7DNPQB3AdJJl7yykb/OWSsnKG"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.962464"], ["updated_at", "2019-04-14 18:18:51.962464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$w18YVY/wlM4xlQ0Rl.nTwO3j8p4GSFX7Notu42yC/7DahrZ88Qo/O"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:51.968238"], ["updated_at", "2019-04-14 18:18:51.968238"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 378]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 379]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 380]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 381]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 382]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 383]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$fsdDpcKeX2irPA3eTPdks.qMa/kFqvIHP20Sxmerv17aE2.uMdMG."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:51.985491"], ["updated_at", "2019-04-14 18:18:51.985491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$PUTi.BOUOXsiJEawbr5eJ.Z7n55fHH4KlJZly4o0y4fNAG4Zhv06C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:51.993658"], ["updated_at", "2019-04-14 18:18:51.993658"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$0b7pVkVyLUHAX0RuLwfU9.S871jH0X9/w223oRrB1vquCTgOg3a/G"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.002387"], ["updated_at", "2019-04-14 18:18:52.002387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$DN76tIm25PV685iKEv/E5OoO8H5xHo/T8h5N9R4rrUkJ.rQxzEM82"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.010059"], ["updated_at", "2019-04-14 18:18:52.010059"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$j1kz8VjajIhgEr8TFHoR.ONRUf23EodW1yVnjMwGVHH7e00EI5XfS"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.017325"], ["updated_at", "2019-04-14 18:18:52.017325"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$Nkww5juYw8P7yp819V2lgOs3g9kT0hljow6fVfcl0m1Oq1YtU/3Je"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.022920"], ["updated_at", "2019-04-14 18:18:52.022920"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$uXcNALeCmXXxhNnI4/9wru9NkfBo5KGUyB/8uJ7po0Go7FPwLaT.u"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.028380"], ["updated_at", "2019-04-14 18:18:52.028380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 385]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 386]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 387]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 388]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 389]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 390]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$UjqjnjJQOx4e53K/ZcIC.eXzjbq4VGO3.UhiZW0s4.XTjOrHkzdci"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:52.059185"], ["updated_at", "2019-04-14 18:18:52.059185"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$h2oNM7aXTiNomOS9sDOdV.dp/0AsQFCR6FLIAcL2IFScPyvg9VrzS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:52.067908"], ["updated_at", "2019-04-14 18:18:52.067908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$B4.KE1gLaf1Zv0Xny5PzROVvTUEM.WyvP5zg1Eu4VITSenlndoLQa"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.074415"], ["updated_at", "2019-04-14 18:18:52.074415"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$PqGxeJnv5nzRmZqhUNqUF.BcegKiXW0c.1Pt.eY4d4vimTwDu138S"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.083777"], ["updated_at", "2019-04-14 18:18:52.083777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$2q0ViwWxzg10HuM8R/RIG.rY6bdbybdpGzT41cs9DGGaAcjQn.sjq"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.090707"], ["updated_at", "2019-04-14 18:18:52.090707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$xSJquBBGPf5Rkfs3TV/kPOyPpXjFuFWOVolymIc0GsfG7mSY1eyFe"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.095866"], ["updated_at", "2019-04-14 18:18:52.095866"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$XkNDQGFH.FwcSK1kp1qeH.dRo3t0NjeXVMANRr4.k3OaffL0zKZ8a"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.105135"], ["updated_at", "2019-04-14 18:18:52.105135"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 392]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 393]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 394]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 395]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 396]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 397]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$WFn6NruaqzhZ4ppViQv2gOYC37F01V6ef5EQpLCmEplRrP5Z2PjYq"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:18:52.147411"], ["updated_at", "2019-04-14 18:18:52.147411"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$gvsET4iw7gY7p.zWWCtR6eUrlx6Rf5fxXmnxdjVSsp/ezH3idRRQ2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:18:52.152401"], ["updated_at", "2019-04-14 18:18:52.152401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$NJVdjFqVdlhSP3zzuIe1suO6PRyrQDtB35za/R/45gBxOBSgq9F.2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.158887"], ["updated_at", "2019-04-14 18:18:52.158887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$MQlIxCtSngcLbGP.5Mu7zO70cYNq/er..nhQtlpTBvbXJHYtQcwT6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.164466"], ["updated_at", "2019-04-14 18:18:52.164466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$OiaELLaKsIfM3qk1RXpTC.NxsODqZKCg9Jfe6Q3QP/KoqkWS8X3Ee"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.170755"], ["updated_at", "2019-04-14 18:18:52.170755"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WXy8fbNJj1bR0dC4oogeKumDuByA/JblpRVR94wDOPjFtDO6p6Xo6"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.176445"], ["updated_at", "2019-04-14 18:18:52.176445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$H10QXjYR3x6PABSXRLE1huVLhn0FduWK88D6z3lyKG/dR8P3nQYLC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:18:52.181153"], ["updated_at", "2019-04-14 18:18:52.181153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 399], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 399]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 400]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 401]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 402]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 403]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 404]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.3ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:18:52.253890"], ["updated_at", "2019-04-14 18:18:52.253890"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:18:52.269425"], ["updated_at", "2019-04-14 18:18:52.269425"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:18:52.275708"], ["updated_at", "2019-04-14 18:18:52.275708"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:18:52.281236"], ["updated_at", "2019-04-14 18:18:52.281236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 95]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 96]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 97]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:18:52.292033"], ["updated_at", "2019-04-14 18:18:52.292033"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:18:52.296552"], ["updated_at", "2019-04-14 18:18:52.296552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:18:52.300102"], ["updated_at", "2019-04-14 18:18:52.300102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 98]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 99]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:19:00.362068"], ["updated_at", "2019-04-14 18:19:00.362068"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:19:00.396126"], ["updated_at", "2019-04-14 18:19:00.396126"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:19:00.402056"], ["updated_at", "2019-04-14 18:19:00.402056"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:19:00.407932"], ["updated_at", "2019-04-14 18:19:00.407932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 101], ["created_at", "2019-04-14 18:19:00.413517"], ["updated_at", "2019-04-14 18:19:00.413517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 102], ["created_at", "2019-04-14 18:19:00.418222"], ["updated_at", "2019-04-14 18:19:00.418222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 103], ["created_at", "2019-04-14 18:19:00.422425"], ["updated_at", "2019-04-14 18:19:00.422425"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (1.2ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 42]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 43]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 44]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 101]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 102]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 103]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (4.5ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:19:00.458298"], ["updated_at", "2019-04-14 18:19:00.458298"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:19:00.618177"], ["updated_at", "2019-04-14 18:19:00.618177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:19:00.622507"], ["updated_at", "2019-04-14 18:19:00.622507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:19:00.625619"], ["updated_at", "2019-04-14 18:19:00.625619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 104]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 105]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 106]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:19:00.644366"], ["updated_at", "2019-04-14 18:19:00.644366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:19:00.656106"], ["updated_at", "2019-04-14 18:19:00.656106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:19:00.659300"], ["updated_at", "2019-04-14 18:19:00.659300"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:19:00.664972"], ["updated_at", "2019-04-14 18:19:00.664972"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 108]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 109]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 110]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$nJup4xXeON5oaE6G16Cx8.xdKYDYsH5qYi8k9uinXPSHD58q/Ohpu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:00.708838"], ["updated_at", "2019-04-14 18:19:00.708838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ni2Pci70Mj2ijl1/z1j9HusNp26WOf6Fg3CnOmVkedEE7oI4K4Ye6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:00.715288"], ["updated_at", "2019-04-14 18:19:00.715288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$dYvAWG8ryEn5Fn.9kVDCxugUs.CcawiI1RrgV9zNb6HfG9BO1fgCm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.722918"], ["updated_at", "2019-04-14 18:19:00.722918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$2dBvRvCIAO59kxIHVlwzP.iDc0b06sB.UHmCDTwFaCB4d.NZDQuni"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.732034"], ["updated_at", "2019-04-14 18:19:00.732034"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$DEZFdvx/J.w5AkF7dli3xO8GW6pEZz/Cs7c.pdCP223ZGKHN5tT6."], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.738423"], ["updated_at", "2019-04-14 18:19:00.738423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$WPa8PTH0E7u.fZp2b10T3.D5yO1t/Cxe/ukGSNEBKolojkGJjZ0mi"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.744218"], ["updated_at", "2019-04-14 18:19:00.744218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$YIpWGhUGVo1erhfQFkWwCOn6f/5lAmiM.NLlFdyH2mfhhmeNsVoGG"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.750107"], ["updated_at", "2019-04-14 18:19:00.750107"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (4.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 406]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 407]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 408]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 409]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 410]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 411]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$.tEXFT34YhZkKpBTphIeVecR/DnRrVmjxpir1U8qpqilsJAMeVdtm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:00.782857"], ["updated_at", "2019-04-14 18:19:00.782857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$jNyBEsV3BCQfg0uWjo/l8.dleM.uZXJ7s3djZnpKekzgyRsPWHR/u"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:00.787652"], ["updated_at", "2019-04-14 18:19:00.787652"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$bcIT/3pNZ74G5PKKbuE2P.i06vw8SIFdyYaIj5wtYCuLpwv1aApGO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.793568"], ["updated_at", "2019-04-14 18:19:00.793568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$4/fNnhtwVhONB29lHrGcS.Ij5Es0L3G/lKFvkFCVji2WFf63GhzN6"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.798966"], ["updated_at", "2019-04-14 18:19:00.798966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$I4VwD2Z61Y.tTNmoeTKxEOVg1lYT0DLBOrHTq2.zKI4SpKum0jKvy"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.803860"], ["updated_at", "2019-04-14 18:19:00.803860"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$X90j3ekJmTYwyiI.lB8QbeSkiIyVHvsVRRj76.xic/mB8UyP/iJIS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.808854"], ["updated_at", "2019-04-14 18:19:00.808854"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$hUYABEffMgMq7fSNBQGyheUs6Ou5dWT9cDcI6OH1OHZSUEGAATpmi"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.813739"], ["updated_at", "2019-04-14 18:19:00.813739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 413]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 414]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 415]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 416]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 417]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 418]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$tPRis1td.PkZQQ3BlJFJm.jDubUHxbtP4SUNLwhUcqIA2AuSK0aHO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:00.853553"], ["updated_at", "2019-04-14 18:19:00.853553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$b3PGH1cLq3RnrocxzHbuduxXrBMIbh4x9220C8NA4f7G2VtyKfznK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:00.860760"], ["updated_at", "2019-04-14 18:19:00.860760"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$u6HbgaUQs2WcQ/6uLYmlmesCpFQvPJwnpUeTLgu5zRYAlMJshpWJS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.867336"], ["updated_at", "2019-04-14 18:19:00.867336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$bf1oLXVO08olsQ0OGsI6GOlvZOOadvZ01R0FKkYsMc0SF.MKXGk6C"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.872393"], ["updated_at", "2019-04-14 18:19:00.872393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Q3No1NwIDaTQeiIzAfvJNuVOlk5PAZBWPMDi8E9nJUtKfjHyapGwe"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.878266"], ["updated_at", "2019-04-14 18:19:00.878266"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$9niIeRkkgXjHlGuOaASxHuibkPR376ffh4tXUbo91gx0t52SsljTG"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.884180"], ["updated_at", "2019-04-14 18:19:00.884180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$m86MqPuHNFahsuWvVc3VK.G0ccafAPzDTudbpwyVWDokB3NCzSydS"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.888694"], ["updated_at", "2019-04-14 18:19:00.888694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 420], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 420]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 421]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 422]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 423]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 424]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 425]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$1r7RpJ.wqgkvAWKDX5GpKOoJXCvo/V4NCaeAnaj56ewW6SBGHcv82"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:00.904952"], ["updated_at", "2019-04-14 18:19:00.904952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$P97T2l4w7ckCZ0em6Wslr.vrS7OW5BKhuWM.c0zn3MjmlEkrF6mNu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:00.909600"], ["updated_at", "2019-04-14 18:19:00.909600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$E2.VX9/tmF2kDYFYshYsBeGCoaah3KMARLxQIEiyAXDLIOk1tMfmG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.914521"], ["updated_at", "2019-04-14 18:19:00.914521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$h3IKfRUpaAUFk1rjYV1McOQcmgWTf4vxzSw5NDU2nAFeiMnRekaZu"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.919172"], ["updated_at", "2019-04-14 18:19:00.919172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Ua.wzTQPc3G013vpEHeJ1OaUXOfAGfpF1lIIS.WTnDVU9hB.J.G2q"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.925504"], ["updated_at", "2019-04-14 18:19:00.925504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$7jEKYTwcqpskQn3f1TUD6.sr0O8qYdO.G9k20njg/vL95TgNEMAzS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.931136"], ["updated_at", "2019-04-14 18:19:00.931136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$ij79urQV660eiONzIU1SuuOpgw3Nz105y.fuo.YQZVeOdO.xts2iK"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:00.936159"], ["updated_at", "2019-04-14 18:19:00.936159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 427]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 428]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 429]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 430]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 431]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 432]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$MhayfVcwvFqX8OcPMCbezOcmAS32OdweV9WRGgR/Iff..EtMRhsMe"], ["created_at", "2019-04-14 18:19:00.972471"], ["updated_at", "2019-04-14 18:19:00.972471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$GD4Di9GW4phaJO3AgIikQeJDq9lYKztyS4pAbTCQ2shVMpnikC3e."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.026335"], ["updated_at", "2019-04-14 18:19:01.026335"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ciY447RM3iRb6AD.TizDpuUNXNC6ccUyfRqVpHCepEog.pmVXVAxe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.033551"], ["updated_at", "2019-04-14 18:19:01.033551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$nurIyClYCkLFL.0El9Da9eNihX.ojQlz8wyYa95uapaVd6BrAz0Xu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.038365"], ["updated_at", "2019-04-14 18:19:01.038365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$DuJ8RH.GvVbuFfuyOuWNq.g8VxGV8791O/reS7oERf05Cca2HZitK"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.043132"], ["updated_at", "2019-04-14 18:19:01.043132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$HDsZoAl4YsPE15hOpeG6y.FDEPP3i3f/FxLGDXnFj8oPYG14d17fi"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.048376"], ["updated_at", "2019-04-14 18:19:01.048376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$VDVQ7Zotcce1sOOfdWqpveyD.BqxpaMRWgQmf/vitrNAw1DQDnP3S"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.054813"], ["updated_at", "2019-04-14 18:19:01.054813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$For.aZ02ItNx8mTT.eh6SO5ojxtq3G2maSmCtGpL850lP9ZLpFl26"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.059614"], ["updated_at", "2019-04-14 18:19:01.059614"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 435]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 436]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 437]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 438]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 439]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 440]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
ParentTest: test_: within context should show that name method works. 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$ZBJ/IEFhv8DB4/JeGmUFc.SmypFz4YWoiRTEhnfRht7432WXSji2e"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.149306"], ["updated_at", "2019-04-14 18:19:01.149306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9bi1Xvg7XK7ig81SXOXkNuvAeOMFKR/pL1.D3tsJPc9XukUMhNaDu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.154703"], ["updated_at", "2019-04-14 18:19:01.154703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$24pexazt/JzUbD775Ng0We1qU0QweAdEjNbTlWETZ/vd.K4SMvqjK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.160866"], ["updated_at", "2019-04-14 18:19:01.160866"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$fGFGJp7plk.YKyyo2NTpOOOtD93pmKVLon0jelqqDeuSkL.c1hVsC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.169605"], ["updated_at", "2019-04-14 18:19:01.169605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$RQeWm4yF/3smetjbnfm.xeoaELeXUnFdf10u3owTOLNf8YsDAmL12"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.174211"], ["updated_at", "2019-04-14 18:19:01.174211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$o/.9VUXuVRHTroOrrIqQgupp.BEVfId8rbvHFxfh5TeKeNUzNkDdG"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.178879"], ["updated_at", "2019-04-14 18:19:01.178879"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$xW2sRjirXpnRxE5fhxHPyul7qisE8j7mxvQsX1FDc2UpZJDfvNiFi"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.183623"], ["updated_at", "2019-04-14 18:19:01.183623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 445], ["active", "t"], ["created_at", "2019-04-14 18:19:01.186838"], ["updated_at", "2019-04-14 18:19:01.186838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 446], ["active", "t"], ["created_at", "2019-04-14 18:19:01.189667"], ["updated_at", "2019-04-14 18:19:01.189667"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 447], ["active", "t"], ["created_at", "2019-04-14 18:19:01.192095"], ["updated_at", "2019-04-14 18:19:01.192095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 448], ["active", "f"], ["created_at", "2019-04-14 18:19:01.194528"], ["updated_at", "2019-04-14 18:19:01.194528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.6ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 446], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 445], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 448], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 447], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 61]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 62]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 63]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 64]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 442]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 443]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 444]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 445]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 446]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 447]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$ncHF8bTCAjobU8h9Gt4nLuqX0tT7icELeJBq3tsfn/kkTJ3LfhlO6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.223493"], ["updated_at", "2019-04-14 18:19:01.223493"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$U5RLZP2CGbIrbptweGK71ehimiABkN4vcnz/lxzdBbH3QBN4Kgau."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.228254"], ["updated_at", "2019-04-14 18:19:01.228254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$htyAmEmKIkA/jpoCvMytL.fcoge3Dy4HTkbUaXN.faU0vDpQd2zLe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.232905"], ["updated_at", "2019-04-14 18:19:01.232905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$2b4Cs/gsFEJx3MO6/AmCdOf.RyZoYvEh.T5e/0iJu48jftMhjea5C"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.238323"], ["updated_at", "2019-04-14 18:19:01.238323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$A0ZykD1c0EMDCVBdBQgLgOP5nTgW3ZzX5nTeVeNpLYH2S5yjhLEeK"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.244736"], ["updated_at", "2019-04-14 18:19:01.244736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$xakplDzNybdUxdKdZKtO0ejN7YKF0aylNEcIqUTj2vLiBFn3f23t2"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.250784"], ["updated_at", "2019-04-14 18:19:01.250784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$7Klg.yoI.X.Z4cjFm8C4GulzT27e3SyOTXNNCa.TMo04ZVInmvjKu"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.255474"], ["updated_at", "2019-04-14 18:19:01.255474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 452], ["active", "t"], ["created_at", "2019-04-14 18:19:01.258223"], ["updated_at", "2019-04-14 18:19:01.258223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 453], ["active", "t"], ["created_at", "2019-04-14 18:19:01.260707"], ["updated_at", "2019-04-14 18:19:01.260707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 454], ["active", "t"], ["created_at", "2019-04-14 18:19:01.263204"], ["updated_at", "2019-04-14 18:19:01.263204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 455], ["active", "f"], ["created_at", "2019-04-14 18:19:01.265625"], ["updated_at", "2019-04-14 18:19:01.265625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 453], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 452], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 454], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 65]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 66]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 67]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 68]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 449]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 450]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 451]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 452]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 453]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 454]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that proper name method works. 
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$Nge//GhcBry914IkthUEqO.RQ2zFq7KnfTL/7QMH7/uP7QBPekK1K"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.287228"], ["updated_at", "2019-04-14 18:19:01.287228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$4FYiVZd5RVupfRCvroHX9.VA/Tmp/Pd6BuxzFKWJ6nK2m9n4CGTf."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.292099"], ["updated_at", "2019-04-14 18:19:01.292099"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$nSu4n7Inhh69ZHLnqXbAKeo8jN5lpE3NlDM4cETi2wYxVo/L3TvOK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.297115"], ["updated_at", "2019-04-14 18:19:01.297115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$ep2o/8EPKxowfSfeZSppeeXiTmHj6tQPcyDUnxQ96e4la3QjyURsG"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.302452"], ["updated_at", "2019-04-14 18:19:01.302452"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$qnmSLdhN2vDmqrExtsL16OfMwrgSPnCTwQWTgkaitUzYtLuCE57ym"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.310486"], ["updated_at", "2019-04-14 18:19:01.310486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$3GNXfbpqtP4rq3g2kjwSHekF8WQ5T3BxRD6xdk0QnUwrmn8x.Cqya"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.315592"], ["updated_at", "2019-04-14 18:19:01.315592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$a6wJzqU3UxUb3iNzRU0LuOk9z6OxOG6wht5HknDErK.4kEbJa00Gq"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.320301"], ["updated_at", "2019-04-14 18:19:01.320301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 459], ["active", "t"], ["created_at", "2019-04-14 18:19:01.323012"], ["updated_at", "2019-04-14 18:19:01.323012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 460], ["active", "t"], ["created_at", "2019-04-14 18:19:01.325423"], ["updated_at", "2019-04-14 18:19:01.325423"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 461], ["active", "t"], ["created_at", "2019-04-14 18:19:01.327745"], ["updated_at", "2019-04-14 18:19:01.327745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 462], ["active", "f"], ["created_at", "2019-04-14 18:19:01.330988"], ["updated_at", "2019-04-14 18:19:01.330988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 460], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 459], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 462], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 69]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 70]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 71]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 72]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 456]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 457]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 458]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 459]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 460]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 461]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$kp2USKk9VCc4jSu.3pKskOuvch3r1wTxLvnLFoUwYTNMcGtB3HtgS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.354865"], ["updated_at", "2019-04-14 18:19:01.354865"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$NXT6xeeYs9cAlo4wlC7kXOE59QNs3i3XiY9/s2JUgdVkgnpMU.Iwy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.359535"], ["updated_at", "2019-04-14 18:19:01.359535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$.YKgg1HcHjzW5i72Fbl6/ejUG73IijB.Uw2WDFYOOyV4MactV1HVW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.364411"], ["updated_at", "2019-04-14 18:19:01.364411"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$lZNRc90TLzDMN4ZWyFxkJuVSvrC7Vvd7kiZ6.DLATWXG/gXwWQN6C"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.369442"], ["updated_at", "2019-04-14 18:19:01.369442"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$jHzN5d4mfoe2yl3K8oe8POnT23GGAU0Ulw3gaS49p4u33ts1MWzBm"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.375673"], ["updated_at", "2019-04-14 18:19:01.375673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$dZIm28GFNmsRjCQbGrHtiuX/Hperk/NwYq.hZrv0uVAPeL7vN57oa"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.381504"], ["updated_at", "2019-04-14 18:19:01.381504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$836BEwTGBIUv5vpKg5c4KONrZW26nNU.zHCpi3ttjNWzzlWRCMDuu"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.386437"], ["updated_at", "2019-04-14 18:19:01.386437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 466], ["active", "t"], ["created_at", "2019-04-14 18:19:01.389179"], ["updated_at", "2019-04-14 18:19:01.389179"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 467], ["active", "t"], ["created_at", "2019-04-14 18:19:01.391607"], ["updated_at", "2019-04-14 18:19:01.391607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 468], ["active", "t"], ["created_at", "2019-04-14 18:19:01.393999"], ["updated_at", "2019-04-14 18:19:01.393999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 469], ["active", "f"], ["created_at", "2019-04-14 18:19:01.396417"], ["updated_at", "2019-04-14 18:19:01.396417"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "f"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 469], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 73]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 74]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 75]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 76]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 463]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 464]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 465]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 466]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 467]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 468]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that alphabetical scope works. 
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$sBwUEW2Uh2T1TkwQWrCHmunR61TReIEyZureOkYQ9ntC.w5zq7KFS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:19:01.421137"], ["updated_at", "2019-04-14 18:19:01.421137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$hRZhjTiO0Dvj0IRFkPKbRe5gLu441WbvS5KEyX7.Y8AWb3DEqOiGy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:19:01.425804"], ["updated_at", "2019-04-14 18:19:01.425804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$iBx4vLBXlNlQ5Spwy2DsJegYa5NENGx7CSi/SJ8OV0UHBGDeJfGOi"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.430908"], ["updated_at", "2019-04-14 18:19:01.430908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$ZghnUpDK1y3MeGcPQ/9bdepdj817GeRn.21tMa3ncFsUwfer.o8ZW"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.436100"], ["updated_at", "2019-04-14 18:19:01.436100"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$QgzXPorRxRbesoDC6QZk2uXdG2z9B2ZQKqDTrQp93tTKZaV.mdZ9W"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.444344"], ["updated_at", "2019-04-14 18:19:01.444344"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$ld10MRa9a5kPpYTU4mQdze1uk3dhdAlHObN30u8v2leHHCEDr3oUy"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.450139"], ["updated_at", "2019-04-14 18:19:01.450139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$v58o/AyJPAdUw.WuVGPD8.G0KRSB9EUFzf2XlsagBLwsJpvoDKkri"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:19:01.454864"], ["updated_at", "2019-04-14 18:19:01.454864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 473], ["active", "t"], ["created_at", "2019-04-14 18:19:01.457653"], ["updated_at", "2019-04-14 18:19:01.457653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 474], ["active", "t"], ["created_at", "2019-04-14 18:19:01.460102"], ["updated_at", "2019-04-14 18:19:01.460102"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 475], ["active", "t"], ["created_at", "2019-04-14 18:19:01.462508"], ["updated_at", "2019-04-14 18:19:01.462508"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 476], ["active", "f"], ["created_at", "2019-04-14 18:19:01.464858"], ["updated_at", "2019-04-14 18:19:01.464858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 474], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 473], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 476], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 475], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 77]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 78]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 79]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 80]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 470]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 471]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 472]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 473]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 474]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 475]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should require camper_id to be set. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should belong to camper. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTest: test_: CamperCampBadge should have many camper_camp_badge_tasks. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that alphabetical scope works. 
-----------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$7ATg5FXlIQUz7b6hYRu8duwpmoVmNQyD4KSyQSFVlAJwPj58Kjm8."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.189859"], ["updated_at", "2019-04-14 18:21:24.189859"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$D5O8eIv8FWvchzKiuloXhe73bL3i9rS0m/tE7te5bRCK7LzIXQXwW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.197329"], ["updated_at", "2019-04-14 18:21:24.197329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$kpFGknTG3zboJeKVGT0tYOJUwm1z/pdlhOdanULnSAahw.0aau0Sy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.202117"], ["updated_at", "2019-04-14 18:21:24.202117"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$8YHqG0u566Fb16mmZEm.TOx6yJ8nJV5xcXr6ahZboXmQIPsG6NYAG"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.207127"], ["updated_at", "2019-04-14 18:21:24.207127"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$WmQ2568drZyoLoFo5GaYQOkHVhMs2KQx2f1SotmwW2EqvV/IzNPhO"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.212200"], ["updated_at", "2019-04-14 18:21:24.212200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$xATPOl0SyW/f1MYELMdM0Ow8OYz6OchO99O6Xk/spdPDV3aDcqEIm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.220357"], ["updated_at", "2019-04-14 18:21:24.220357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$pkW7vPgeC3JSv6LXgkIptO.XbRRyByTWpFRI8D4eAs6SMub0kDrgW"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.224982"], ["updated_at", "2019-04-14 18:21:24.224982"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 480], ["active", "t"], ["created_at", "2019-04-14 18:21:24.239536"], ["updated_at", "2019-04-14 18:21:24.239536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 481], ["active", "t"], ["created_at", "2019-04-14 18:21:24.244549"], ["updated_at", "2019-04-14 18:21:24.244549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 482], ["active", "t"], ["created_at", "2019-04-14 18:21:24.247070"], ["updated_at", "2019-04-14 18:21:24.247070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 483], ["active", "f"], ["created_at", "2019-04-14 18:21:24.249578"], ["updated_at", "2019-04-14 18:21:24.249578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (3.1ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 481], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 480], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 483], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 482], ["LIMIT", 1]]
  [1m[35mSQL (3.4ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 81]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 82]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 83]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 84]]
  [1m[35mSQL (5.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 477]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 478]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 479]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 480]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 481]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 482]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 100. 
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: within context should show that active scope works. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$YzGq3aGEUmotpY0mAafdMul2OtD5udzK62aFtCMrT8RzFY9kA0XLW"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.302257"], ["updated_at", "2019-04-14 18:21:24.302257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$k0pxT2iRLss9z6rUvcag4On9BjLlnV0vEHd2OMPeQ744OsmkNIes."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.307316"], ["updated_at", "2019-04-14 18:21:24.307316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$aPe2jXhy.N.y7ofq0ugAcehB9RYzg8SgZAW0rY3LW7Mr7k.XmRhtm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.313296"], ["updated_at", "2019-04-14 18:21:24.313296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$vF6UaUNk/yiPvO9F/RaWWeYZQddVTOSZjY92yatE77aptorT8wuEa"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.321201"], ["updated_at", "2019-04-14 18:21:24.321201"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$2n3I5CT2iBMSUm9pvVhcH.z9oxz9lVdzvv6Gx3sm2tTm9TiJGWxcG"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.328381"], ["updated_at", "2019-04-14 18:21:24.328381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$YTX8KRH6FgSdDfjvyR6VMeKQwj/B1eN8I8YLsIJJMO/4r8pFnooWi"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.333681"], ["updated_at", "2019-04-14 18:21:24.333681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$7W9DhzyRhrdfv.Xgqzc8d.tf2yaKsCYV.s65cA1zfUsFufQC6Jtvi"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.338785"], ["updated_at", "2019-04-14 18:21:24.338785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 487], ["active", "t"], ["created_at", "2019-04-14 18:21:24.341692"], ["updated_at", "2019-04-14 18:21:24.341692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 488], ["active", "t"], ["created_at", "2019-04-14 18:21:24.344383"], ["updated_at", "2019-04-14 18:21:24.344383"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 489], ["active", "t"], ["created_at", "2019-04-14 18:21:24.346891"], ["updated_at", "2019-04-14 18:21:24.346891"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 490], ["active", "f"], ["created_at", "2019-04-14 18:21:24.349300"], ["updated_at", "2019-04-14 18:21:24.349300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "t"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "t"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 488], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 487], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 489], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 85]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 86]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 87]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 88]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 485]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 486]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 487]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 488]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 489]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
ParentTest: test_: within context should show that proper name method works. 
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$uPvlTDM3zouKzOUuuJbjre.ROLgGx0/VC4E3KEIqJhmNKe4i1cMp2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.368922"], ["updated_at", "2019-04-14 18:21:24.368922"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$EnbhUy3XanFNurq/w1d8iuX1pi3vGAFl7ksviy9qbQM1yjtVS8XNC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.375047"], ["updated_at", "2019-04-14 18:21:24.375047"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$ymgsyErdO6dRcScXgrSD8.kUoT3IvIgr/VYJsoCgacWoOD0C.FZvG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.382900"], ["updated_at", "2019-04-14 18:21:24.382900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$1takAbgddpTnrEvYxSwmIObqBCbwH2sH.TiV/zdAh9Q8kbaISvp1y"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.388289"], ["updated_at", "2019-04-14 18:21:24.388289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$Pj4dfsvwkkJthvy0Rn1y.uot9raw33ereUxvZyhobyV2oLsizVMeW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.395019"], ["updated_at", "2019-04-14 18:21:24.395019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$FuKdHnoMUYjabPWeEMeHGeuDwLwCHcAh98pB9AtPptSnZauRuEuqq"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.400045"], ["updated_at", "2019-04-14 18:21:24.400045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$OMb1YVFUv/2G/BaL5YzwUOYJHJfr5goSu89iI45EBCCVN4a6oYMeC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.405192"], ["updated_at", "2019-04-14 18:21:24.405192"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 494], ["active", "t"], ["created_at", "2019-04-14 18:21:24.410585"], ["updated_at", "2019-04-14 18:21:24.410585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 495], ["active", "t"], ["created_at", "2019-04-14 18:21:24.413347"], ["updated_at", "2019-04-14 18:21:24.413347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 496], ["active", "t"], ["created_at", "2019-04-14 18:21:24.415883"], ["updated_at", "2019-04-14 18:21:24.415883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 497], ["active", "f"], ["created_at", "2019-04-14 18:21:24.418361"], ["updated_at", "2019-04-14 18:21:24.418361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 495], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 494], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 497], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 496], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 89]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 90]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 91]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 92]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 491]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 492]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 493]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 494]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 495]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 496]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ParentTest: test_: Parent should allow user_id to be set to 1. 
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------
ParentTest: test_: Parent should only allow integers for user_id which are greater than 0. 
-------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParentTest: test_: Parent should have many campers. 
----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to nil. 
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to -1. 
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", -1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
ParentTest: test_: within context should show that name method works. 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$FkTO.Shgaq6tCUVV.PdJteIt85T3/ZQtPu2FkW3HrDAlY0YFVogE6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.468210"], ["updated_at", "2019-04-14 18:21:24.468210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$0bneg3LsHjjOEMi2aNMl/ekFSXEZT5plU4LodgXz87FcuObcrVc.S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.472915"], ["updated_at", "2019-04-14 18:21:24.472915"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$90CNKn.tbnFleXxI1Dral.JZa4jo0tL3m4KNSZg2HeFeD2yG68cIO"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.480257"], ["updated_at", "2019-04-14 18:21:24.480257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$XUzw0Wg0Td58W44IANNUNuGv0OoVEVxbr3aIjIfi6XzuMB/GchKru"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.486120"], ["updated_at", "2019-04-14 18:21:24.486120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$kiumsoQcwcWXszVhQg/dUOMme7noVYMkM0ZL2rn9GwseeD44AUWAS"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.492578"], ["updated_at", "2019-04-14 18:21:24.492578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$qswbuEhQDq5gidJ7OpcmjOLFdCDOe71x0zMJAdGiygm0Wy1u6X0Ny"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.497383"], ["updated_at", "2019-04-14 18:21:24.497383"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$WWThZoKBv63a0K/bA70wQ.lP82Q84qbql1QtFIsvSCI7y9bB.v2QO"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.501957"], ["updated_at", "2019-04-14 18:21:24.501957"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 501], ["active", "t"], ["created_at", "2019-04-14 18:21:24.504855"], ["updated_at", "2019-04-14 18:21:24.504855"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 502], ["active", "t"], ["created_at", "2019-04-14 18:21:24.507357"], ["updated_at", "2019-04-14 18:21:24.507357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 503], ["active", "t"], ["created_at", "2019-04-14 18:21:24.509775"], ["updated_at", "2019-04-14 18:21:24.509775"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 504], ["active", "f"], ["created_at", "2019-04-14 18:21:24.512158"], ["updated_at", "2019-04-14 18:21:24.512158"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 502], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 501], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 504], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 503], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 93]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 94]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 95]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 96]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 498]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 499]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 500]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 501]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 502]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 503]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
ParentTest: test_: within context should show that last name method works. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$0pPw2m9FfUYmSoektv3i5ua6MUUvDcreQWPTwV8uZ6OXN/BTZx7xe"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.530065"], ["updated_at", "2019-04-14 18:21:24.530065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$28fyMBiyfPzKKZeryNJMf.G5YkT3XMt.lP5SgJjmJAMDi9MJIpWk2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.534696"], ["updated_at", "2019-04-14 18:21:24.534696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$cW9Sw/mzo66oNAYjp8IneOcf5ODRuC624FvcRys2tKFF795kigtBu"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.540228"], ["updated_at", "2019-04-14 18:21:24.540228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$dggpL/wLOQe6TB7nb1S93OjSsSy/KXdJyU3J7TzcSS2CK7uddzccu"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.547875"], ["updated_at", "2019-04-14 18:21:24.547875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$PWkfUTt5CkEK9NU3Cb83EOmLGRJvVz.FNOMInyD2mXeevstUcnxpe"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.553464"], ["updated_at", "2019-04-14 18:21:24.553464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$VQ5jEiG.1ZlgSHBCyL4MpOjp8ael/e9NAOyewmW.PLR8gGaEcX0vm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.558354"], ["updated_at", "2019-04-14 18:21:24.558354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$BRb6p4rrFXKEukkyo/6F5eVNrO5f5s0O7cYTg.koE4M3p7n4W9Q5u"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.563401"], ["updated_at", "2019-04-14 18:21:24.563401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 508], ["active", "t"], ["created_at", "2019-04-14 18:21:24.568049"], ["updated_at", "2019-04-14 18:21:24.568049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 509], ["active", "t"], ["created_at", "2019-04-14 18:21:24.570669"], ["updated_at", "2019-04-14 18:21:24.570669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 510], ["active", "t"], ["created_at", "2019-04-14 18:21:24.573067"], ["updated_at", "2019-04-14 18:21:24.573067"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 511], ["active", "f"], ["created_at", "2019-04-14 18:21:24.575466"], ["updated_at", "2019-04-14 18:21:24.575466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 509], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 508], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 511], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 510], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 97]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 98]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 99]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 100]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 505]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 506]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 507]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 508]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 509]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 510]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
ParentTest: test_: within context should show that inactive scope works. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$wpF3QtvS9T2SxhMZmsWvf.NOeIhk7y1EVepZvW1B6mDMOM1isHlv6"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.593788"], ["updated_at", "2019-04-14 18:21:24.593788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$9ugeDlvFY8Mk8AllvOg9XOaCY2Eu2E6vBzdDkdlbnm0ALY2juAUu."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.598385"], ["updated_at", "2019-04-14 18:21:24.598385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$SCOCsZrUUbtFG3l2f8yvXuLHw8IeUrYn0VcQhVgmlAmz/Da6wZ3FS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.603361"], ["updated_at", "2019-04-14 18:21:24.603361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$ueHxZlBnwArcTOE3yJH8HuSpuNoRCS3hD/ZSZdLHNAmFjFTSvRtsG"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.608791"], ["updated_at", "2019-04-14 18:21:24.608791"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$upfmLfEDxRvnG7KaImOb9.5LoWSgwVKOjIKZSICruQhWrvQMlyVl6"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.615954"], ["updated_at", "2019-04-14 18:21:24.615954"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$aWet6atMBFF/V/LDDoEyTeWTvlb16KhTteaVoxK1DsO9rYXMvllBm"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.620632"], ["updated_at", "2019-04-14 18:21:24.620632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$n5poww8P5.Bi7W/.egkt3O9Z/1Rnb8iNNZgZBC3I4nN0E2OfCjsr6"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.625535"], ["updated_at", "2019-04-14 18:21:24.625535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 515], ["active", "t"], ["created_at", "2019-04-14 18:21:24.628554"], ["updated_at", "2019-04-14 18:21:24.628554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 516], ["active", "t"], ["created_at", "2019-04-14 18:21:24.631329"], ["updated_at", "2019-04-14 18:21:24.631329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 517], ["active", "t"], ["created_at", "2019-04-14 18:21:24.633944"], ["updated_at", "2019-04-14 18:21:24.633944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 518], ["active", "f"], ["created_at", "2019-04-14 18:21:24.636346"], ["updated_at", "2019-04-14 18:21:24.636346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "parents" WHERE "parents"."active" = $1[0m  [["active", "f"]]
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" WHERE "parents"."active" = $1 ORDER BY last_name, first_name[0m  [["active", "f"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 518], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 101]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 102]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 103]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 512]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 513]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 514]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 515]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 516]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 517]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 1.5. 
---------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ParentTest: test_: Parent should not allow user_id to be set to 0. 
-------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
ParentTest: test_: within context should show that first name method works. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$H1zadVpkAti9IVtGI8fM1ONabtJU4d1KlNAMjdAuXy7p.O/udrfce"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.658506"], ["updated_at", "2019-04-14 18:21:24.658506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$gmva4E1/tj6euU.SL76Sb.laklX/fyqW84ULtXNuUaXM3B0D82z0q"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.663120"], ["updated_at", "2019-04-14 18:21:24.663120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$YfItyJnqhGulhWW/bcLCduWkQlWN.lob3pmQ0o59LB/CD13bq/dZS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.668154"], ["updated_at", "2019-04-14 18:21:24.668154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$0ExX4OmUMHzoaiuhFU53UeH3J680SY96FaExck3ujZu/W5PlT1Ury"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.674460"], ["updated_at", "2019-04-14 18:21:24.674460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$ilxeK01LXT5Vg1Iw1yznJeurEJOxr88qMqNPpg5Z.uZFvD8Ps9bb6"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.680239"], ["updated_at", "2019-04-14 18:21:24.680239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$AzNQXoijUBSoAKjmDdSyCuINcbM.Sw6cGgyZIJPgwBcVhv5LO8NGq"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.685079"], ["updated_at", "2019-04-14 18:21:24.685079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$HeFBnngSE2wECc8SlsLUhugSTQnfA6qJFHFGiU/uOevQSDB8ye/o6"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.689792"], ["updated_at", "2019-04-14 18:21:24.689792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 522], ["active", "t"], ["created_at", "2019-04-14 18:21:24.692491"], ["updated_at", "2019-04-14 18:21:24.692491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 523], ["active", "t"], ["created_at", "2019-04-14 18:21:24.695188"], ["updated_at", "2019-04-14 18:21:24.695188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 524], ["active", "t"], ["created_at", "2019-04-14 18:21:24.697640"], ["updated_at", "2019-04-14 18:21:24.697640"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "parents" ("user_id", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 525], ["active", "f"], ["created_at", "2019-04-14 18:21:24.700098"], ["updated_at", "2019-04-14 18:21:24.700098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mParent Load (0.3ms)[0m  [1m[34mSELECT "parents".* FROM "parents" INNER JOIN "users" ON "users"."id" = "parents"."user_id" ORDER BY last_name, first_name[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 523], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 522], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 525], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 524], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 105]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 106]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 107]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "parents" WHERE "parents"."id" = $1[0m  [["id", 108]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 519]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 520]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 521]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 522]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 523]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 524]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParentTest: test_: Parent should belong to user. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
LocationTest: test_: Location should require branch_id to be set. 
------------------------------------------------------------------
  [1m[36mLocation Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
LocationTest: test_: Location should require name to be set. 
-------------------------------------------------------------
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE "locations"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
LocationTest: test_: Location should belong to branch. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
LocationTest: test_: Location should have many camps. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
LocationTest: test_: Location should require unique value for name. 
--------------------------------------------------------------------
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" ORDER BY "locations"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:21:24.769739"], ["updated_at", "2019-04-14 18:21:24.769739"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
LocationTest: test_: Within context should list locations in alphabetical order. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:21:24.790794"], ["updated_at", "2019-04-14 18:21:24.790794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:21:24.794738"], ["updated_at", "2019-04-14 18:21:24.794738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:21:24.798048"], ["updated_at", "2019-04-14 18:21:24.798048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette YMCA"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Thelma Lovette YMCA"], ["branch_id", 111], ["created_at", "2019-04-14 18:21:24.803319"], ["updated_at", "2019-04-14 18:21:24.803319"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Olympus"], ["branch_id", 112], ["created_at", "2019-04-14 18:21:24.807454"], ["updated_at", "2019-04-14 18:21:24.807454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLocation Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "locations" WHERE LOWER("locations"."name") = LOWER($1) LIMIT $2[0m  [["name", "Avonworth Community Park"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "locations" ("name", "branch_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Avonworth Community Park"], ["branch_id", 113], ["created_at", "2019-04-14 18:21:24.812332"], ["updated_at", "2019-04-14 18:21:24.812332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLocation Load (0.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" ORDER BY name[0m
  [1m[35mSQL (4.8ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 46]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 47]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "locations" WHERE "locations"."id" = $1[0m  [["id", 48]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 111]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 112]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 113]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to camper_camp_badge. 
----------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should belong to task. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require camper_camp_badge_id to be set. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
CamperCampBadgeTaskTest: test_: CamperCampBadgeTask should require task_id to be set. 
--------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: Within context should have a role? method for authorization. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$8fNHkN3ZIXRYiqjVhnm8zuEx31jwYNGhpUbG.xVw0ebsy3y07f/4O"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.851263"], ["updated_at", "2019-04-14 18:21:24.851263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$KcUlMZE.UVd6wOgB.PyAwe3wvV8WD0c03qsa8qzUQTwAzqHeHrh0a"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.856341"], ["updated_at", "2019-04-14 18:21:24.856341"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$dGjEQ6CAghhkQTLQ1JRr4OFI2wScfIIJT9FcLlqr0f73WcW6Cskuy"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.861108"], ["updated_at", "2019-04-14 18:21:24.861108"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$dN/Bbk8B5BT2BHCcLdjoqu7iT0DFKmBePjSNkbiTxhjepISdVfe9G"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.867457"], ["updated_at", "2019-04-14 18:21:24.867457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$qUuTeN.mOhJhCLbLBadfXugmFDny6yapwR456qiY5WQVQx1jQAiMe"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.872103"], ["updated_at", "2019-04-14 18:21:24.872103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$c7MTru17TDJ9to47VXNmaOiraYy/hfwsk2aIP86IcOvJE3VKVSveC"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.877397"], ["updated_at", "2019-04-14 18:21:24.877397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$BXUtz20DmDM.T3Ti1B8HuO/wNiXwlPFjw/okobfszQma47uHI/Oo2"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.882413"], ["updated_at", "2019-04-14 18:21:24.882413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 526]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 527]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 528]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 529]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 530]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 531]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserTest: test_: User should require first_name to be set. 
-----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "bad". 
----------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred123@ymca.gov". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred123@ymca.gov"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_: User should have a secure password. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should not allow email to be set to nil. 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@ymca.com". 
-----------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@ymca.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
UserTest: test_: Within context should allow user to authenticate with password. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$taEXyLp/3OAnwqMkrCBiYO2T4IZnIiUTZ/rem00ugGdUQ5oRyGwmC"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:24.926483"], ["updated_at", "2019-04-14 18:21:24.926483"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$ctUzS3DHadzy9z.QuffDIunEhM6xrTlEUXxDDCCH7uXtXv69OCz9m"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:24.933822"], ["updated_at", "2019-04-14 18:21:24.933822"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$ZgkWcjTuov3Dm.exlW98hO0uuyKJLN/EQZJIb6EmStIQ.9WAIZ33C"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.938882"], ["updated_at", "2019-04-14 18:21:24.938882"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$eBcD9S2lGuZEvWMHwInEwOMuGY/ZrUvypFBsO.ymAZlRPKP2UFjii"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.944237"], ["updated_at", "2019-04-14 18:21:24.944237"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$JQThtRzh.gvtDocvjmVGeekxeIvYPisK0ToW/s11VhhsInYn6DXo."], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.949942"], ["updated_at", "2019-04-14 18:21:24.949942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$LyMh6EVCg08aFNbittMIDOAszqVIZFM3tfOLw4V7qS1Uf/H3725h2"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.956462"], ["updated_at", "2019-04-14 18:21:24.956462"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$kjBaZ2ES7Oo3cUhqixAkCOaQQYnCNF63gzNZ8GQEIUl61XLV1T2aW"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:24.962774"], ["updated_at", "2019-04-14 18:21:24.962774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 533]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 534]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 535]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 536]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 537]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 538]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
UserTest: test_: User should require email to be set. 
------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my_fred@ymca.org". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my_fred@ymca.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should require unique value for email. 
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "a"], ["password_digest", "$2a$04$VC9C4t5vboloA6Mii.KAoODaAjY8elCHDO4ouoEHiNMjtzGEYCL7K"], ["created_at", "2019-04-14 18:21:24.986817"], ["updated_at", "2019-04-14 18:21:24.986817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "A"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
UserTest: test_: User should allow role to be set to "parent". 
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred,com". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred,com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "my fred@fred.com". 
------------------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my fred@fred.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
UserTest: test_: Within context should require users to have unique emails. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$7obeA.0y7vLhTMLlTHGM9egTzYzZMwQpLwY7GyWkiLUyqL3jZ8kd2"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:25.016059"], ["updated_at", "2019-04-14 18:21:25.016059"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$vzWAVZxWdQsjVp85sfZo9.GuS3CMnpI9fIkAoZq5siYCGZVV161p."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:25.022191"], ["updated_at", "2019-04-14 18:21:25.022191"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$jZjkX8CTAj8GUiL/Lur4ye8EfwvvcdPCCkVquOsYV21c.x/mijCKS"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.027929"], ["updated_at", "2019-04-14 18:21:25.027929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$9WJ0aG3hDzd47MNUqVayV.ripuY8XPs.ebao1INKcVKwvQ6rW1ErS"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.033198"], ["updated_at", "2019-04-14 18:21:25.033198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$u3zmYXuTZegCcxAaIkHEy.lhhZderLX1ysTpCAU28jMQCheyxWKaW"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.039798"], ["updated_at", "2019-04-14 18:21:25.039798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$vW5z9P1exIsb6Q1sGpwU9eDSYOBVp9Z0TWo6NDLraw/0L8Ppi3yAS"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.046203"], ["updated_at", "2019-04-14 18:21:25.046203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$AdWM.GA38tVMwT/3kgLTpuL0TTpFgCWLSIJzTT0ZTkQ8jwJkUB7Cq"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.050776"], ["updated_at", "2019-04-14 18:21:25.050776"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND ("users"."id" != $2) LIMIT $3[0m  [["email", "parent@gmail.com"], ["id", 541], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 541]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 542]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 543]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 544]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 545]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 546]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
UserTest: test_: User should require last_name to be set. 
----------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should allow role to be set to "counselor". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.con". 
---------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.con"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------
UserTest: test_: Within context should require passwords to be confirmed and matching. 
---------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$HtzjxQDnUA40MS0cMc1yyeXSKJkWLuQwQyt.lobWFAFA5OXgJ4xpK"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:25.080049"], ["updated_at", "2019-04-14 18:21:25.080049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$BnpMa4TVBXySAl5nvqCfre.7FFT1HYbzZa3imzqrlJ6h4mkI2DKrG"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:25.086131"], ["updated_at", "2019-04-14 18:21:25.086131"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$DMeYOZinq.4/PEjQiiImOeJtZ4Yg0tWdtwT3WHnMPsOptpdIJzzRm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.092028"], ["updated_at", "2019-04-14 18:21:25.092028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$wnzWHmAd69WzgdFDFcKS9OYM7hRv0ro5PxjqlyuDJIo6JtJ8YLafC"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.097342"], ["updated_at", "2019-04-14 18:21:25.097342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$1mdsnmG6hRkV21aIq2dlWec9dCHy0pxkXCltc6eWyevH4M2FyyMHC"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.102376"], ["updated_at", "2019-04-14 18:21:25.102376"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$V4HI3gvmeo0YBNf.ZW/JTOUHm9tB8DrOl/mJTidXOimWZ/1NajrGi"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.109631"], ["updated_at", "2019-04-14 18:21:25.109631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$aInvg7mECmkMmNkmvinq9eCwWP86lWZYb4d0982cBou8mxzBn24UC"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.114486"], ["updated_at", "2019-04-14 18:21:25.114486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent3@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 548]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 549]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 550]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 551]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 552]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 553]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
UserTest: test_: User should not allow role to be set to 10. 
-------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should not allow role to be set to nil. 
--------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred". 
------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should not allow email to be set to "fred@fred.uk". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@fred.uk"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "leader". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
UserTest: test_: User should not allow role to be set to "hacker". 
-------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserTest: test_: User should allow role to be set to "admin". 
--------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "my.fred@ymca.net". 
--------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "my.fred@ymca.net"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
UserTest: test_: User should allow email to be set to "fred@andrew.cmu.edu". 
-----------------------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "fred@andrew.cmu.edu"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
UserTest: test_: Within context should require a password for new users. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "kblack@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "kblack@ymca.org"], ["password_digest", "$2a$04$lCPZSXS.p10A.VpOgCAxS.sFEjKhfKu2y/oBxItwRdEkUcIc7Cy1."], ["first_name", "Kim"], ["last_name", "Black"], ["role", "admin"], ["created_at", "2019-04-14 18:21:25.175223"], ["updated_at", "2019-04-14 18:21:25.175223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "counselor@ymca.org"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "counselor@ymca.org"], ["password_digest", "$2a$04$kjNef2NRym6STTpVBRVJiO0QpY1G8Hb5WSW.s90mBGsG8FU4Rn7tm"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "counselor"], ["created_at", "2019-04-14 18:21:25.180438"], ["updated_at", "2019-04-14 18:21:25.180438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "parent@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "parent@gmail.com"], ["password_digest", "$2a$04$JJDozJ5IjsXScrMWGkSyVuUl7pvolVimI9VobMThlEMcqC3cOrD/S"], ["first_name", "Kim"], ["last_name", "Black"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.185390"], ["updated_at", "2019-04-14 18:21:25.185390"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "profh@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "profh@example.com"], ["password_digest", "$2a$04$G8A.J6waGsb727CUMNdb5e/rklshj.AQh9Rl8hn6hIMlteEfTsy0a"], ["first_name", "Larry"], ["last_name", "Heimann"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.191911"], ["updated_at", "2019-04-14 18:21:25.191911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "theananthfamily@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "theananthfamily@gmail.com"], ["password_digest", "$2a$04$OwNZHpxil2CTZQMxaYkof.khK9AcZ6XyM0Tzobs5FQkCgl5Liuw42"], ["first_name", "Aneena"], ["last_name", "Ananth"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.196912"], ["updated_at", "2019-04-14 18:21:25.196912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "lisa@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "lisa@example.com"], ["password_digest", "$2a$04$p62TxvJD11Hwbq4P8UHL5.zj9OkwJMHNs/wjoay9KNPDyzpZEyX22"], ["first_name", "Lisa"], ["last_name", "Tables"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.201494"], ["updated_at", "2019-04-14 18:21:25.201494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "inactive@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "first_name", "last_name", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "inactive@example.com"], ["password_digest", "$2a$04$m78T2i3ilnSFQW2qTSQe9ODOwYzCDtmh8oES5oW6EcSwydt//meb6"], ["first_name", "Parent"], ["last_name", "Inactive"], ["role", "parent"], ["created_at", "2019-04-14 18:21:25.206105"], ["updated_at", "2019-04-14 18:21:25.206105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "tank@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 555]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 556]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 557]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 558]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 559]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 560]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------
CampTest: test_: Camp should not allow start_date to be set to "bad". 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CampTest: test_: Camp should require location_id to be set. 
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
CampTest: test_: Camp should require start_date to be set. 
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CampTest: test_: Camp should require name to be set. 
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampTest: test_: Camp should require program to be set. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
CampTest: test_: Camp should belong to location. 
-------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
CampTest: test_: Camp should not allow end_date to be set to "bad". 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
CampTest: test_: Camp should have many camp_badges. 
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
CampTest: test_: Camp should require end_date to be set. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
TaskTest: test_: Task should belong to badge. 
----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
TaskTest: test_: Task should require badge_id to be set. 
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
BranchTest: test_: Branch should require unique value for name. 
----------------------------------------------------------------
  [1m[36mBranch Load (0.5ms)[0m  [1m[34mSELECT  "branches".* FROM "branches" ORDER BY "branches"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:21:25.302388"], ["updated_at", "2019-04-14 18:21:25.302388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
BranchTest: test_: Within context should list branch in alphabetical order. 
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:21:25.310361"], ["updated_at", "2019-04-14 18:21:25.310361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:21:25.313702"], ["updated_at", "2019-04-14 18:21:25.313702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:21:25.317133"], ["updated_at", "2019-04-14 18:21:25.317133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Load (0.2ms)[0m  [1m[34mSELECT "branches".* FROM "branches" ORDER BY name[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 115]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 116]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 117]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
BranchTest: test_: Branch should require name to be set. 
---------------------------------------------------------
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE "branches"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
BranchTest: test_: Branch should have many camps through locations. 
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------------------------------
BranchTest: test_: Within context should not allowed creating a duplicate (also testing case sensitivity) branch name. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Thelma Lovette"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Thelma Lovette"], ["created_at", "2019-04-14 18:21:25.333329"], ["updated_at", "2019-04-14 18:21:25.333329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "Olympus"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Olympus"], ["created_at", "2019-04-14 18:21:25.337034"], ["updated_at", "2019-04-14 18:21:25.337034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "North Boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "branches" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "North Boroughs"], ["created_at", "2019-04-14 18:21:25.341511"], ["updated_at", "2019-04-14 18:21:25.341511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBranch Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "branches" WHERE LOWER("branches"."name") = LOWER($1) LIMIT $2[0m  [["name", "north boroughs"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 118]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 119]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "branches" WHERE "branches"."id" = $1[0m  [["id", 120]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BranchTest: test_: Branch should have many locations. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
BadgeTest: test_: Badge should require name to be set. 
-------------------------------------------------------
  [1m[36mBadge Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
BadgeTest: test_: Badge should belong to skill. 
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
BadgeTest: test_: Badge should have many camp_badges. 
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
BadgeTest: test_: Badge should require skill_id to be set. 
-----------------------------------------------------------
  [1m[36mBadge Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE "badges"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
BadgeTest: test_: Badge should require unique value for name. 
--------------------------------------------------------------
  [1m[36mBadge Load (0.1ms)[0m  [1m[34mSELECT  "badges".* FROM "badges" ORDER BY "badges"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "badges" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "a"], ["created_at", "2019-04-14 18:21:25.392978"], ["updated_at", "2019-04-14 18:21:25.392978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBadge Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "badges" WHERE LOWER("badges"."name") = LOWER($1) LIMIT $2[0m  [["name", "A"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require camp_badge_id to be set. 
------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should require counselor_id to be set. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to camp_badge. 
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
CounselorCampBadgeTest: test_: CounselorCampBadge should belong to counselor. 
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CounselorTest: test_: Counselor should belong to user. 
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require badge_id to be set. 
-------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to camp. 
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
CampBadgeTest: test_: CampBadge should require camp_id to be set. 
------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
CampBadgeTest: test_: CampBadge should belong to badge. 
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
SkillTest: test_: Skill should require category to be set. 
-----------------------------------------------------------
  [1m[36mSkill Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
SkillTest: test_: Skill should have many badges. 
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
SkillTest: test_: Skill should require name to be set. 
-------------------------------------------------------
  [1m[36mSkill Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "skills" WHERE "skills"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
